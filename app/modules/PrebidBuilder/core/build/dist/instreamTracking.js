pbjsChunk([246],{423:function(e,t,n){e.exports=n(424)},424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackInstreamDeliveredImpressions=w;var r=n(0),i=n(3),o=n(16),a=n(17),c=n(10),u=(n.n(c),n(5)),s=n.n(u);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=s.a.TARGETING_KEYS,p=l.CACHE_ID,v=l.UUID,y=s.a.EVENTS,m=y.BID_WON,b=y.AUCTION_END,g=s.a.BID_STATUS.RENDERED;i.b.setDefaults({instreamTracking:Object(r.deepClone)({enabled:!1,maxWindow:6e4,pollingFreq:500})});var h=/video|fetch|xmlhttprequest|other/;function w(e){var t=e.adUnits,n=e.bidsReceived,u=e.bidderRequests,s=i.b.getConfig("instreamTracking")||{};if(!s.enabled||!window.performance||!window.performance.getEntriesByType)return!1;var d=n.filter((function(e){var t=Object(r.getBidRequest)(e.requestId,u);return t&&Object(r.deepAccess)(t,"mediaTypes.video.context")===a.a&&e.videoCacheKey}));if(!d.length)return!1;var l={};t.forEach((function(e){l[e.code]||Object(r.deepAccess)(e,"mediaTypes.video.context")!==a.a||(l[e.code]=!0)}));var y=Object.keys(l).length,b=Date.now(),w=s.maxWindow,T=s.pollingFreq,E=s.urlPattern,O=0,A=0;return setTimeout((function e(){var t,n=window.performance.getEntriesByType("resource").splice(A),r=f(n);try{var i=function(){var e=t.value,n=e.name;if(!h.test(e.initiatorType))return"continue";d.forEach((function(e){var t=!(-1!==n.indexOf(p)||-1!==n.indexOf(v))&&-1!==n.indexOf(e.videoCacheKey);E&&E instanceof RegExp&&!E.test(n)||t&&e.status!==g&&(O++,o.a.addWinningBid(e),c.emit(m,e))}))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}A+=n.length,Date.now()-b<w&&O<y&&setTimeout(e,T)}),T),!0}c.on(b,w),window.pbjs.installedModules.push("instreamTracking")}},[423]);