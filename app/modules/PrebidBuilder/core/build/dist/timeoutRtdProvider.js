pbjsChunk([121],{762:function(e,t,n){e.exports=n(763)},763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"timeoutRtdFunctions",(function(){return d})),n.d(t,"timeoutSubmodule",(function(){return f}));var r=n(8),o=n(4),i=n(0),a=n(14);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d={getDeviceType:function(){var e=window.navigator.userAgent.toLowerCase();if(/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(e))return 5;if(/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(e))return 4;return 2},getConnectionSpeed:function(){var e=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection||{};switch(e.type||e.effectiveType){case"slow-2g":case"2g":return"slow";case"3g":return"medium";case"bluetooth":case"cellular":case"ethernet":case"wifi":case"wimax":case"4g":return"fast"}return"unknown"},checkVideo:function(e){return e.some((function(e){return e.mediaTypes&&e.mediaTypes.video}))},calculateTimeoutModifier:function(e,t){Object(i.logInfo)("Timeout rules",t);var n=0,r=0;if(t.includesVideo){var o=d.checkVideo(e);r=t.includesVideo[o]||0,Object(i.logInfo)("Adding ".concat(r," to timeout for includesVideo ").concat(o)),n+=r}if(t.numAdUnits){var a=e.length;if(t.numAdUnits[a])n+=t.numAdUnits[a];else{var l,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(s(t.numAdUnits));try{for(f.s();!(l=f.n()).done;){var m=c(l.value,2),p=m[0],b=m[1],v=c(p.split("-"),2),y=v[0],g=v[1];if(parseInt(y)<=a&&a<=parseInt(g)){Object(i.logInfo)("Adding ".concat(b," to timeout for numAdUnits ").concat(a)),n+=b;break}}}catch(e){f.e(e)}finally{f.f()}}}if(t.deviceType){var h=d.getDeviceType();r=t.deviceType[h]||0,Object(i.logInfo)("Adding ".concat(r," to timeout for deviceType ").concat(h)),n+=r}if(t.connectionSpeed){var w=d.getConnectionSpeed();r=t.connectionSpeed[w]||0,Object(i.logInfo)("Adding ".concat(r," to timeout for connectionSpeed ").concat(w)),n+=r}return Object(i.logInfo)("timeout Modifier calculated",n),n},handleTimeoutIncrement:function(e,t){var n=e.adUnits||Object(a.a)().adUnits,r=d.calculateTimeoutModifier(n,t),o=Object(a.a)().getConfig("bidderTimeout");e.timeout=o+r}},s=Object.entries||function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r};var f={name:"timeout",init:function(){return!0},getBidRequestData:function(e,t,n,r){Object(i.logInfo)("Timeout rtd config",n);var a=Object(i.deepAccess)(n,"params.endpoint.url");a?(Object(i.logInfo)("Timeout url",a),o.b()(a,{success:function(n){try{var r=JSON.parse(n);d.handleTimeoutIncrement(e,r)}catch(e){Object(i.logError)("Error parsing json response from timeout provider.")}t()},error:function(e){Object(i.logError)("Timeout request error!",e),t()}})):Object(i.deepAccess)(n,"params.rules")?(d.handleTimeoutIncrement(e,Object(i.deepAccess)(n,"params.rules")),t()):(Object(i.logInfo)("No timeout endpoint or timeout rules found. Exiting timeout rtd module"),t())}};Object(r.e)("realTimeData",f),window.pbjs.installedModules.push("timeoutRtdProvider")}},[762]);