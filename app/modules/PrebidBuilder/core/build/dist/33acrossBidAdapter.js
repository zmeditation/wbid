pbjsChunk([402],{43:function(e,t,r){e.exports=r(44)},44:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"spec",(function(){return P}));var n=r(1),i=r(3),o=r(0),a=r(2);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var p="33across",f="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",l=/^[a-zA-Z0-9_-]{22}$/,m="siab",b="inview",g="instream",h=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],v={uniqueSiteIds:[]},y="nm";function O(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function j(e){return"".concat(e.bidId)}function A(e){var t=e.bidRequests,r=e.gdprConsent,n=void 0===r?{}:r,i=e.uspConsent,s=e.pageUrl,u=e.ttxSettings,p={},f=t[0].params,l=f.siteId,m=f.test;p.imp=[],t.forEach((function(e){p.imp.push(function(e){var t={id:e.bidId,ext:{ttx:{prod:Object(o.deepAccess)(e,"params.productId")}}};Object(o.deepAccess)(e,"mediaTypes.banner")&&(t.banner=c({},function(e){var t,r=Object(o.deepAccess)(e,"mediaTypes.banner",{}),n=(s=e.adUnitCode,document.getElementById(s)||document.getElementById(function(e){if(Object(o.isGptPubadsDefined)())for(var t=googletag.pubads().getSlots(),r=Object(o.isSlotMatchingAdUnitCode)(e),n=0;n<t.length;n++)if(r(t[n])){var i=t[n].getSlotElementId();return Object(o.logInfo)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(i)),i}return Object(o.logWarn)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(s))),i=function(e){if(Object(o.isArray)(e)&&2===e.length&&!Object(o.isArray)(e[0]))return[x(e)];return e.map(x)}(r.sizes);var s;t="function"==typeof e.getFloor?i.map((function(t){var r,n=C(e,t,a.b);return n&&(r={ext:{ttx:{bidfloors:[n]}}}),d({},t,r)})):i;var c=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(i),u=function(e){return{ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}}(function(e){return!function(){try{return Object(o.getWindowSelf)()!==Object(o.getWindowTop)()}catch(e){return!0}}()&&null!==e}(n)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.w,i=r.h;return"visible"===t.document.visibilityState?E(e,t,{w:n,h:i}):0}(n,Object(o.getWindowTop)(),c):y);return{format:t,ext:u}}(e)));Object(o.deepAccess)(e,"mediaTypes.video")&&(t.video=function(e){var t=Object(o.deepAccess)(e,"mediaTypes.video",{}),r=Object(o.deepAccess)(e,"params.video",{}),n=c(c({},t),r),i={},s=x(n.playerSize[0]),u=s.w,p=s.h;i.w=u,i.h=p,h.forEach((function(e){n.hasOwnProperty(e)&&(i[e]=n[e])}));var f=S(e);i.placement=i.placement||2,f===g&&(i.startdelay=i.startdelay||0,i.placement=1);if("function"==typeof e.getFloor){var l=C(e,{w:i.w,h:i.h},a.d);l&&d(i,{ext:{ttx:{bidfloors:[l]}}})}return i}(e));return t}(e))})),p.site={id:l},s&&(p.site.page=s),p.id=t[0].auctionId,n.consentString&&(p.user=w(p.user,{consent:n.consentString})),Array.isArray(t[0].userIdAsEids)&&t[0].userIdAsEids.length>0&&(p.user=w(p.user,{eids:t[0].userIdAsEids})),p.regs=w(p.regs,{gdpr:Number(n.gdprApplies)}),i&&(p.regs=w(p.regs,{us_privacy:i})),p.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"6.10.0-pre"}]}},t[0].schain&&(p.source=w(p.source,{schain:t[0].schain})),1===m&&(p.test=1);return{method:"POST",url:u&&u.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(l),data:JSON.stringify(p),options:{contentType:"text/plain",withCredentials:!0}}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(o.mergeDeep)({},e,{ext:t})}function x(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function I(e){return Object(o.mergeDeep)({},e,{params:{productId:S(e)}})}function S(e){var t=e.params,r=e.mediaTypes,n=r.banner,i=r.video;return i&&!n&&"instream"===i.context?g:t.productId===b?t.productId:m}function C(e,t,r){var n=e.getFloor({currency:"USD",mediaType:r,size:[t.w,t.h]});if(!isNaN(n.floor)&&"USD"===n.currency)return n.floor}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.w,n=t.h,i=e.getBoundingClientRect(),o=i.width,a=i.height,s=i.left,c=i.top,u=i.right,d=i.bottom;return(0===o||0===a)&&r&&n&&(o=r,a=n,u=s+r,d=c+n),{width:o,height:a,left:s,top:c,right:u,bottom:d}}function U(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},r=1;r<e.length;++r){if(t.left=Math.max(t.left,e[r].left),t.right=Math.min(t.right,e[r].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[r].top),t.bottom=Math.min(t.bottom,e[r].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}function E(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.w,i=r.h,o=T(e,{w:n,h:i}),a=U([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},o]);return null!==a?a.width*a.height/(o.width*o.height)*100:0}var P={NON_MEASURABLE:y,code:p,supportedMediaTypes:[a.b,a.d],isBidRequestValid:function(e){return function(e){if(e.bidder!==p||void 0===e.params)return!1;if(!function(e){if(null===(Object(o.deepAccess)(e,"params.siteId","")||"").trim().match(l))return!1;return!0}(e))return!1;return!0}(e)&&function(e){var t=Object(o.deepAccess)(e,"mediaTypes.banner");if(void 0===t)return!0;if(!Array.isArray(t.sizes))return!1;return!0}(e)&&function(e){var t=Object(o.deepAccess)(e,"mediaTypes.video"),r=Object(o.deepAccess)(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var n=c(c({},t),r);if(!Array.isArray(n.mimes)||0===n.mimes.length)return!1;if(!Array.isArray(n.protocols)||0===n.protocols.length)return!1;if(void 0!==n.placement&&"number"!=typeof n.placement)return!1;if("instream"===t.context&&void 0!==n.startdelay&&"number"!=typeof n.startdelay)return!1;return!0}(e)},buildRequests:function(e,t){var r=function(e,t){var r=d({},i.b.getConfig("ttxSettings")),n=d({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),a=t&&t.uspConsent,s=t&&t.refererInfo?t.refererInfo.referer:void 0;return v.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(o.uniques),{ttxSettings:r,gdprConsent:n,uspConsent:a,pageUrl:s}}(e,t),n=r.ttxSettings,a=r.gdprConsent,s=r.uspConsent,c=r.pageUrl,u=function(e,t){var r=t.map(I),n=e&&e.enableSRAMode;return function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)})),r}(r,!0===n?O:j)}(n,e),p=[];for(var f in u)p.push(A({bidRequests:u[f],gdprConsent:a,uspConsent:s,pageUrl:c,ttxSettings:n}));return p},interpretResponse:function(e,t){var r=e.body,n=r.seatbid,i=r.cur,s=void 0===i?"USD":i;return Object(o.isArray)(n)?n.filter((function(e){return Object(o.isArray)(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var r=e.adomain&&e.adomain.length,n={requestId:e.impid,bidderCode:p,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:Object(o.deepAccess)(e,"ext.ttx.mediaType",a.b),currency:t,netRevenue:!0};r&&(n.meta={advertiserDomains:e.adomain});if(n.mediaType===a.d){"xml"===Object(o.deepAccess)(e,"ext.ttx.vastType","xml")?n.vastXml=n.ad:n.vastUrl=n.ad}return n}(e,s)})))}),[]):[]},getUserSyncs:function(e,t,r,n){var o=e.iframeEnabled?v.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,r=void 0===t?"zzz000000000003zzz":t,n=e.gdprConsent,o=void 0===n?{}:n,a=e.uspConsent,s=i.b.getConfig("ttxSettings"),c=s&&s.syncUrl||f,u=o.consentString,d=o.gdprApplies,p={type:"iframe",url:"".concat(c,"&id=").concat(r,"&gdpr_consent=").concat(encodeURIComponent(u),"&us_privacy=").concat(encodeURIComponent(a))};"boolean"==typeof d&&(p.url+="&gdpr=".concat(Number(d)));return p}({gdprConsent:r,uspConsent:n,siteId:e})})):[];return v.uniqueSiteIds=[],o}};Object(n.registerBidder)(P),window.pbjs.installedModules.push("33acrossBidAdapter")}},[43]);