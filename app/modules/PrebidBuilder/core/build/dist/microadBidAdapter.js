pbjsChunk([206],{527:function(e,r,t){e.exports=t(528)},528:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"ENVIRONMENT",(function(){return o})),t.d(r,"spec",(function(){return c}));var a=t(0),i=t(1),n=t(2),d={production:"https://s-rtb-pb.send.microad.jp/prebid",test:"https://rtbtest.send.microad.jp/prebid"},o="production";function p(e,r){return(e?-1:0)&r}function s(e){return p(e.mediaTypes.banner,1)|p(e.mediaTypes.native,2)|p(e.mediaTypes.video,4)}var c={code:"microad",supportedMediaTypes:[n.b],isBidRequestValid:function(e){return!!(e&&e.params&&e.params.spot&&e.mediaTypes&&(e.mediaTypes.banner||e.mediaTypes.native||e.mediaTypes.video))},buildRequests:function(e,r){var t=[];return e.forEach((function(e){var i=e.params,n={spot:i.spot,url:r.refererInfo.canonicalUrl||window.location.href,referrer:r.refererInfo.referer,bid_id:e.bidId,transaction_id:e.transactionId,media_types:s(e),cbt:Math.floor(Math.random()*Math.pow(10,18)).toString(16)+(new Date).getTime().toString(16)};if(i.url&&(n.url_macro=i.url.replace("${COMPASS_EXT_URL}","")),i.referrer&&(n.referrer_macro=i.referrer.replace("${COMPASS_EXT_REF}","")),i.ifa&&(n.ifa=i.ifa.replace("${COMPASS_EXT_IFA}","")),i.appid&&(n.appid=i.appid.replace("${COMPASS_EXT_APPID}","")),i.geo){var p=i.geo.replace("${COMPASS_EXT_GEO}","");/^[0-9.\-]+,[0-9.\-]+$/.test(p)&&(n.geo=p)}var c=Object(a.deepAccess)(e,"userId.idl_env");!Object(a.isEmpty)(c)&&Object(a.isStr)(c)&&(n.idl_env=c),t.push({method:"GET",url:d[o],data:n,options:{Accept:"application/json"}})})),t},interpretResponse:function(e){var r=e.body,t=[];if(r.cpm&&r.cpm>0){var a={requestId:r.requestId,cpm:r.cpm,width:r.width,height:r.height,ad:r.ad,ttl:r.ttl,creativeId:r.creativeId,netRevenue:r.netRevenue,currency:r.currency,meta:r.meta||{advertiserDomains:[]}};r.dealId&&(a.dealId=r.dealId),t.push(a)}return t},getUserSyncs:function(e,r){var t=[];return e.iframeEnabled||e.pixelEnabled?(r.forEach((function(r){var a=r.body.syncUrls.iframe,i=r.body.syncUrls.image;e.iframeEnabled&&a&&a.forEach((function(e){t.push({type:"iframe",url:e})})),e.pixelEnabled&&i&&i.forEach((function(e){t.push({type:"image",url:e})}))})),t):t}};Object(i.registerBidder)(c),window.pbjs.installedModules.push("microadBidAdapter")}},[527]);