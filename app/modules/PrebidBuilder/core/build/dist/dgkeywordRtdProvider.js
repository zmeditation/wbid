pbjsChunk([300],{300:function(e,r,t){e.exports=t(301)},301:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDgKeywordsAndSet=d,r.getTargetBidderOfDgKeywords=l,t.d(r,"dgkeywordSubmodule",(function(){return c}));var o=t(0),n=t(4),a=t(8),i=t(14);function u(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==t.return||t.return()}finally{if(u)throw a}}}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function d(e,r,t,a){var s=t&&t.params&&t.params.timeout&&Number(t.params.timeout)>0?Number(t.params.timeout):1e3,d=t&&t.params&&t.params.url?t.params.url:"https://mediaconsortium.profiles.tagger.opecloud.com/api/v1?url="+encodeURIComponent(window.location.href),c=e.adUnits||Object(i.a)().adUnits,f=!1;Object(o.logMessage)("[dgkeyword sub module]",c,s);var g=l(c);g.length<=0?(Object(o.logMessage)("[dgkeyword sub module] no dgkeyword targets."),r()):(Object(o.logMessage)("[dgkeyword sub module] dgkeyword targets:",g),Object(o.logMessage)("[dgkeyword sub module] get targets from profile api start."),Object(n.a)(d,{success:function(t){var n=JSON.parse(t);if(!f){if(Object(o.logMessage)("[dgkeyword sub module] get targets from profile api end."),n){var a={};if(null!=n.s&&n.s.length>0&&(a.opeaud=n.s),null!=n.t&&n.t.length>0&&(a.opectx=n.t),Object.keys(a).length>0){var i,s={},d=u(g);try{for(d.s();!(i=d.n()).done;){var l=i.value;l.params.keywords=a,s[l.bidder]||(s[l.bidder]=!0)}}catch(e){d.e(e)}finally{d.f()}if(!e._ignoreSetOrtb2){var c={};Object(o.deepSetValue)(c,"site.keywords",a),Object(o.deepSetValue)(c,"user.keywords",a);var m={ortb2:c};e.setBidderConfig({bidders:Object.keys(s),config:m})}}}f=!0}r()},error:function(e){Object(o.logError)("[dgkeyword sub module] profile api access error.",e),r()}},null,{withCredentials:!0}),setTimeout((function(){f||(Object(o.logInfo)("[dgkeyword sub module] profile api timeout. [timeout: "+s+"ms]"),f=!0),r()}),s))}function l(e){var r,t=[],o=u(e);try{for(o.s();!(r=o.n()).done;){var n,a=u(r.value.bids);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.params&&!0===i.params.dgkeyword&&(delete i.params.dgkeyword,t.push(i))}}catch(e){a.e(e)}finally{a.f()}}}catch(e){o.e(e)}finally{o.f()}return t}var c={name:"dgkeyword",getBidRequestData:d,init:function(e){return!0}};Object(a.e)("realTimeData",c),window.pbjs.installedModules.push("dgkeywordRtdProvider")}},[300]);