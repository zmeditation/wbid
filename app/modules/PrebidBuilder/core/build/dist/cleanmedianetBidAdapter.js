pbjsChunk([326],{240:function(e,r,t){e.exports=t(241)},241:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"helper",(function(){return c})),t.d(r,"spec",(function(){return l}));var n=t(0),i=t(1),a=t(3),d=t(13),o=t(2),s=t(12),p=t.n(s);function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var c={getTopWindowDomain:function(e){var r=e.indexOf("://")+"://".length;return e.substring(r,e.indexOf("/",r)<0?e.length:e.indexOf("/",r))},startsWith:function(e,r){return e.substr(0,r.length)===r},getMediaType:function(e){return e.ext?e.ext.media_type?e.ext.media_type.toLowerCase():e.ext.vast_url?o.d:o.b:o.b}},l={code:"cleanmedianet",aliases:[],supportedMediaTypes:[o.b,o.d],isBidRequestValid:function(e){return!!e.params.supplyPartnerId&&"string"==typeof e.params.supplyPartnerId&&(void 0===e.params.bidfloor||"number"==typeof e.params.bidfloor)&&(void 0===e.params.adpos||"number"==typeof e.params.adpos)&&(void 0===e.params.protocols||Array.isArray(e.params.protocols))&&(void 0===e.params.instl||0===e.params.instl||1===e.params.instl)},buildRequests:function(e,r){var t=this;return e.map((function(e){var i=e.adUnitCode,d=e.auctionId,s=e.mediaTypes,l=e.params,f=e.sizes,g=e.transactionId,m="".concat("https://bidder.cleanmediaads.com","/r/").concat(l.supplyPartnerId,"/bidr?rformat=open_rtb&reqformat=rtb_json&bidder=prebid")+(l.query?"&"+l.query:""),v=a.b.getConfig("pageUrl")||r.refererInfo.referer,b={id:d,site:{domain:c.getTopWindowDomain(v),page:v,ref:r.refererInfo.referer},device:{ua:navigator.userAgent,dnt:Object(n.getDNT)()?1:0,h:screen.height,w:screen.width,language:navigator.language},imp:[],ext:{},user:{ext:{}}};r.gdprConsent&&r.gdprConsent.consentString&&r.gdprConsent.gdprApplies&&(b.ext.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies},b.regs={ext:{gdpr:!0===r.gdprConsent.gdprApplies?1:0}},b.user={ext:{consent:r.gdprConsent.consentString}});var y={id:g,instl:1===l.instl?1:0,tagid:i,bidfloor:0,bidfloorcur:"USD",secure:1},h=l.favoredMediaType&&p()(t.supportedMediaTypes,l.favoredMediaType);if((!s||s.banner)&&(!h||l.favoredMediaType===o.b)){var x=u({},y,{banner:{w:f.length?f[0][0]:300,h:f.length?f[0][1]:250,pos:l.pos||0,topframe:Object(n.inIframe)()?0:1}});b.imp.push(x)}if(s&&s.video&&(!h||l.favoredMediaType===o.d)){var w={video:{protocols:l.protocols||[1,2,3,4,5,6],pos:l.pos||0,ext:{context:s.video.context}}},A=s.video.playerSize||f;Object(n.isArray)(A[0])?(w.video.w=A[0][0],w.video.h=A[0][1]):Object(n.isNumber)(A[0])?(w.video.w=A[0],w.video.h=A[1]):(w.video.w=300,w.video.h=250),w=u({},y,w),b.imp.push(w)}if(0!==b.imp.length)return{method:"POST",url:m,data:b,bidRequest:e}}))},interpretResponse:function(e,r){var t=e&&e.body;if(!t)return Object(n.logError)("empty response"),[];var i=t.seatbid.reduce((function(e,r){return e.concat(r.bid)}),[]),a=[];return i.forEach((function(e){var i={requestId:r.bidRequest.bidId,cpm:e.price,width:e.w,height:e.h,ttl:360,creativeId:e.crid||e.adid,netRevenue:!0,currency:e.cur||t.cur,mediaType:c.getMediaType(e)};if(Object(n.deepAccess)(r.bidRequest,"mediaTypes."+i.mediaType))if(i.mediaType===o.b)a.push(u({},i,{ad:e.adm}));else if(i.mediaType===o.d){var d=Object(n.deepAccess)(r.bidRequest,"mediaTypes.video.context");a.push(u({},i,{vastUrl:e.ext.vast_url,vastXml:e.adm,renderer:"outstream"===d?f(r.bidRequest,e):void 0}))}})),a},getUserSyncs:function(e,r,t){var n=[],i=!(!t||"boolean"!=typeof t.gdprApplies)&&t.gdprApplies?"gc="+encodeURIComponent(t.consentString):"gc=missing";return r.forEach((function(e){if(e.body){var r=e.body;r.ext&&Array.isArray(r.ext.utrk)&&r.ext.utrk.forEach((function(e){var r=e.url+(e.url.indexOf("?")>0?"&"+i:"?"+i);return n.push({type:e.type,url:r})})),Array.isArray(r.seatbid)&&r.seatbid.forEach((function(e){Array.isArray(e.bid)&&e.bid.forEach((function(e){e.ext&&Array.isArray(e.ext.utrk)&&e.ext.utrk.forEach((function(e){var r=e.url+(e.url.indexOf("?")>0?"&"+i:"?"+i);return n.push({type:e.type,url:r})}))}))}))}})),n}};function f(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=d.a.install({url:e.params&&e.params.rendererUrl||r.ext&&r.ext.renderer_url||"https://s.wlplayer.com/video/latest/renderer.js",config:t,loaded:!1});try{i.setRender(g)}catch(e){Object(n.logWarn)("Prebid Error calling setRender on renderer",e)}return i}function g(e){e.renderer.push((function(){var r=e.adUnitCode+"/"+e.adId;window.GamoshiPlayer.renderAd({id:r,debug:window.location.href.indexOf("pbjsDebug")>=0,placement:document.getElementById(e.adUnitCode),width:e.width,height:e.height,events:{ALL_ADS_COMPLETED:function(){return window.setTimeout((function(){window.GamoshiPlayer.removeAd(r)}),300)}},vastUrl:e.vastUrl,vastXml:e.vastXml})}))}Object(i.registerBidder)(l),window.pbjs.installedModules.push("cleanmedianetBidAdapter")}},[240]);