pbjsChunk([127],{748:function(e,t,r){e.exports=r(749)},749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"spec",(function(){return j})),t._getHostInfo=z,t._checkParamDataType=P,t._extractPageUrl=k;var a=r(0),n=r(1),i=r(2),o=r(3),s=r(13);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p,c="tappx",u="USD",l="0.1.1005",m="prebidjs",b="[TAPPX]: ",v=["instream","outstream"],f="number",g="string",y="boolean",h="array",O={minduration:f,maxduration:f,startdelay:f,playbackmethod:h,api:h,protocols:h,w:f,h:f,battr:h,linearity:f,placement:f,minbitrate:f,maxbitrate:f,skip:f},j={code:c,gvlid:628,supportedMediaTypes:[i.b,i.d],isBidRequestValid:function(e){return new RegExp("^(vz.*|zz.*)\\.*$","i").test(e.params.host)?new RegExp("^(zz.*)\\.*$","i").test(e.params.host)?w(e):w(e)&&x(e):new RegExp("^(ZZ.*)\\.*$","i").test(e.params.endpoint)?w(e):w(e)&&x(e)},buildRequests:function(e,t){var r=[];return e.forEach((function(e){r.push(function(e,t){var r=z(e),n=r.endpoint;p=r.domain;var i,s=Object(a.deepAccess)(e,"params.tappxkey"),v=Object(a.deepAccess)(e,"params.mktag"),f=Object(a.deepAccess)(e,"params.bidfloor"),g=Object(a.deepAccess)(e,"params.ext"),y=Object(a.deepAccess)(e,"mediaTypes.banner"),h=Object(a.deepAccess)(e,"mediaTypes.video"),j={},w={},x={};if(Object(a.deepAccess)(e,"params.app")){var T={};T.name=Object(a.deepAccess)(e,"params.app.name"),T.bundle=Object(a.deepAccess)(e,"params.app.bundle"),T.domain=Object(a.deepAccess)(e,"params.app.domain"),w.name=Object(a.deepAccess)(e,"params.app.publisher.name"),w.domain=Object(a.deepAccess)(e,"params.app.publisher.domain"),i="".concat(T.name,"_typeAdBanVid_").concat(A()),j.app=T,x[0]=Object(a.deepAccess)(e,"params.api")?Object(a.deepAccess)(e,"params.api"):[3,5]}else{var I=k(e,t),R={};R.name=I,R.domain=I,w.name=I,w.domain=I,i="".concat(R.name,"_typeAdBanVid_").concat(A()),j.site=R}var E,S,C={};if(y){var U={};E=y.sizes[0][0],S=y.sizes[0][1],U.w=E,U.h=S,y.sizes[0].indexOf(480)>=0&&y.sizes[0].indexOf(320)>=0||y.sizes[0].indexOf(768)>=0&&y.sizes[0].indexOf(1024)>=0?U.pos=7:U.pos=4,U.api=x;var _={0:{}};_[0].w=E,_[0].h=S,U.format=_,C.banner=U}if(void 0!==h){var W={},B=Object(a.deepAccess)(e,"params.video");if(void 0!==B)for(var D in O)B.hasOwnProperty(D)&&(W[D]=P(D,B[D],O[D]));(void 0===W.w||null==W.w||W.w<=0||void 0===W.h||null==W.h||W.h<=0)&&(E=h.playerSize[0][0],S=h.playerSize[0][1],W.w=E,W.h=S),W.mimes=h.mimes;var $={};void 0!==h.rewarded&&1==h.rewarded&&($.rewarded=h.rewarded),W.ext=$,C.video=W}if(C.id=e.bidId,C.tagid=i,C.secure=1,C.bidfloor=Object(a.deepAccess)(e,"params.bidfloor"),Object(a.isFn)(e.getFloor))try{var N=e.getFloor({currency:u,mediaType:"*",size:"*"});Object(a.isPlainObject)(N)&&!isNaN(N.floor)&&"USD"===N.currency?C.bidfloor=N.floor:Object(a.logWarn)(b,"Currency not valid. Use only USD with Tappx.")}catch(t){Object(a.logWarn)(b,t),C.bidfloor=Object(a.deepAccess)(e,"params.bidfloor")}var V={};V.endpoint=n,V.host=r.url,V.bidfloor=f,V.ext="object"==d(g)?g:void 0,C.ext={},C.ext.bidder=V;var q={};q.os=A(),q.ip="peer",q.ua=navigator.userAgent,q.ifa=e.ifa,q.h=screen.height,q.w=screen.width,q.dnt=Object(a.getDNT)()?1:0,q.language=(F=navigator.language?"language":"userLanguage",navigator[F].split("-")[0]),q.make=navigator.vendor?navigator.vendor:"",Object(a.deepAccess)(e,"params.geo.country");var F;var H={ext:{}},M=Object(a.deepAccess)(e,"userIdAsEids");void 0!==M&&(M=M.filter((function(e){return null!=e&&"string"==typeof e.source&&null!==e.source&&"string"==typeof e.uids[0].id&&null!==e.uids[0].id})),void 0!==H&&(H.ext.eids=M));var X={gdpr:0};null==t.gdprConsent||("boolean"==typeof t.gdprConsent.gdprApplies&&(X.gdpr=t.gdprConsent.gdprApplies),X.gdpr&&(H.ext.consent=t.gdprConsent.consentString));X.ext={},null==t.uspConsent||(X.ext.us_privacy=t.uspConsent);!0===o.b.getConfig("coppa")&&(X.coppa=!0===o.b.getConfig("coppa")?1:0);var Z={bidder:{}};Z.bidder.tappxkey=s,Z.bidder.mktag=v,Z.bidder.bcid=Object(a.deepAccess)(e,"params.bcid"),Z.bidder.bcrid=Object(a.deepAccess)(e,"params.bcrid"),Z.bidder.ext="object"==d(g)?g:{},void 0!==h&&(Z.bidder.ext.pbvidtype=h.context);j.id=e.auctionId,j.test=Object(a.deepAccess)(e,"params.test")?1:0,j.at=1,j.tmax=t.timeout?t.timeout:600,j.bidder=c,j.imp=[C],j.user=H,j.ext=Z,j.device=q,j.regs=X;var J=null!==pbjs.version?encodeURIComponent(pbjs.version):-1;return{method:"POST",url:"".concat(r.url,"?type_cnn=").concat(m,"&v=").concat(l,"&pbjsv=").concat(J),data:JSON.stringify(j),bids:e}}(e,t))})),r},interpretResponse:function(e,t){var r=e.body;if(!e.body)return Object(a.logWarn)(b,"Empty response body HTTP 204, no bids"),[];var n=[];return r.seatbid.forEach((function(e){e.bid.forEach((function(e){n.push(function(e,t){var r={requestId:t.bids.bidId,cpm:e.price,currency:e.cur?e.cur:u,width:e.w,height:e.h,ttl:360,creativeId:e.crid,netRevenue:!0};void 0!==e.dealId&&(r.dealId=e.dealId);void 0!==e.lurl&&(r.lurl=e.lurl);void 0!==e.nurl&&(r.nurl=e.nurl);void 0!==e.burl&&(r.burl=e.burl);if(void 0!==t.bids.mediaTypes&&void 0!==t.bids.mediaTypes.video){if(r.vastXml=e.adm,r.vastUrl=e.lurl,r.ad=e.adm,r.mediaType=i.d,r.width=e.w,r.height=e.h,"outstream"===t.bids.mediaTypes.video.context){var n=!!e.ext.purl&&e.ext.purl;if(void 0===n)return Object(a.logWarn)(b,"Error getting player outstream from tappx"),!1;r.renderer=function(e,t,r){var n=s.a.install({id:t.id,url:r,loaded:!1});try{n.setRender(T)}catch(e){Object(a.logWarn)(b,"Prebid Error calling setRender on renderer")}return n}(0,t,n)}}else r.ad=e.adm,r.mediaType=i.b;void 0===r.adomain&&null===r.adomain||(r.meta={advertiserDomains:t.bids.adomain});return r}(e,t))}))})),n},getUserSyncs:function(e,t,r,a){var n="https://".concat(p,"/cs/usersync.php?");return r&&(n+="&gdpr_optin="+(r.gdprApplies?1:0),n+="&gdpr_consent="+encodeURIComponent(r.consentString||"")),a&&(n+="&us_privacy="+encodeURIComponent(a)),e.iframeEnabled?[{type:"iframe",url:n+="&type=iframe"}]:[{type:"image",url:n+="&type=img"}]}};function w(e){if(null==e.params)return Object(a.logWarn)(b,"Please review the mandatory Tappx parameters."),!1;if(null==e.params.tappxkey)return Object(a.logWarn)(b,"Please review the mandatory Tappxkey parameter."),!1;if(null==e.params.host)return Object(a.logWarn)(b,"Please review the mandatory Host parameter."),!1;var t=!0;return new RegExp("^(vz.*|zz.*)\\.*$","i").test(e.params.host)&&(t=!1),!t||null!=e.params.endpoint||(Object(a.logWarn)(b,"Please review the mandatory endpoint Tappx parameters."),!1)}function x(e){var t=Object(a.deepAccess)(e,"mediaTypes.video");return void 0===t||-1!==v.indexOf(t.context)||(Object(a.logWarn)(b,"Please review the mandatory Tappx parameters for Video. Video context not supported."),!1)}function A(){var e=navigator.userAgent;return null==e?"unknown":e.match(/(iPhone|iPod|iPad)/)?"ios":e.match(/Android/)?"android":e.match(/Window/)?"windows":"unknown"}function z(e){var t={},r=Object(a.deepAccess)(e,"params.endpoint"),n=Object(a.deepAccess)(e,"params.host");t.domain=n.split("/",1)[0];var i=new RegExp("^(vz.*|zz.*)\\.[a-z]{3}\\.tappx\\.com$","i"),o=new RegExp("^([a-z]{3}|testing)\\.[a-z]{3}\\.tappx\\.com$","i");return i.test(t.domain)?(t.newEndpoint=!0,t.endpoint=t.domain.split(".",1)[0],t.url="https://".concat(n)):o.test(t.domain)&&(t.newEndpoint=!1,t.endpoint=r,t.url="https://".concat(n).concat(r)),t}function T(e,t){var r={};(r=void 0!==e.params[0].video?e.params[0].video:{}).content=e.vastXml,e.renderer.push((function(){window.tappxOutstream.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:r})}))}function P(e,t,r){var n,i="Ignoring param key: "+e+", expects "+r+", found "+d(t);switch(r){case y:n=a.isBoolean;break;case f:n=a.isNumber;break;case g:n=a.isStr;break;case h:n=a.isArray}if(n(t))return t;Object(a.logWarn)(b,i)}function k(e,t){var r=Object(a.deepAccess)(t,"refererInfo.referer"),n=Object(a.deepAccess)(t,"refererInfo.canonicalUrl")||Object(a.deepAccess)(window,"location.href"),i=Object(a.deepAccess)(e,"params.domainUrl")||o.b.getConfig("pageUrl"),s=r||n||i;try{s=s.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/gim)[0].replace(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?/gim,"")}catch(e){s=void 0}return s}Object(n.registerBidder)(j),window.pbjs.installedModules.push("tappxBidAdapter")}},[748]);