pbjsChunk([312],{272:function(e,r,t){e.exports=t(273)},273:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",(function(){return o}));var n=t(0),a=t(1),d=t(2),i=t(3);function s(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var o={code:"cpmstar",supportedMediaTypes:[d.b,d.d],pageID:Math.floor(1e7*Math.random()),getMediaType:function(e){return null==e?d.b:Object(n.deepAccess)(e,"mediaTypes.video")?d.d:d.b},getPlayerSize:function(e){var r=Object(n.deepAccess)(e,"mediaTypes.video.playerSize");return null==r?[640,440]:(null!=r[0]&&(r=r[0]),null==r||null==r[0]||null==r[1]?[640,440]:r)},isBidRequestValid:function(e){return"string"==typeof e.params.placementId&&!!e.params.placementId.length||"number"==typeof e.params.placementId},buildRequests:function(e,r){for(var t=[],a=0;a<e.length;a++){var p=e[a],c=encodeURIComponent(r.refererInfo.referer),l=Object(n.getBidIdParameter)("endpoint",p.params),u="dev"==l?"https://dev.server.cpmstar.com/view.aspx":"staging"==l?"https://staging.server.cpmstar.com/view.aspx":"https://server.cpmstar.com/view.aspx",m=o.getMediaType(p),g=o.getPlayerSize(p),v="&fv=0"+(g?"&w="+g[0]+"&h="+g[1]:""),h=u+"?media="+m+(m==d.d?v:"")+"&json=c_b&mv=1&poolid="+Object(n.getBidIdParameter)("placementId",p.params)+"&reachedTop="+encodeURIComponent(r.refererInfo.reachedTop)+"&requestid="+p.bidId+"&referer="+encodeURIComponent(c);if(p.schain&&p.schain.nodes){var f=p.schain,b="";b+=f.ver+","+f.complete;for(var y=0;y<f.nodes.length;y++){var I=f.nodes[y];b+="!"+s(I.asi||"")+","+s(I.sid||"")+","+s(I.hp||"")+","+s(I.rid||"")+","+s(I.name||"")+","+s(I.domain||"")}h+="&schain="+b}r.gdprConsent&&(null!=r.gdprConsent.consentString&&(h+="&gdpr_consent="+r.gdprConsent.consentString),null!=r.gdprConsent.gdprApplies&&(h+="&gdpr="+(r.gdprConsent.gdprApplies?1:0))),null!=r.uspConsent&&(h+="&us_privacy="+r.uspConsent),i.b.getConfig("coppa")&&(h+="&tfcd="+(i.b.getConfig("coppa")?1:0)),t.push({method:"GET",url:h,bidRequest:p})}return t},interpretResponse:function(e,r){var t=r.bidRequest,a=o.getMediaType(t),i=[];Array.isArray(e.body)||(e.body=[e.body]);for(var s=0;s<e.body.length;s++){var p=e.body[s].creatives[0];if(!p)return void Object(n.logWarn)("cpmstarBidAdapter: server response failed check");var c=parseFloat(p.cpm)||0;if(!c)return void Object(n.logWarn)("cpmstarBidAdapter: server response failed check. Missing cpm");var l={requestId:p.requestid,cpm:c,width:p.width||0,height:p.height||0,currency:p.currency?p.currency:"USD",netRevenue:!p.netRevenue||p.netRevenue,ttl:p.ttl?p.ttl:300,creativeId:p.creativeid||0,meta:{advertiserDomains:p.adomain?p.adomain:[]}};if(p.hasOwnProperty("dealId")&&(l.dealId=p.dealId),a==d.b&&p.code)l.ad=p.code+(p.px_cr?"\n<img width=0 height=0 src='"+p.px_cr+"' />":"");else{if(a!=d.d||!p.creativemacros||!p.creativemacros.HTML5VID_VASTSTRING)return Object(n.logError)("bad response",p);var u=o.getPlayerSize(t);null!=u&&(l.width=u[0],l.height=u[1]),l.mediaType=d.d,l.vastXml=p.creativemacros.HTML5VID_VASTSTRING}i.push(l)}return i},getUserSyncs:function(e,r){var t=[];if(0==r.length||!r[0].body)return t;var n=r[0].body[0].syncs;if(!n||n.length<0)return t;for(var a=0;a<n.length;a++){var d=n[a];("image"===d.type&&e.pixelEnabled||"iframe"==d.type&&e.iframeEnabled)&&t.push(d)}return t}};Object(a.registerBidder)(o),window.pbjs.installedModules.push("cpmstarBidAdapter")}},[272]);