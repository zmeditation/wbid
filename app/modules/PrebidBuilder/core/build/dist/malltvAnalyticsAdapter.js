pbjsChunk([51],{497:function(e,n,t){e.exports=t(498)},498:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"ANALYTICS_VERSION",(function(){return d})),t.d(n,"DEFAULT_SERVER",(function(){return l})),t.d(n,"BIDDER_STATUS",(function(){return T})),t.d(n,"getCpmInEur",(function(){return v})),t.d(n,"parseBidderCode",(function(){return h})),t.d(n,"parseAdUnitCode",(function(){return b})),t.d(n,"malltvAnalyticsAdapter",(function(){return A}));var r=t(4),i=t(6),o=t(5),a=t.n(o),c=t(9),u=t(14),s=t(0);function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var d="1.0.0",l="https://central.mall.tv/analytics",f=a.a.EVENTS,y=f.AUCTION_END,g=f.BID_TIMEOUT,T={BID:1,NO_BID:2,BID_WON:3,TIMEOUT:4},v=function(e){return"EUR"!==e.currency&&"function"==typeof e.getCpmInNewCurrency?e.getCpmInNewCurrency("EUR"):e.cpm},E={},h=function(e){return(e.bidderCode||e.bidder).toLowerCase()},b=function(e){return e.adUnitCode.toLowerCase()},A=p(Object(i.a)({DEFAULT_SERVER:l,analyticsType:"endpoint"}),{cachedAuctions:{},initConfig:function(e){return E.options=Object(s.deepClone)(e.options),"string"!=typeof e.options.propertyId||e.options.propertyId.length<1?(Object(s.logError)('"options.propertyId" is required.'),!1):(E.propertyId=e.options.propertyId,E.server=e.options.server||l,!0)},track:function(e){var n=e.eventType,t=e.args;switch(n){case g:this.handleBidTimeout(t);break;case y:this.handleAuctionEnd(t)}},handleBidTimeout:function(e){var n=this;e.forEach((function(e){n.getCachedAuction(e.auctionId).timeoutBids.push(e)}))},handleAuctionEnd:function(e){var n=this.getCachedAuction(e.auctionId),t=Object(u.a)().getHighestCpmBids();this.sendEventMessage("end",this.createBidMessage(e,t,n.timeoutBids))},createBidMessage:function(e,n,t){var r=this,i=e.auctionId,o=e.timestamp,a=e.timeout,c=e.auctionEnd,u=e.adUnitCodes,s=e.bidsReceived,p=e.noBids,d=this.createCommonMessage(i);return d.auctionElapsed=c-o,d.timeout=a,u.forEach((function(e){d.adUnits[e]={}})),p.forEach((function(e){return r.addBidResponseToMessage(d,e,T.NO_BID)})),s.forEach((function(e){return r.addBidResponseToMessage(d,e,T.BID)})),t.forEach((function(e){return r.addBidResponseToMessage(d,e,T.TIMEOUT)})),n.forEach((function(e){var n=b(e),t=h(e);d.adUnits[n][t].prebidWon=!0})),d},createCommonMessage:function(e){return{analyticsVersion:d,auctionId:e,propertyId:E.propertyId,referrer:window.location.href,prebidVersion:"6.10.0-pre",adUnits:{}}},addBidResponseToMessage:function(e,n,t){var r=b(n);e.adUnits[r]=e.adUnits[r]||{};var i=h(n),o=this.serializeBidResponse(n,t);e.adUnits[r][i]=o},serializeBidResponse:function(e,n){var t={prebidWon:n===T.BID_WON,isTimeout:n===T.TIMEOUT,status:n};return n!==T.BID&&n!==T.BID_WON||p(t,{time:e.timeToRespond,cpm:e.cpm,currency:e.currency,originalCpm:e.originalCpm||e.cpm,cpmEur:v(e),originalCurrency:e.originalCurrency||e.currency,vastUrl:e.vastUrl}),t},sendEventMessage:function(e,n){Object(s.logInfo)("AJAX: ".concat(e,": ")+JSON.stringify(n)),Object(r.a)("".concat(E.server,"/").concat(e),null,JSON.stringify(n),{contentType:"application/json"})},getCachedAuction:function(e){return this.cachedAuctions[e]=this.cachedAuctions[e]||{timeoutBids:[]},this.cachedAuctions[e]},getAnalyticsOptions:function(){return E}});A.originEnableAnalytics=A.enableAnalytics,A.enableAnalytics=function(e){this.initConfig(e)&&A.originEnableAnalytics(e)},c.default.registerAnalyticsAdapter({adapter:A,code:"malltvAnalytics"}),window.pbjs.installedModules.push("malltvAnalyticsAdapter")},6:function(e,n,t){"use strict";n.a=function(e){var n,t=e.url,r=e.analyticsType,i=e.global,p=e.handler,C=[],U=0,N=!0;(function(){if(N){for(var e=0;e<C.length;e++)C[e]();C.push=function(e){e()},N=!1}Object(a.logMessage)("event count sent to ".concat(i,": ").concat(U))})();return{track:function(e){var n=e.eventType,t=e.args;this.getAdapterType()===B&&window[i](p,n,t);this.getAdapterType()===_&&R.apply(void 0,arguments)},enqueue:S,enableAnalytics:j,disableAnalytics:function(){Object(a._each)(n,(function(e,n){s.off(n,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:j},getAdapterType:function(){return r},getGlobal:function(){return i},getHandler:function(){return p},getUrl:function(){return t}};function R(e){var n=e.eventType,r=e.args,i=e.callback;Object(o.a)(t,i,JSON.stringify({eventType:n,args:r}))}function S(e){var n=e.eventType,t=e.args,r=this;i&&window[i]&&n&&t?this.track({eventType:n,args:t}):C.push((function(){U++,r.track({eventType:n,args:t})}))}function j(e){var t,r=this,o=this;"object"!==u(e)||"object"!==u(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))?(s.getEvents().forEach((function(e){if(e){var n=e.eventType,t=e.args;n!==g&&S.call(o,{eventType:n,args:t})}})),c(t={},f,(function(e){return r.enqueue({eventType:f,args:e})})),c(t,y,(function(e){return r.enqueue({eventType:y,args:e})})),c(t,T,(function(e){return r.enqueue({eventType:T,args:e})})),c(t,v,(function(e){return r.enqueue({eventType:v,args:e})})),c(t,g,(function(e){return r.enqueue({eventType:g,args:e})})),c(t,E,(function(e){return r.enqueue({eventType:E,args:e})})),c(t,h,(function(e){return r.enqueue({eventType:h,args:e})})),c(t,b,(function(e){return r.enqueue({eventType:b,args:e})})),c(t,A,(function(e){return r.enqueue({eventType:A,args:e})})),c(t,l,(function(e){return r.enqueue({eventType:l,args:e})})),c(t,I,(function(e){return r.enqueue({eventType:I,args:e})})),c(t,m,(function(e){return r.enqueue({eventType:m,args:e})})),c(t,O,(function(e){return r.enqueue({eventType:O,args:e})})),c(t,D,(function(e){return r.enqueue({eventType:D,args:e})})),c(t,d,(function(n){n.config="object"===u(e)&&e.options||{},r.enqueue({eventType:d,args:n})})),n=t,Object(a._each)(n,(function(e,n){s.on(n,e)}))):Object(a.logMessage)('Analytics adapter for "'.concat(i,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Object(a.logMessage)('Analytics adapter for "'.concat(i,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var r=t(5),i=t.n(r),o=t(4),a=t(0);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=t(10),p=i.a.EVENTS,d=p.AUCTION_INIT,l=p.AUCTION_END,f=p.REQUEST_BIDS,y=p.BID_REQUESTED,g=p.BID_TIMEOUT,T=p.BID_RESPONSE,v=p.NO_BID,E=p.BID_WON,h=p.BID_ADJUSTMENT,b=p.BIDDER_DONE,A=p.SET_TARGETING,I=p.AD_RENDER_FAILED,m=p.AD_RENDER_SUCCEEDED,O=p.AUCTION_DEBUG,D=p.ADD_AD_UNITS,_="endpoint",B="bundle"}},[497]);