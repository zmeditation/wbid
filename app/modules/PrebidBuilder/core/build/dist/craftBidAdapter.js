pbjsChunk([311],{274:function(e,r,t){e.exports=t(275)},275:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",(function(){return g}));var n=t(0),a=t(1),o=t(2),i=t(16),s=t(11),d=t.n(s),c=t(12),u=t.n(c),p=t(7),f=t(4);function l(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return y(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var b="https://gacraft.jp/prebid-v3",m=Object(p.b)(),g={code:"craft",aliases:["craft"],supportedMediaTypes:[o.b],isBidRequestValid:function(e){return!!e.params.sitekey&&!!e.params.placementId&&!function(){try{var e=window.context||window.parent.context;return!(!e||!e.pageViewId)&&e}catch(e){return!1}}()},buildRequests:function(e,r){var t=e.map(_),a=e[0].schain,o={tags:l(t),ua:navigator.userAgent,sdk:{version:"6.10.0-pre"},schain:a};if(r&&r.gdprConsent&&(o.gdpr_consent={consent_string:r.gdprConsent.consentString,consent_required:r.gdprConsent.gdprApplies}),r&&r.uspConsent&&(o.us_privacy=r.uspConsent),r&&r.refererInfo){var i={rd_ref:r.refererInfo.referer,rd_top:r.refererInfo.reachedTop,rd_ifs:r.refererInfo.numIframes};r.refererInfo.stack&&(i.rd_stk=r.refererInfo.stack.join(",")),o.referrer_detection=i}return function(e,r){var t={};(function(e){var r=!0;e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion&&(r=!(!0!==Object(n.deepAccess)(e.gdprConsent,"vendorData.purpose.consents.1")));return r})(r)||(t={withCredentials:!1});var a=JSON.stringify(e);return{method:"POST",url:"".concat(b,"/").concat(e.tags[0].sitekey),data:a,bidderRequest:r,options:t}}(o,r)},interpretResponse:function(e,r){var t=this,a=r.bidderRequest;try{e=e.body;var i=[];if(!e)return[];if(e.error){var s="in response for ".concat(a.bidderCode," adapter");return e.error&&(s+=": ".concat(e.error)),Object(n.logError)(s),i}return e.tags&&e.tags.forEach((function(e){var r,s=(r=e)&&r.ads&&r.ads.length&&d()(r.ads,(function(e){return e.rtb}));if(s&&0!==s.cpm&&u()(t.supportedMediaTypes,s.ad_type)){var c=function(e,r,t){var a=Object(n.getBidRequest)(e.uuid,[t]);return{requestId:e.uuid,cpm:r.cpm,currency:"JPY",width:r.rtb.banner.width,height:r.rtb.banner.height,ad:r.rtb.banner.content,ttl:360,creativeId:r.creative_id,netRevenue:!1,dealId:r.deal_id,meta:null,_adUnitCode:a.adUnitCode,_bidKey:e.bid_key,_prebidWon:e.won_url}}(e,s,a);c.mediaType=function(e){var r=e.ad_type;return r===o.d?o.d:r===o.c?o.c:o.b}(s),i.push(c)}})),i}catch(e){return[]}},transformBidParams:function(e,r){return e=Object(n.convertTypes)({sitekey:"string",placementId:"string",keywords:n.transformBidderParamKeywords},e),r&&(v(e.keywords)&&e.keywords.forEach(h),Object.keys(e).forEach((function(r){var t=Object(n.convertCamelToUnderscore)(r);t!==r&&(e[t]=e[r],delete e[r])}))),e},onBidWon:function(e){Object(f.a)(e._prebidWon,null,null,{method:"POST",contentType:"application/json"})}};function v(e){return!!(Object(n.isArray)(e)&&e.length>0)}function h(e){v(e.value)&&""===e.value[0]&&delete e.value}function _(e){var r={};for(var t in e.params)r[t]=e.params[t];try{m.hasLocalStorage()&&(r.uid=JSON.parse(m.getDataFromLocalStorage("".concat(e.params.sitekey,"_uid"))))}catch(e){}if(r.sizes=e.sizes,r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=e.bidId,!Object(n.isEmpty)(e.params.keywords)){var a=Object(n.transformBidderParamKeywords)(e.params.keywords);a.length>0&&a.forEach(h),r.keywords=a}var s=d()(i.a.getAdUnits(),(function(r){return e.transactionId===r.transactionId}));return s&&s.mediaTypes&&s.mediaTypes.banner&&r.ad_types.push(o.b),0===r.ad_types.length&&delete r.ad_types,r}Object(a.registerBidder)(g),window.pbjs.installedModules.push("craftBidAdapter")}},[274]);