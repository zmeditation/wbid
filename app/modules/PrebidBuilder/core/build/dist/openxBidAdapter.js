pbjsChunk([188],{569:function(e,t,n){e.exports=n(570)},570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"USER_ID_CODE_TO_QUERY_ARG",(function(){return b})),n.d(t,"spec",(function(){return f}));var r=n(0),a=n(3),i=n(1),o=n(2),d=n(12),c=n.n(d);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,d=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){d=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(d)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=[o.b,o.d],l=["startdelay","mimes","minduration","maxduration","startdelay","skippable","playbackmethod","api","protocols","boxingallowed","linearity","delivery","protocol","placement","minbitrate","maxbitrate"],b={britepoolid:"britepoolid",criteoId:"criteoid",fabrickId:"nuestarid",haloId:"audigentid",id5id:"id5id",idl_env:"lre",IDP:"zeotapid",idxId:"idxid",intentIqId:"intentiqid",lipb:"lipbid",lotamePanoramaId:"lotameid",merkleId:"merkleid",netId:"netid",parrableId:"parrableid",pubcid:"pubcid",quantcastId:"quantcastid",tapadId:"tapadid",tdid:"ttduuid",uid2:"uid2",flocId:"floc",admixerId:"admixerid",deepintentId:"deepintentid",dmdId:"dmdid",nextrollId:"nextrollid",novatiq:"novatiqid",mwOpenLinkId:"mwopenlinkid",dapId:"dapid",amxId:"amxid",kpuid:"kpuid",publinkId:"publinkid",naveggId:"naveggid",imuid:"imuid",adtelligentId:"adtelligentid"},f={code:"openx",gvlid:69,supportedMediaTypes:m,isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return Object(r.deepAccess)(e,"mediaTypes.banner")&&t?!!e.params.unit||Object(r.deepAccess)(e,"mediaTypes.banner.sizes.length")>0:!(!e.params.unit||!t)},buildRequests:function(e,t){if(0===e.length)return[];var n=[],i=u(function(e){return e.reduce((function(e,t){var n;return n=t,Object(r.deepAccess)(n,"mediaTypes.video")&&!Object(r.deepAccess)(n,"mediaTypes.banner")||n.mediaType===o.d?e[0].push(t):e[1].push(t),e}),[[],[]])}(e),2),d=i[0],s=i[1];return s.length>0&&n.push(function(e,t){var n=[],i=!1,d=v(e,t),c=Object(r._map)(e,(function(e){return e.params.unit}));d.aus=Object(r._map)(e,(function(e){return Object(r.parseSizesInput)(e.mediaTypes.banner.sizes).join(",")})).join("|"),d.divids=Object(r._map)(e,(function(e){return encodeURIComponent(e.adUnitCode)})).join(","),d.aucs=Object(r._map)(e,(function(e){var t=Object(r.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");return encodeURIComponent(t||"")})).join(","),c.some((function(e){return e}))&&(d.auid=c.join(","));e.some((function(e){return e.params.doNotTrack}))&&(d.ns=1);(!0===a.b.getConfig("coppa")||e.some((function(e){return e.params.coppa})))&&(d.tfcd=1);e.forEach((function(e){if(e.params.customParams){var t=Object(r._map)(Object.keys(e.params.customParams),(function(t){return function(e,t){var n=t[e];Object(r.isArray)(n)&&(n=n.join(","));return(e.toLowerCase()+"="+n.toLowerCase()).replace("+",".").replace("/","_")}(t,e.params.customParams)})),a=window.btoa(t.join("&"));i=!0,n.push(a)}else n.push("")})),i&&(d.tps=n.join(","));return g(d,o.b,e),{method:"GET",url:d.ph?"https://u.openx.net/w/1.0/arj":"https://".concat(e[0].params.delDomain,"/w/1.0/arj"),data:d,payload:{bids:e,startTime:new Date}}}(s,t)),d.length>0&&d.forEach((function(e){n.push(function(e,t){var n=function(e,t){var n,a,i=Object(r.deepAccess)(e,"mediaTypes.video"),d=v([e],t),s=Object(r.deepAccess)(e,"params.video")||{},u=Object(r.deepAccess)(e,"mediaTypes.video.context"),p=Object(r.deepAccess)(e,"mediaTypes.video.playerSize");Object(r.isArray)(e.sizes)&&2===e.sizes.length&&!Object(r.isArray)(e.sizes[0])?(n=parseInt(e.sizes[0],10),a=parseInt(e.sizes[1],10)):Object(r.isArray)(e.sizes)&&Object(r.isArray)(e.sizes[0])&&2===e.sizes[0].length?(n=parseInt(e.sizes[0][0],10),a=parseInt(e.sizes[0][1],10)):Object(r.isArray)(p)&&2===p.length&&(n=parseInt(p[0],10),a=parseInt(p[1],10));var m={w:n,h:a},b=e.params.video||e.params.openrtb||{};b.openrtb&&(b=b.openrtb);Object(r.isArray)(b.imp)&&(b=b.imp[0].video);Object.keys(b).filter((function(e){return c()(l,e)})).forEach((function(e){return m[e]=b[e]})),Object.keys(i).filter((function(e){return c()(l,e)})).forEach((function(e){return m[e]=i[e]}));var f={imp:[{video:m}]};d.openrtb=JSON.stringify(f),d.auid=e.params.unit,d.vwd=n||s.vwd,d.vht=a||s.vht,"outstream"===u&&(d.vos="101");s.mimes&&(d.vmimes=s.mimes);e.params.test&&(d.vtest=1);var h=Object(r.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");h&&(d.aucs=encodeURIComponent(h));return g(d,o.d,[e]),d}(e,t);return{method:"GET",url:n.ph?"https://u.openx.net/v/1.0/avjp":"https://".concat(e.params.delDomain,"/v/1.0/avjp"),data:n,payload:{bid:e,startTime:new Date}}}(e,t))})),n},interpretResponse:function(e,t){var n=e.body;return function(e){return/avjp$/.test(e.url)?o.d:o.b}(t)===o.d?function(e,t){var n=t.bid,a=(t.startTime,[]);if(void 0!==e&&""!==e.vastUrl&&e.pub_rev>0){var i=Object(r.parseUrl)(e.vastUrl).search||{},d={};d.requestId=n.bidId,e.deal_id&&(d.dealId=e.deal_id),d.ttl=300,d.netRevenue=!0,d.currency=e.currency,d.cpm=parseInt(e.pub_rev,10)/1e3,d.width=parseInt(e.width,10),d.height=parseInt(e.height,10),d.creativeId=e.adid,d.vastUrl=e.vastUrl,d.mediaType=o.d,e.ph=i.ph,e.colo=i.colo,e.ts=i.ts,a.push(d)}return a}(n,t.payload):function(e,t){for(var n=t.bids,r=(t.startTime,e.ads.ad),a=[],i=0;i<r.length;i++){var o=r[i],d=parseInt(o.idx,10),c={};if(c.requestId=n[d].bidId,o.pub_rev){c.cpm=Number(o.pub_rev)/1e3;var s=o.creative[0];s&&(c.width=s.width,c.height=s.height),c.creativeId=s.id,c.ad=o.html,o.deal_id&&(c.dealId=o.deal_id),c.ttl=300,c.netRevenue=!0,c.currency=o.currency,o.tbd&&(c.tbd=o.tbd),c.ts=o.ts,c.meta={},o.brand_id&&(c.meta.brandId=o.brand_id),o.adomain&&length(o.adomain)>0?c.meta.advertiserDomains=o.adomain:c.meta.advertiserDomains=[],o.adv_id&&(c.meta.dspid=o.adv_id),a.push(c)}}return a}(n,t.payload)},getUserSyncs:function(e,t,n,a){if(e.iframeEnabled||e.pixelEnabled)return[{type:e.iframeEnabled?"iframe":"image",url:Object(r.deepAccess)(t,"0.body.ads.pixels")||Object(r.deepAccess)(t,"0.body.pixels")||function(e,t){var n="https://u.openx.net/w/1.0/pd",r=[];e&&(r.push("gdpr="+(e.gdprApplies?1:0)),r.push("gdpr_consent="+encodeURIComponent(e.consentString||"")));t&&r.push("us_privacy="+encodeURIComponent(t));return"".concat(n).concat(r.length>0?"?"+r.join("&"):"")}(n,a)}]},transformBidParams:function(e,t){return Object(r.convertTypes)({unit:"string",customFloor:"number"},e)}};function h(e){var t,n,r,a=window,i=document,o=i.documentElement;if(e){try{a=window.top,i=window.top.document}catch(e){return}o=i.documentElement,r=i.body,t=a.innerWidth||o.clientWidth||r.clientWidth,n=a.innerHeight||o.clientHeight||r.clientHeight}else o=i.documentElement,t=a.innerWidth||o.clientWidth,n=a.innerHeight||o.clientHeight;return"".concat(t,"x").concat(n)}function v(e,t){var n,i=Object(r.inIframe)();n={ju:a.b.getConfig("pageUrl")||t.refererInfo.referer,ch:document.charSet||document.characterSet,res:"".concat(screen.width,"x").concat(screen.height,"x").concat(screen.colorDepth),ifr:i,tz:(new Date).getTimezoneOffset(),tws:h(i),be:1,bc:e[0].params.bc||"".concat("hb_pb","_").concat("3.0.3"),dddid:Object(r._map)(e,(function(e){return e.transactionId})).join(","),nocache:(new Date).getTime()};var o=y("ortb2.user.data");o.length>0&&(n.sm=o);var d,c,s,u,p,m=y("ortb2.site.content.data");if(m.length>0&&(n.scsm=m),e[0].params.platform&&(n.ph=e[0].params.platform),t.gdprConsent){var l=t.gdprConsent;void 0!==l.consentString&&(n.gdpr_consent=l.consentString),void 0!==l.gdprApplies&&(n.gdpr=l.gdprApplies?1:0),"iab"===a.b.getConfig("consentManagement.cmpApi")&&(n.x_gdpr_f=1)}return t&&t.uspConsent&&(n.us_privacy=t.uspConsent),Object(r.deepAccess)(e[0],"crumbs.pubcid")&&Object(r.deepSetValue)(e[0],"userId.pubcid",Object(r.deepAccess)(e[0],"crumbs.pubcid")),d=n,c=e[0].userId,Object(r._each)(c,(function(e,t){var n=b[t];if(b.hasOwnProperty(t))switch(t){case"merkleId":case"flocId":case"uid2":d[n]=e.id;break;case"lipb":if(d[n]=e.lipbid,Array.isArray(e.segments)&&e.segments.length>0){var r="liveintent:"+e.segments.join("|");d.sm="".concat(d.sm?d.sm+",":"").concat(r)}break;case"parrableId":d[n]=e.eid;break;case"id5id":d[n]=e.uid;break;case"novatiq":d[n]=e.snowflake;break;default:d[n]=e}})),n=d,e[0].schain&&(n.schain=(s=e[0].schain,"".concat(s.ver,",").concat(s.complete,"!").concat((u=s.nodes,p=["asi","sid","hp","rid","name","domain"],u.map((function(e){return p.map((function(t){return e[t]||""})).join(",")})).join("!"))))),n}function y(e){var t=a.b.getConfig(e);if(!Array.isArray(t)||!t.length)return"";var n=t.filter((function(e){return Array.isArray(e.segment)&&e.segment.length>0&&void 0!==e.name&&e.name.length>0})).reduce((function(e,t){var n="object"===s(t.ext)&&t.ext.segtax?"".concat(t.name,"/").concat(t.ext.segtax):t.name;return e[n]=(e[n]||[]).concat(t.segment.map((function(e){return e.id}))),e}),{});return Object.keys(n).map((function(e,t){return e+":"+n[e].join("|")})).join(",")}function g(e,t,n){var r=[],i=!1;n.forEach((function(e){var n=function(e,t){var n={},r=a.b.getConfig("currency.adServerCurrency")||"USD";"function"==typeof e.getFloor&&(n=e.getFloor({currency:r,mediaType:t,size:"*"}));var i=n.floor||e.params.customFloor||0;return Math.round(1e3*i)}(e,t);n?(r.push(n),i=!0):r.push(0)})),i&&(e.aumfs=r.join(","))}Object(i.registerBidder)(f),window.pbjs.installedModules.push("openxBidAdapter")}},[569]);