pbjsChunk([60],{396:function(e,n,t){e.exports=t(397)},397:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(6),a=t(5),o=t.n(a),i=t(9),s=t(4),c=t(0),u=t(10),l=t.n(u);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function y(){return(y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var v=o.a.EVENTS,g=v.AUCTION_END,b=v.TCF2_ENFORCEMENT,T=v.BID_WON,E=v.BID_VIEWABLE,m=v.AD_RENDER_FAILED,h=[g,b,T],A=[b,g,T,E,m],O=(new Date).getTimezoneOffset(),I=pbjs.version,D=Array.isArray,_=y(Object(r.a)({analyticsType:"endpoint"}),{eventBuffer:{},eventsToTrack:h,track:function(e){var n=_;if(e&&e.args)try{var t=e.args.auctionId;n.eventBuffer[t]=n.eventBuffer[t]||[];var r=n.eventBuffer[t];r.push(n.makeEvent(e.eventType,e.args)),A.indexOf(e.eventType)>=0&&(n.sendEvents(r),r.push=function(e){return n.sendEvents([e])})}catch(e){Object(c.logError)("id5Analytics: ERROR",e),n.sendErrorEvent(e)}},sendEvents:function(e){var n=_;e.forEach((function(e){return Object(s.a)(n.options.ingestUrl,null,JSON.stringify(e))}))},makeEvent:function(e,n){var t,r=_;return{source:"pbjs",event:e,payload:S(n,(t=k[e]||[],function(e,n,r){for(var a=0;a<t.length;a++){var o=!0,i=t[a].match,s=t[a].apply;if(i.length===e.length){for(var c=function(n){var t=R(i[n]);o=!t.every((function(t){return"*"!==t&&("!"===t.charAt(0)?e[n]===t.substring(1):e[n]!==t)}))},u=0;u<i.length&&o;u++)c(u);if(o){(0,N[s])(n,r);break}}}})),partnerId:r.options.partnerId,meta:{sampling:r.options.id5Sampling,pbjs:I,tz:O}}},sendErrorEvent:function(e){var n=_;n.sendEvents([n.makeEvent("analyticsError",{message:e.message,stack:e.stack})])},random:function(){return Math.random()}}),j=function(e){var n=_;n.options=e&&e.options||{};var t=n.options.partnerId;"number"==typeof t?(Object(s.a)("".concat("https://api.id5-sync.com/analytics","/").concat(t,"/pbjs"),(function(t){Object(c.logInfo)("id5Analytics: Received from configuration endpoint",t);var r=JSON.parse(t),a=n.options.id5Sampling="number"==typeof r.sampling?r.sampling:0;if("string"==typeof r.ingestUrl){if(n.options.ingestUrl=r.ingestUrl,n.eventsToTrack=r.eventsToTrack||n.options.eventsToTrack||h,n.eventsToTrack=D(n.eventsToTrack)?n.eventsToTrack:h,Object(c.logInfo)("id5Analytics: Configuration is",n.options),Object(c.logInfo)("id5Analytics: Tracking events",n.eventsToTrack),a>0&&n.random()<1/a){if(Object(c.logInfo)("id5Analytics: Selected by sampling. Starting up!"),n.eventBuffer={},e.disablePastEventsProcessing||l.a.getEvents().forEach((function(e){e&&n.eventsToTrack.indexOf(e.eventType)>=0&&n.track(e)})),r.additionalCleanupRules){var o=r.additionalCleanupRules;n.eventsToTrack.forEach((function(e){var n;D(o[e])&&o[e].every((function(e){return D(e.match)&&e.apply in N}))&&(Object(c.logInfo)("id5Analytics: merging additional cleanup rules for event "+e),(n=k[e]).push.apply(n,p(o[e])))}))}n.handlers={},n.eventsToTrack.forEach((function(e){var t=n.handlers[e]=function(t){return n.track({eventType:e,args:t})};l.a.on(e,t)}))}}else Object(c.logError)("id5Analytics: cannot find ingestUrl in config endpoint response; no analytics will be available")})),n.enableAnalytics=function(){}):Object(c.logError)("id5Analytics: partnerId in config.options must be a number representing the id5 partner ID")};function S(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=D(e)?[]:{},a="object"===f(e)&&null!==e;if(a){var o=Object.keys(e);if(o.length>0)return o.forEach((function(a){var o=t.concat(a);r[a]=S(e[a],n,o),n(o,r,a)})),r}return e}_.enableAnalytics=j,_.disableAnalytics=function(){var e=_;e.eventsToTrack.forEach((function(n){e.handlers&&e.handlers[n]&&l.a.off(n,e.handlers[n])})),e.enableAnalytics=function(e){e.disablePastEventsProcessing=!0,j(e)}},i.default.registerAnalyticsAdapter({adapter:_,code:"id5Analytics",gvlid:131}),n.default=_;var k={};k[g]=[{match:[["adUnits","bidderRequests"],"*","bids","*",["userId","crumbs"],"!id5id"],apply:"redact"},{match:[["adUnits","bidderRequests"],"*","bids","*",["userId","crumbs"],"id5id","uid"],apply:"redact"},{match:[["adUnits","bidderRequests"],"*","bids","*","userIdAsEids","*","uids","*",["id","ext"]],apply:"redact"},{match:["bidderRequests","*","gdprConsent","vendorData"],apply:"erase"},{match:["bidsReceived","*",["ad","native"]],apply:"erase"},{match:["noBids","*",["userId","crumbs"],"*"],apply:"redact"},{match:["noBids","*","userIdAsEids","*","uids","*",["id","ext"]],apply:"redact"}],k[T]=[{match:[["ad","native"]],apply:"erase"}];var N={redact:function(e,n){e[n]="__ID5_REDACTED__"},erase:function(e,n){delete e[n]}};function R(e){return D(e)?e:[e]}window.pbjs.installedModules.push("id5AnalyticsAdapter")},6:function(e,n,t){"use strict";n.a=function(e){var n,t=e.url,r=e.analyticsType,a=e.global,l=e.handler,S=[],k=0,N=!0;(function(){if(N){for(var e=0;e<S.length;e++)S[e]();S.push=function(e){e()},N=!1}Object(i.logMessage)("event count sent to ".concat(a,": ").concat(k))})();return{track:function(e){var n=e.eventType,t=e.args;this.getAdapterType()===j&&window[a](l,n,t);this.getAdapterType()===_&&R.apply(void 0,arguments)},enqueue:U,enableAnalytics:q,disableAnalytics:function(){Object(i._each)(n,(function(e,n){u.off(n,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:q},getAdapterType:function(){return r},getGlobal:function(){return a},getHandler:function(){return l},getUrl:function(){return t}};function R(e){var n=e.eventType,r=e.args,a=e.callback;Object(o.a)(t,a,JSON.stringify({eventType:n,args:r}))}function U(e){var n=e.eventType,t=e.args,r=this;a&&window[a]&&n&&t?this.track({eventType:n,args:t}):S.push((function(){k++,r.track({eventType:n,args:t})}))}function q(e){var t,r=this,o=this;"object"!==c(e)||"object"!==c(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))?(u.getEvents().forEach((function(e){if(e){var n=e.eventType,t=e.args;n!==v&&U.call(o,{eventType:n,args:t})}})),s(t={},d,(function(e){return r.enqueue({eventType:d,args:e})})),s(t,y,(function(e){return r.enqueue({eventType:y,args:e})})),s(t,g,(function(e){return r.enqueue({eventType:g,args:e})})),s(t,b,(function(e){return r.enqueue({eventType:b,args:e})})),s(t,v,(function(e){return r.enqueue({eventType:v,args:e})})),s(t,T,(function(e){return r.enqueue({eventType:T,args:e})})),s(t,E,(function(e){return r.enqueue({eventType:E,args:e})})),s(t,m,(function(e){return r.enqueue({eventType:m,args:e})})),s(t,h,(function(e){return r.enqueue({eventType:h,args:e})})),s(t,p,(function(e){return r.enqueue({eventType:p,args:e})})),s(t,A,(function(e){return r.enqueue({eventType:A,args:e})})),s(t,O,(function(e){return r.enqueue({eventType:O,args:e})})),s(t,I,(function(e){return r.enqueue({eventType:I,args:e})})),s(t,D,(function(e){return r.enqueue({eventType:D,args:e})})),s(t,f,(function(n){n.config="object"===c(e)&&e.options||{},r.enqueue({eventType:f,args:n})})),n=t,Object(i._each)(n,(function(e,n){u.on(n,e)}))):Object(i.logMessage)('Analytics adapter for "'.concat(a,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Object(i.logMessage)('Analytics adapter for "'.concat(a,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var r=t(5),a=t.n(r),o=t(4),i=t(0);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=t(10),l=a.a.EVENTS,f=l.AUCTION_INIT,p=l.AUCTION_END,d=l.REQUEST_BIDS,y=l.BID_REQUESTED,v=l.BID_TIMEOUT,g=l.BID_RESPONSE,b=l.NO_BID,T=l.BID_WON,E=l.BID_ADJUSTMENT,m=l.BIDDER_DONE,h=l.SET_TARGETING,A=l.AD_RENDER_FAILED,O=l.AD_RENDER_SUCCEEDED,I=l.AUCTION_DEBUG,D=l.ADD_AD_UNITS,_="endpoint",j="bundle"}},[396]);