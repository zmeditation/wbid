pbjsChunk([179],{589:function(t,e,r){t.exports=r(590)},590:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"parrableIdSubmodule",(function(){return U}));var n=r(0),o=r(11),i=r.n(o),a=r(4),p=r(8),c=r(18),l=r(9),u=r(7),s=["tpc","tpcUntil","filteredUntil","filterHits"],f=["eid","ibaOptout","ccpaOptout"];function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var g="_parrable_id",v="_parrable_eid",m="_parrable_optout",y="Thu, 01 Jan 1970 00:00:00 GMT",h=Object(u.b)(928);function I(){var t=h.getCookie(g);if(t){var e=function(t){var e={};return t.split(",").forEach((function(t){var r=t.split(":");"ccpaOptout"===r[0]||"ibaOptout"===r[0]?e[r[0]]=Boolean(+r[1]):isNaN(r[1])?e[r[0]]=r[1]:e[r[0]]=+r[1]})),e}(decodeURIComponent(t)),r=(e.tpc,e.tpcUntil),n=e.filteredUntil,o=e.filterHits,i=j(e,s),a=(e.eid,e.ibaOptout,e.ccpaOptout,j(e,f));return Date.now()/1e3>=r&&(a.tpc=void 0),Date.now()/1e3<n?(a.shouldFilter=!0,a.filteredUntil=n):(a.shouldFilter=!1,a.filterHits=o),{parrableId:i,params:a}}return null}function w(t){if(t){var e=encodeURIComponent(function(t){var e=[];if(t.eid&&e.push("eid:"+t.eid),t.ibaOptout&&e.push("ibaOptout:1"),t.ccpaOptout&&e.push("ccpaOptout:1"),void 0!==t.tpcSupport){var r=!0===t.tpcSupport?"tpc:1":"tpc:0",n="tpcUntil:".concat(t.tpcUntil);e.push(r),e.push(n)}return t.filteredUntil&&(e.push("filteredUntil:".concat(t.filteredUntil)),e.push("filterHits:".concat(t.filterHits))),e.join(",")}(t));h.setCookie(g,e,new Date(Object(n.timestamp)()+314496e5).toGMTString(),"lax")}}function D(t){return Math.floor(Date.now()/1e3+t)}function S(t,e){if(function(t){return t?t.partners||t.partner?(t.storage&&Object(n.logWarn)("User ID - parrableId submodule does not require a storage config"),!0):(Object(n.logError)("User ID - parrableId submodule requires partner list"),!1):(Object(n.logError)("User ID - parrableId submodule requires configParams"),!1)}(t)){var r=I()||{},o=r.parrableId,p=r.params;if(o||function(t){t&&(w(t),t.eid&&h.setCookie(v,"",y),t.ibaOptout&&h.setCookie(m,"",y))}(o=function(){var t=h.getCookie(v),e="true"===h.getCookie(m);if(t||e){var r={};return t&&(r.eid=t),e&&(r.ibaOptout=e),r}return null}()),function(t,e){var r=t.timezoneFilter;if(!r)return!1;if(e)return!1;var o=(new Date).getTimezoneOffset()/60,a=Intl.DateTimeFormat().resolvedOptions().timeZone;function p(t,e){var r=e&&e.toLowerCase();return!!(t&&e&&i()(t,(function(t){return t.toLowerCase()===r})))}return!((Object(n.isEmpty)(r.blockedZones)&&Object(n.isEmpty)(r.blockedOffsets)||!p(r.blockedZones,a)&&!Object(n.contains)(r.blockedOffsets,o))&&(Object(n.isEmpty)(r.allowedZones)&&Object(n.isEmpty)(r.allowedOffsets)||p(r.allowedZones,a)||Object(n.contains)(r.allowedOffsets,o)))}(t,o))return null;var u=o?o.eid:null,s=Object(c.a)(),f=p?p.tpc:null,b=p?p.shouldFilter:null,O=l.uspDataHandler.getConsentData(),j=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,g=e&&j&&e.consentString||"",S=t.partners||t.partner,U={eid:u,trackers:"string"==typeof S?S.split(","):S,url:s.referer,prebidVersion:"6.10.0-pre",isIframe:Object(n.inIframe)(),tpcSupport:f};!1===b&&(U.filterHits=p.filterHits);var k,C,E={data:(k=btoa(JSON.stringify(U)),C={"+":"-","/":"_","=":"."},k.replace(/[+/=]/g,(function(t){return C[t]}))),gdpr:j?1:0,_rand:Math.random()};O&&(E.us_privacy=O),j&&(E.gdpr_consent=g);var P={method:"GET",withCredentials:!0};return{callback:function(t){var e={success:function(e){var r=o?Object(n.deepClone)(o):{},i={};if(e){try{var a=JSON.parse(e);a&&(!0!==a.ccpaOptout?r.eid=a.eid:(r.eid=null,r.ccpaOptout=!0),!0===a.ibaOptout&&(r.ibaOptout=!0),void 0!==a.tpcSupport&&(i.tpcSupport=a.tpcSupport,i.tpcUntil=D(a.tpcSupportTtl)),a.filterTtl&&(i.filteredUntil=D(a.filterTtl),i.filterHits=0))}catch(e){Object(n.logError)(e),t()}w(d(d({},r),i)),t(r)}else Object(n.logError)("parrableId: ID fetch returned an empty result"),t()},error:function(e){Object(n.logError)("parrableId: ID fetch encountered an error",e),t()}};b?function(t,e){e.filterHits+=1,w(d(d({},t),e))}(o,p):Object(a.a)("https://h.parrable.com/prebid",e,E,P)},id:o}}}var U={name:"parrableId",gvlid:928,decode:function(t){if(t&&Object(n.isPlainObject)(t))return{parrableId:t}},getId:function(t,e,r){return S(t&&t.params||{},e)}};Object(p.e)("userId",U),window.pbjs.installedModules.push("parrableIdSystem")}},[589]);