pbjsChunk([159],{650:function(t,e,n){t.exports=n(651)},651:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTopIFrameWin=m,e.getSlotByWin=b,n.d(e,"track",(function(){return h})),n.d(e,"reconciliationSubmodule",(function(){return v}));var r=n(8),i=n(4),a=n(0),o=n(11),c=n.n(o);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var u="rsdk:impression:req",d="rsdk:impression:res",l={initUrl:"https://confirm.fiduciadlt.com/init",impressionUrl:"https://confirm.fiduciadlt.com/pimp",allowAccess:!1},p={};function f(t){var e={},n="",r="";try{e=JSON.parse(t.data)}catch(t){return}if(e.type===u){if(Object(a.isGptPubadsDefined)()){var i=m(t.source);if(i&&i!==window.top){var o=b(i);o&&(n=o.getAdUnitPath(),r=(r=o.getTargeting("RSDK_ADID")).length?r[0]:"".concat(Object(a.timestamp)(),"-").concat(Object(a.generateUUID)()))}}var c=s({},e.args,{publisherDomain:window.location.hostname,publisherMemberId:p.publisherMemberId,adUnitId:n,adDeliveryId:r});h.trackPost(p.impressionUrl,c);var l={type:d,id:e.id,args:s({publisherDomain:window.location.hostname},e.args)};p.allowAccess&&s(l.args,{adUnitId:n,adDeliveryId:r}),t.source.postMessage(JSON.stringify(l),"*")}}function m(t,e){if(e=e||window,!t)return null;try{for(;t.parent!==e;)t=t.parent;return t}catch(t){return null}}function g(){return Object(a.isGptPubadsDefined)()&&window.googletag.pubads().getSlots()}function b(t){var e=g();return e&&e.length&&c()(e,(function(e){var n=document.getElementById(e.getSlotElementId());if(n){var r=n.querySelector("iframe");if(r&&r.contentWindow===t)return!0}return!1}))||null}var h={trackPost:function(t,e){Object(i.b)()(t,(function(){}),JSON.stringify(e),{method:"POST"})}};var v={name:"reconciliation",getTargetingData:function(t){var e,n={},r=[];return t.forEach((function(t){if(t){var e,i,o=(e=t,(i=g())&&i.length&&c()(i,(function(t){return t.getSlotElementId()===e||t.getAdUnitPath()===e}))||null),s=o?o.getAdUnitPath():t,u="".concat(Object(a.timestamp)(),"-").concat(Object(a.generateUUID)());n[t]={RSDK_AUID:s,RSDK_ADID:u},r.push({adUnitId:s,adDeliveryId:u})}}),{}),e=r,h.trackPost(p.initUrl,{adUnits:e,publisherDomain:window.location.hostname,publisherMemberId:p.publisherMemberId}),n},init:function(t){var e=t.params;e&&e.publisherMemberId?(p=s({},l,e),window.addEventListener("message",f,!1)):Object(a.logError)("missing params for Reconciliation provider");return!0}};Object(r.e)("realTimeData",v),window.pbjs.installedModules.push("reconciliationRtdProvider")}},[650]);