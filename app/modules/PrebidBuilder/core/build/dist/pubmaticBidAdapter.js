pbjsChunk([169],{614:function(e,r,t){e.exports=t(615)},615:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkVideoPlacement=_,t.d(r,"spec",(function(){return X}));var a=t(0),i=t(1),n=t(2),s=t(3),o=t(13);function d(){return(d=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l="pubmatic",m="PubMatic: ",b="USD",g=void 0,f="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),h={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},y="number",v="string",O="boolean",E="array",I={mimes:E,minduration:y,maxduration:y,startdelay:y,playbackmethod:E,api:E,protocols:E,w:y,h:y,battr:E,linearity:y,placement:y,minbitrate:y,maxbitrate:y,skip:y},w={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},j=1,P=2,T=3,S=[{id:w.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:w.TITLE.ID,required:!0},{id:w.IMAGE.ID,required:!0}],D={1:"PMP",5:"PREF",6:"PMPG"},x=1,Y=2,k={bootstrapPlayer:function(e){var r={code:e.adUnitCode};if(e.vastXml?r.vastXml=e.vastXml:e.vastUrl&&(r.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var t,i=k.getRendererId("pubmatic",e.rendererCode),n=document.getElementById(e.adUnitCode),s=0;s<window.bluebillywig.renderers.length;s++)if(window.bluebillywig.renderers[s]._id===i){t=window.bluebillywig.renderers[s];break}t?t.bootstrap(r,n):Object(a.logWarn)("".concat(m,": Couldn't find a renderer with ").concat(i))}else Object(a.logWarn)("".concat(m,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,r){var t=f.replace("$RENDERER",e),i=o.a.install({url:t,loaded:!1,adUnitCode:r});try{i.setRender(k.outstreamRender)}catch(e){Object(a.logWarn)("".concat(m,": Error tying to setRender on renderer"),e)}return i},outstreamRender:function(e){e.renderer.push((function(){k.bootstrapPlayer(e)}))},getRendererId:function(e,r){return"".concat(e,"-").concat(r)}},R=[n.b,n.d,n.c],A=0,C=!1,z={},K={};function N(e,r){if(!Object(a.isStr)(r))return r&&Object(a.logWarn)("PubMatic: Ignoring param key: "+e+", expects string-value, found "+u(r)),g;switch(e){case"pmzoneid":return r.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(r)||g;case"yob":return parseInt(r)||g;default:return r}}function M(e){var r;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(r=e.params.adSlot,Object(a.isStr)(r)?r.replace(/^\s+/g,"").replace(/\s+$/g,""):(r&&Object(a.logWarn)("pubmatic: adSlot must be a string. Ignoring adSlot"),""));var t=e.params.adSlot,i=t.split(":");if(t=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),i=t.split("@"),e.params.adUnit=i[0],i.length>1){if(2!=(i=i[1].split("x")).length)return void Object(a.logWarn)("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0],10),e.params.height=parseInt(i[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(n.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var s=0,o=[];s<e.mediaTypes.banner.sizes.length;s++)2===e.mediaTypes.banner.sizes[s].length&&o.push(e.mediaTypes.banner.sizes[s]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function U(e,r,t){var i,n="Ignoring param key: "+e+", expects "+t+", found "+u(r);switch(t){case O:i=a.isBoolean;break;case y:i=a.isNumber;break;case v:i=a.isStr;break;case E:i=a.isArray}return i(r)?r:(Object(a.logWarn)(m+n),g)}function q(e,r){var t=e.KEY;return{id:e.ID,required:r[t].required?1:0,data:{type:e.TYPE,len:r[t].len,ext:r[t].ext}}}function L(e){var r={assets:[]};for(var t in e){if(e.hasOwnProperty(t)){var i={};if(!(r.assets&&r.assets.length>0&&r.assets.hasOwnProperty(t)))switch(t){case w.TITLE.KEY:e[t].len||e[t].length?i={id:w.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:Object(a.logWarn)("PubMatic: Error: Title Length is required for native ad: "+JSON.stringify(e));break;case w.IMAGE.KEY:e[t].sizes&&e[t].sizes.length>0?i={id:w.IMAGE.ID,required:e[t].required?1:0,img:{type:T,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:g),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:g),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:g),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:g),mimes:e[t].mimes,ext:e[t].ext}}:Object(a.logWarn)("PubMatic: Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case w.ICON.KEY:e[t].sizes&&e[t].sizes.length>0?i={id:w.ICON.ID,required:e[t].required?1:0,img:{type:j,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:g),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:g)}}:Object(a.logWarn)("PubMatic: Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case w.VIDEO.KEY:i={id:w.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case w.EXT.KEY:i={id:w.EXT.ID,required:e[t].required?1:0};break;case w.LOGO.KEY:i={id:w.LOGO.ID,required:e[t].required?1:0,img:{type:P,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:g),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:g)}};break;case w.SPONSOREDBY.KEY:case w.BODY.KEY:case w.RATING.KEY:case w.LIKES.KEY:case w.DOWNLOADS.KEY:case w.PRICE.KEY:case w.SALEPRICE.KEY:case w.PHONE.KEY:case w.ADDRESS.KEY:case w.DESC2.KEY:case w.DISPLAYURL.KEY:case w.CTA.KEY:i=q(K[t],e)}}i&&i.id&&(r.assets[r.assets.length]=i)}var n=S.length,s=0;return S.forEach((function(e){for(var t=r.assets.length,a=0;a<t;a++)if(e.id==r.assets[a].id){s++;break}})),C=n!=s,r}function W(e){var r,t=e.mediaTypes.banner.sizes,i=[];if(t!==g&&Object(a.isArray)(t)){if(r={},e.params.width||e.params.height)r.w=e.params.width,r.h=e.params.height;else{if(0===t.length)return r=g,Object(a.logWarn)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r;r.w=parseInt(t[0][0],10),r.h=parseInt(t[0][1],10),t=t.splice(1,t.length-1)}t.length>0&&(i=[],t.forEach((function(e){e.length>1&&i.push({w:e[0],h:e[1]})})),i.length>0&&(r.format=i)),r.pos=0,r.topframe=Object(a.inIframe)()?0:1}else Object(a.logWarn)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r=g;return r}function _(e,r){Object(a.deepAccess)(e,"placement")||Object(a.logWarn)("Video.Placement param missing for "+r)}function V(e){var r,t=Object(a.mergeDeep)(Object(a.deepAccess)(e.mediaTypes,"video"),e.params.video);if(t!==g){for(var i in r={},_(t,e.adUnitCode),I)t.hasOwnProperty(i)&&(r[i]=U(i,t[i],I[i]));Object(a.isArray)(e.mediaTypes.video.playerSize[0])?(r.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),r.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):Object(a.isNumber)(e.mediaTypes.video.playerSize[0])&&(r.w=parseInt(e.mediaTypes.video.playerSize[0],10),r.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else r=g,Object(a.logWarn)("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return r}function B(e,r,t){var a=r.rtd&&r.rtd.jwplayer&&r.rtd.jwplayer.targeting||void 0,i="";if(void 0!==a&&""!==a&&a.hasOwnProperty("segments")){var n,s=a.segments.length;i+="jw-id="+a.content.id;for(var o=0;o<s;o++)i+="|jw-"+a.segments[o]+"=1";t?void 0===e.dctr||0==e.dctr.length?e.dctr=i:e.dctr+="|"+i:(n=e.ext)&&void 0===n.key_val?n.key_val=i:n.key_val+="|"+i}}function G(e,r){var t,i,o={},d={},l=e.hasOwnProperty("sizes")?e.sizes:[],f="",h=[];if(function(e,r){r.params.deals&&(Object(a.isArray)(r.params.deals)?r.params.deals.forEach((function(r){Object(a.isStr)(r)&&r.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:r})):Object(a.logWarn)("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+r)})):Object(a.logWarn)("PubMatic: Error: bid.params.deals should be an array of strings."))}(o={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:N("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:N("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?N("currency",e.params.currency):b},e),function(e,r){var t,i="";if(r.params.dctr)if(i=r.params.dctr,Object(a.isStr)(i)&&i.length>0){var n=i.split("|");i="",n.forEach((function(e){i+=e.length>0?e.trim()+"|":""})),t=i.length,"|"===i.substring(t,t-1)&&(i=i.substring(0,t-1)),e.ext.key_val=i.trim()}else Object(a.logWarn)("PubMatic: Ignoring param : dctr with value : "+i+", expects string-value, found empty or non-string value")}(o,e),B(o,e),e.hasOwnProperty("mediaTypes"))for(f in e.mediaTypes)switch(f){case n.b:(t=W(e))!==g&&(o.banner=t);break;case n.c:d.request=JSON.stringify(L(e.nativeParams)),C?Object(a.logWarn)("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):o.native=d;break;case n.d:(i=V(e))!==g&&(o.video=i)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:Object(a.inIframe)()?0:1},Object(a.isArray)(l)&&l.length>1&&((l=l.splice(1,l.length-1)).forEach((function(e){h.push({w:e[0],h:e[1]})})),t.format=h),o.banner=t;return function(e,r){var t=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){p(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},Object(a.deepAccess)(r,"ortb2Imp.ext.data"));Object.keys(t).forEach((function(r){"pbadslot"===r?"string"==typeof t[r]&&t[r]&&Object(a.deepSetValue)(e,"ext.data.pbadslot",t[r]):"adserver"===r?["name","adslot"].forEach((function(r){var i=Object(a.deepAccess)(t,"adserver.".concat(r));"string"==typeof i&&i&&(Object(a.deepSetValue)(e,"ext.data.adserver.".concat(r.toLowerCase()),i),"adslot"===r&&Object(a.deepSetValue)(e,"ext.dfp_ad_unit_code",i))})):Object(a.deepSetValue)(e,"ext.data.".concat(r),t[r])}))}(o,e),function(e,r){var t=-1;"function"!=typeof r.getFloor||s.b.getConfig("pubmatic.disableFloors")||[n.b,n.d,n.c].forEach((function(i){if(e.hasOwnProperty(i)){var n=[];"banner"===i&&(e[i].w&&e[i].h&&n.push([e[i].w,e[i].h]),Object(a.isArray)(e[i].format)&&e[i].format.forEach((function(e){return n.push([e.w,e.h])}))),0===n.length&&n.push("*"),n.forEach((function(n){var s=r.getFloor({currency:e.bidfloorcur,mediaType:i,size:n});if(Object(a.logInfo)(m,"floor from floor module returned for mediatype:",i," and size:",n," is: currency",s.currency,"floor",s.floor),"object"===u(s)&&s.currency===e.bidfloorcur&&!isNaN(parseInt(s.floor))){var o=parseFloat(s.floor);Object(a.logInfo)(m,"floor from floor module:",o,"previous floor value",t,"Min:",Math.min(o,t)),t=-1===t?o:Math.min(o,t),Object(a.logInfo)(m,"new floor value:",t)}}))}}));e.bidfloor&&(Object(a.logInfo)(m,"floor from floor module:",t,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(t,e.bidfloor)),t=Math.max(t,e.bidfloor));e.bidfloor=!isNaN(t)&&t>0?t:g,Object(a.logInfo)(m,"new impObj.bidfloor value:",e.bidfloor)}(o,e),o.hasOwnProperty(n.b)||o.hasOwnProperty(n.c)||o.hasOwnProperty(n.d)?o:g}function F(e,r){var t=null,i=Object(a.deepAccess)(e,"0.userId.flocId");if(i&&i.id)switch(r){case Y:t={id:"FLOC",name:"FLOC",ext:{ver:i.version},segment:[{id:i.id,name:"chrome.com",value:i.id.toString()}]};break;case x:default:t={source:"chrome.com",uids:[{atype:1,id:i.id,ext:{ver:i.version}}]}}return t}function J(e){return!0===Object(a.isArray)(e)&&e.length>0}Object(a._each)(w,(function(e){z[e.ID]=e.KEY})),Object(a._each)(w,(function(e){K[e.KEY]=e}));var X={code:l,gvlid:76,supportedMediaTypes:[n.b,n.d,n.c],aliases:[{code:"groupm",gvlid:98}],isBidRequestValid:function(e){if(e&&e.params){if(!Object(a.isStr)(e.params.publisherId))return Object(a.logWarn)("PubMatic: Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(n.d)){var r=Object(a.deepAccess)(e.mediaTypes,"video.mimes"),t=Object(a.deepAccess)(e,"params.video.mimes");if(!1===J(r)&&!1===J(t))return Object(a.logWarn)("PubMatic: Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[n.d].hasOwnProperty("context"))return Object(a.logError)("".concat(m,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[n.d].context&&!Object(a.isStr)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[n.d].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(n.b)||e.mediaTypes.hasOwnProperty(n.c)?(delete e.mediaTypes[n.d],Object(a.logWarn)("".concat(m,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(Object(a.logError)("".concat(m,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,r){var t;r&&r.refererInfo&&(t=r.refererInfo);var i,o=function(e){return{pageURL:e&&e.referer?e.referer:window.location.href,refURL:window.document.referrer}}(t),c=function(e){return{id:""+(new Date).getTime(),at:1,cur:[b],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(o),p="",l=[],m=[];if(e.forEach((function(e){if((i=Object(a.deepClone)(e)).params.adSlot=i.params.adSlot||"",M(i),i.mediaTypes&&i.mediaTypes.hasOwnProperty("video")||i.params.hasOwnProperty("video"));else if(!(i.hasOwnProperty("mediaTypes")&&i.mediaTypes.hasOwnProperty(n.c)||0!==i.params.width||0!==i.params.height))return void Object(a.logWarn)("PubMatic: Skipping the non-standard adslot: ",i.params.adSlot,JSON.stringify(i));o.pubId=o.pubId||i.params.publisherId,(o=function(e,r){var t,i,n;for(t in r.kadpageurl||(r.kadpageurl=r.pageURL),h)h.hasOwnProperty(t)&&(i=e[t])&&("object"===u(n=h[t])&&(i=n.f(i,r)),Object(a.isStr)(i)?r[t]=i:Object(a.logWarn)("PubMatic: Ignoring param : "+t+" with value : "+h[t]+", expects string-value, found "+u(i)));return r}(i.params,o)).transactionId=i.transactionId,""===p?p=i.params.currency||g:i.params.hasOwnProperty("currency")&&p!==i.params.currency&&Object(a.logWarn)("PubMatic: Currency specifier ignored. Only one currency permitted."),i.params.currency=p,i.params.hasOwnProperty("dctr")&&Object(a.isStr)(i.params.dctr)&&l.push(i.params.dctr),i.params.hasOwnProperty("bcat")&&Object(a.isArray)(i.params.bcat)&&(m=m.concat(i.params.bcat));var r=G(i);r&&c.imp.push(r)})),0!=c.imp.length){var f,y;c.site.publisher.id=o.pubId.trim(),A=o.pubId.trim(),c.ext.wrapper={},c.ext.wrapper.profile=parseInt(o.profId)||g,c.ext.wrapper.version=parseInt(o.verId)||g,c.ext.wrapper.wiid=o.wiid||r.auctionId,c.ext.wrapper.wv="prebid_prebid_6.10.0-pre",c.ext.wrapper.transactionId=o.transactionId,c.ext.wrapper.wp="pbjs",c.user.gender=o.gender?o.gender.trim():g,c.user.geo={},c.user.geo.lat=N("lat",o.lat),c.user.geo.lon=N("lon",o.lon),c.user.yob=N("yob",o.yob),c.device.geo=c.user.geo,c.site.page=o.kadpageurl.trim()||c.site.page.trim(),c.site.domain=(f=c.site.page,(y=document.createElement("a")).href=f,y.hostname),"object"===u(s.b.getConfig("content"))&&(c.site.content=s.b.getConfig("content")),"object"===u(s.b.getConfig("device"))&&(c.device=d(c.device,s.b.getConfig("device"))),Object(a.deepSetValue)(c,"source.tid",o.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(c.test=1),e[0].schain&&Object(a.deepSetValue)(c,"source.ext.schain",e[0].schain),r&&r.gdprConsent&&(Object(a.deepSetValue)(c,"user.ext.consent",r.gdprConsent.consentString),Object(a.deepSetValue)(c,"regs.ext.gdpr",r.gdprConsent.gdprApplies?1:0)),r&&r.uspConsent&&Object(a.deepSetValue)(c,"regs.ext.us_privacy",r.uspConsent),!0===s.b.getConfig("coppa")&&Object(a.deepSetValue)(c,"regs.coppa",1),function(e,r){var t=Object(a.deepAccess)(r,"0.userIdAsEids"),i=F(r,x);i&&(t||(t=[]),t.push(i)),Object(a.isArray)(t)&&t.length>0&&Object(a.deepSetValue)(e,"user.eids",t)}(c,e),function(e,r){(r=r.filter((function(e){return"string"==typeof e||(Object(a.logWarn)("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,r,t){if(e.length>3)return t.indexOf(e)===r;Object(a.logWarn)("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(Object(a.logWarn)("PubMatic: bcat: Selected: ",r),e.bcat=r)}(c,m),function(e,r){var t=F(r,Y);t&&(e.user||(e.user={}),e.user.data||(e.user.data=[]),e.user.data.push(t))}(c,e);var v=s.b.getConfig("ortb2")||{};return v.site&&Object(a.mergeDeep)(c,{site:v.site}),v.user&&Object(a.mergeDeep)(c,{user:v.user}),"object"===u(s.b.getConfig("app"))&&(c.app=s.b.getConfig("app"),c.app.publisher=c.site.publisher,c.app.ext=c.site.ext||g,"object"!==u(c.app.content)&&(c.app.content=c.site.content||g),delete c.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(c),bidderRequest:r}}},interpretResponse:function(e,r){var t=[],i=b,s=JSON.parse(r.data),o=s.site&&s.site.ref?s.site.ref:"";try{e.body&&e.body.seatbid&&Object(a.isArray)(e.body.seatbid)&&(i=e.body.cur||i,e.body.seatbid.forEach((function(e){e.bid&&Object(a.isArray)(e.bid)&&e.bid.forEach((function(d){var c={requestId:d.impid,cpm:(parseFloat(d.price)||0).toFixed(2),width:d.w,height:d.h,creativeId:d.crid||d.id,dealId:d.dealid,currency:i,netRevenue:true,ttl:300,referrer:o,ad:d.adm,pm_seat:e.seat||null,pm_dspid:d.ext&&d.ext.dspid?d.ext.dspid:null,partnerImpId:d.id||""};s.imp&&s.imp.length>0&&s.imp.forEach((function(e){if(d.impid===e.id)switch(function(e,r){if(e.ext&&null!=e.ext.bidtype)r.mediaType=R[e.ext.bidtype];else{Object(a.logInfo)("PubMatic: bid.ext.bidtype does not exist, checking alternatively for mediaType");var t=e.adm,i="",s=new RegExp(/VAST\s+version/);if(t.indexOf('span class="PubAPIAd"')>=0)r.mediaType=n.b;else if(s.test(t))r.mediaType=n.d;else try{(i=JSON.parse(t.replace(/\\/g,"")))&&i.native&&(r.mediaType=n.c)}catch(e){Object(a.logWarn)("PubMatic: Error: Cannot parse native reponse for ad response: "+t)}}}(d,c),c.mediaType){case n.b:break;case n.d:c.width=d.hasOwnProperty("w")?d.w:e.video.w,c.height=d.hasOwnProperty("h")?d.h:e.video.h,c.vastXml=d.adm,function(e,r){var t,a,i;if(r.bidderRequest&&r.bidderRequest.bids){for(var s=0;s<r.bidderRequest.bids.length;s++)r.bidderRequest.bids[s].bidId===e.requestId&&(t=r.bidderRequest.bids[s].params,a=r.bidderRequest.bids[s].mediaTypes[n.d].context,i=r.bidderRequest.bids[s].adUnitCode);a&&"outstream"===a&&t&&t.outstreamAU&&i&&(e.rendererCode=t.outstreamAU,e.renderer=k.newRenderer(e.rendererCode,i))}}(c,r);break;case n.c:!function(e,r){if(r.native={},e.hasOwnProperty("adm")){var t="";try{t=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void Object(a.logWarn)("PubMatic: Error: Cannot parse native reponse for ad response: "+r.adm)}if(t&&t.native&&t.native.assets&&t.native.assets.length>0){r.mediaType=n.c;for(var i=0,s=t.native.assets.length;i<s;i++)switch(t.native.assets[i].id){case w.TITLE.ID:r.native.title=t.native.assets[i].title&&t.native.assets[i].title.text;break;case w.IMAGE.ID:r.native.image={url:t.native.assets[i].img&&t.native.assets[i].img.url,height:t.native.assets[i].img&&t.native.assets[i].img.h,width:t.native.assets[i].img&&t.native.assets[i].img.w};break;case w.ICON.ID:r.native.icon={url:t.native.assets[i].img&&t.native.assets[i].img.url,height:t.native.assets[i].img&&t.native.assets[i].img.h,width:t.native.assets[i].img&&t.native.assets[i].img.w};break;case w.SPONSOREDBY.ID:case w.BODY.ID:case w.LIKES.ID:case w.DOWNLOADS.ID:case w.PRICE:case w.SALEPRICE.ID:case w.PHONE.ID:case w.ADDRESS.ID:case w.DESC2.ID:case w.CTA.ID:case w.RATING.ID:case w.DISPLAYURL.ID:r.native[z[t.native.assets[i].id]]=t.native.assets[i].data&&t.native.assets[i].data.value}r.native.clickUrl=t.native.link&&t.native.link.url,r.native.clickTrackers=t.native.link&&t.native.link.clicktrackers||[],r.native.impressionTrackers=t.native.imptrackers||[],r.native.jstracker=t.native.jstracker||[],r.width||(r.width=0),r.height||(r.height=0)}}}(d,c)}})),d.ext&&d.ext.deal_channel&&(c.dealChannel=D[d.ext.deal_channel]||null),c.meta={},d.ext&&d.ext.dspid&&(c.meta.networkId=d.ext.dspid),d.ext&&d.ext.advid&&(c.meta.buyerId=d.ext.advid),d.adomain&&d.adomain.length>0&&(c.meta.advertiserDomains=d.adomain,c.meta.clickUrl=d.adomain[0]),e.ext&&e.ext.buyid&&(c.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),t.push(c)}))})))}catch(e){Object(a.logError)(e)}return t},getUserSyncs:function(e,r,t,a){var i=""+A;return t&&(i+="&gdpr="+(t.gdprApplies?1:0),i+="&gdpr_consent="+encodeURIComponent(t.consentString||"")),a&&(i+="&us_privacy="+encodeURIComponent(a)),!0===s.b.getConfig("coppa")&&(i+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+i}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+i}]},transformBidParams:function(e,r,t,i){return B(e,t.bids[0],!0),Object(a.convertTypes)({publisherId:"string",adSlot:"string"},e)}};Object(i.registerBidder)(X),window.pbjs.installedModules.push("pubmaticBidAdapter")}},[614]);