pbjsChunk([214],{507:function(e,t,r){e.exports=r(508)},508:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"listenerAdded",(function(){return p})),r.d(t,"isEnabled",(function(){return l})),t.init=m,t.updateRenderers=v,t.addBidResponseHook=O,t.addListenerOnce=g,t.isMassBid=h,t.useDefaultMatch=w,t.useDefaultRender=y;var n=r(3),a=r(8),d=r(16);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c,u,f={dealIdPattern:/^MASS/i},p=!1,l=!1,b={};function m(e){!1===(c=o({},f,window.massConfig&&window.massConfig.mass,e)).enabled?l&&(Object(a.a)("addBidResponse").getHooks({hook:O}).remove(),l=!1):l||(Object(a.a)("addBidResponse").before(O),l=!0),l&&v()}function v(){return u=[],c.dealIdPattern&&c.renderUrl&&u.push({match:h,render:y(c.renderUrl,"mass")}),(c.custom||[]).forEach((function(e){!e.match&&e.dealIdPattern&&(e.match=w(e.dealIdPattern)),!e.render&&e.renderUrl&&e.namespace&&(e.render=y(e.renderUrl,e.namespace)),e.match&&e.render&&u.push(e)})),u}function O(e,t,r){for(var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.index,i=void 0===s?d.a.index:s,o=0;o<u.length;o++)if(u[o].match(r)){n=u[o];break}if(n){var c=i.getBidRequest(r);b[r.requestId]={renderer:n,payload:{bidRequest:c,bid:r,adm:r.ad}},r.ad='<script>window.parent.postMessage({massBidId: "'+r.requestId+'"}, "*");<\/script>',g()}e(t,r)}function g(){p||(window.addEventListener("message",(function(e){if(e&&e.data&&e.data.massBidId){var t=b[e.data.massBidId];if(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"prebid",event:e},t.payload);delete r.bid.ad,t.renderer.render(r)}}})),p=!0)}function h(e){return!!(e.meta&&e.meta.mass||c.dealIdPattern&&c.dealIdPattern.test(e.dealId))&&/mass:\/\/|\/pcreative\?/i.test(e.ad)}function w(e){return function(t){return e.test(t.dealId)}}function y(e,t){return function(r){var n=window[t]=window[t]||{};if(n.queue=n.queue||[],n.queue.push(r),!n.loaded){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(a,d),n.loaded=!0}}}m(),n.b.getConfig("mass",(function(e){return m(e.mass)})),window.pbjs.installedModules.push("mass")}},[507]);