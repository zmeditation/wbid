pbjsChunk([232],{457:function(e,n,t){e.exports=t(458)},458:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t.d(n,"kinessoIdSubmodule",(function(){return l}));var r=t(0),o=t(4),i=t(8),s=t(9),u="0123456789ABCDEFGHJKMNPQRSTVWXYZ",c=u.length,a=Math.pow(2,48)-1,d=function(e){e||(e=function(e){e||(e="undefined"!=typeof window?window:null);var n=e&&(e.crypto||e.msCrypto);if(n)return function(){var e=new Uint8Array(1);return n.getRandomValues(e),e[0]/255};return function(){return Math.random()}}());return function(n){return isNaN(n)&&(n=Date.now()),function(e,n){if(isNaN(e))throw new Error(e+" must be a number");if(!1===Number.isInteger(e))throw p("time must be an integer");if(e>a)throw p("cannot encode time greater than "+a);if(e<0)throw p("time must be positive");if(!1===Number.isInteger(n))throw p("length must be an integer");if(n<0)throw p("length must be positive");for(var t,r="";n>0;n--)r=u.charAt(t=e%c)+r,e=(e-t)/c;return r}(n,10)+function(e,n){for(var t="";e>0;e--)t=f(n)+t;return t}(16,e)}}();function f(e){var n=Math.floor(e()*c);return n===c&&(n=c-1),u.charAt(n)}function p(e){Object(r.logError)(e);var n=new Error(e);return n.source="kinessoId",n}var l={name:"kpuid",decode:function(e){return e?function(e){var n={},t=e&&"string"==typeof e?e:void 0;return t?(n.kpuid=t,Object(r.logInfo)("KinessoId: Decoded value "+JSON.stringify(n)),n):t}(e):void 0},getId:function(e,n){var t=e&&e.params||{};if(t&&"number"==typeof t.accountid){if(!s.coppaDataHandler.getCoppa()){var i=t.accountid,u=d();Object(r.logInfo)("KinessoId: generated id "+u);var c={};c.id=u;var a,f=JSON.stringify(c);return Object(o.a)(function(e,n){var t=s.uspDataHandler.getConsentData(),r="".concat("https://id.knsso.com/id","?accountid=").concat(e);return t&&(r="".concat(r,"&us_privacy=").concat(t)),n&&"boolean"==typeof n.gdprApplies&&n.gdprApplies?r="".concat(r,"&gdpr=1&gdpr_consent=").concat(n.consentString):r}(i,n),(a=u,{success:function(e){Object(r.logInfo)("KinessoId: id to be synced: "+a)},error:function(){Object(r.logInfo)("KinessoId: Sync error for id : "+a)}}),f,{method:"POST",withCredentials:!0}),{id:u}}Object(r.logInfo)("KinessoId: IDs not provided for coppa requests, exiting KinessoId")}else Object(r.logError)("User ID - KinessoId submodule requires a valid accountid to be defined")}};Object(i.e)("userId",l),window.pbjs.installedModules.push("kinessoIdSystem")}},[457]);