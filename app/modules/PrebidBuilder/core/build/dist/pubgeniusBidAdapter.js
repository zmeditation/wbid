pbjsChunk([171],{608:function(e,t,r){e.exports=r(609)},609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"spec",(function(){return p}));var n=r(1),a=r(4),i=r(3),s=r(2),o=r(0);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var p={code:"pubgenius",supportedMediaTypes:[s.b,s.d],isBidRequestValid:function(e){var t=e.params.adUnitId;if(!Object(o.isStr)(t)&&!Object(o.isInteger)(t))return Object(o.logError)("pubgenius bidder params: adUnitId must be a string or integer."),!1;var r,n,a,i,s,c=e.mediaTypes;return c.banner?(r=c.banner,!(!(n=r.sizes)||!n.length)&&n.every(b)):(a=c.video,i=e.params.video,!!((s=d(a,i)).placement&&b([s.w,s.h])&&s.mimes&&s.mimes.length&&Object(o.isArrayOfNums)(s.protocols)&&s.protocols.length))},buildRequests:function(e,t){var r={id:t.auctionId,imp:e.map(u),tmax:t.timeout,ext:{pbadapter:{version:"1.1.0"}}},n=function(e){var t=null,r=e.refererInfo,n=i.b.getConfig("pageUrl")||r.canonicalUrl||r.referer;n&&((t=t||{}).page=n);if(r.reachedTop)try{var a=window.top.document.referrer;a&&((t=t||{}).ref=a)}catch(e){}return t}(t);n&&(r.site=n);var a=t.gdprConsent;if(a){var s=a.gdprApplies,c=a.consentString;Object(o.deepSetValue)(r,"regs.ext.gdpr",l(s)),s&&c&&Object(o.deepSetValue)(r,"user.ext.consent",c)}var p=t.uspConsent;p&&Object(o.deepSetValue)(r,"regs.ext.us_privacy",p);var d=e[0].schain;d&&Object(o.deepSetValue)(r,"source.ext.schain",d),i.b.getConfig("coppa")&&Object(o.deepSetValue)(r,"regs.coppa",1);var b=Object(o.deepAccess)(e,"0.userIdAsEids");if(b&&b.length){var f=b.filter((function(e){return"adserver.org"===e.source}));f.length&&Object(o.deepSetValue)(r,"user.ext.eids",f)}return{method:"POST",url:"".concat(m(),"/prebid/auction"),data:r}},interpretResponse:function(e){var t=e.body,r=[],n=t.cur||"USD",a=t.seatbid;return a&&a.forEach((function(e){e.bid.forEach((function(e){var t=function(e){var t={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ttl:e.exp,creativeId:e.crid,netRevenue:!0};e.adomain&&e.adomain.length&&(t.meta={advertiserDomains:e.adomain});switch((Object(o.deepAccess)(e,"ext.pbadapter")||{}).mediaType){case"video":e.nurl&&(t.vastUrl=e.nurl),e.adm&&(t.vastXml=e.adm),t.mediaType=s.d;break;default:t.ad=e.adm}return t}(e);t.currency=n,r.push(t)}))})),r},getUserSyncs:function(e,t,r,n){var a=[];if(e.iframeEnabled){var i={};r&&(i.gdpr=l(r.gdprApplies),r.consentString&&(i.consent=r.consentString)),n&&(i.us_privacy=n);var s=Object(o.parseQueryStringParameters)(i);a.push({type:"iframe",url:"".concat(m(),"/usersync/pixels.html?").concat(s)})}return a},onTimeout:function(e){Object(a.a)("".concat(m(),"/prebid/events?type=timeout"),null,JSON.stringify(e),{method:"POST"})}};function d(e,t){e=e||{};var r=Object(o.pick)(e,["mimes","minduration","maxduration","protocols","startdelay","placement","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"]);switch(e.context){case"instream":r.placement=1;break;case"outstream":r.placement=2}return e.playerSize&&(r.w=e.playerSize[0][0],r.h=e.playerSize[0][1]),c(r,t)}function u(e){var t={id:e.bidId,tagid:String(e.params.adUnitId)};if(e.mediaTypes.banner?t.banner={format:e.mediaTypes.banner.sizes.map((function(e){return{w:e[0],h:e[1]}})),topframe:l(!Object(o.inIframe)())}:t.video=d(e.mediaTypes.video,e.params.video),Object(o.isFn)(e.getFloor)){var r=e.getFloor({mediaType:e.mediaTypes.banner?"banner":"video",size:"*",currency:"USD"}).floor;r&&(t.bidfloor=r)}var n=e.params.position;return Object(o.isInteger)(n)&&(t.banner.pos=n),e.params.test&&Object(o.deepSetValue)(t,"ext.test",1),t}function l(e){return e?1:0}function m(){var e=i.b.getConfig("pubgenius");return e&&e.endpoint||"https://auction.adpearl.io"}function b(e){return Object(o.isArrayOfNums)(e,2)&&e[0]>0&&e[1]>0}Object(n.registerBidder)(p),window.pbjs.installedModules.push("pubgeniusBidAdapter")}},[608]);