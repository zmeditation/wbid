pbjsChunk([360],{157:function(e,r,t){e.exports=t(158)},158:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",(function(){return l}));var a=t(2),i=t(1),n=t(13),d=t(0);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){e.renderer.push((function(){var r=e&&e.renderer&&e.renderer.handleVideoEvent?e.renderer.handleVideoEvent:null;window.aniviewRenderer.renderAd({id:e.adUnitCode+"_"+e.adId,debug:window.location.href.indexOf("pbjsDebug")>=0,placement:e.adUnitCode,width:e.width,height:e.height,vastUrl:e.vastUrl,vastXml:e.vastXml,config:e.params[0].rendererConfig,eventsCallback:r,bid:e})}))}var p=0;var l={code:"aniview",gvlid:780,aliases:["avantisvideo","selectmediavideo","vidcrunch","openwebvideo","didnavideo"],supportedMediaTypes:[a.d,a.b],isBidRequestValid:function(e){return!!(e.params&&e.params.AV_PUBLISHERID&&e.params.AV_CHANNELID)},buildRequests:function(e,r){for(var t=[],a=0;a<e.length;a++){var i=e[a],n=[[640,480]];i.mediaTypes&&i.mediaTypes.video&&i.mediaTypes.video.playerSize?n=i.mediaTypes.video.playerSize:i.sizes&&(n=i.sizes),2===n.length&&"number"==typeof n[0]&&(n=[[n[0],n[1]]]);for(var d=0;d<n.length;d++){var s=n[d],o=void 0,l=void 0;s&&2==s.length?(o=s[0],l=s[1]):(o=640,l=480);var m={};for(var u in i.params)i.params.hasOwnProperty(u)&&0==u.indexOf("AV_")&&(m[u]=i.params[u]);m.AV_APPPKGNAME&&!m.AV_URL&&(m.AV_URL=m.AV_APPPKGNAME),m.AV_IDFA||m.AV_URL||(r&&r.refererInfo&&r.refererInfo.referer?m.AV_URL=r.refererInfo.referer:m.AV_URL=window.location.href),m.AV_IDFA&&!m.AV_AID&&(m.AV_AID=m.AV_IDFA),m.AV_AID&&!m.AV_IDFA&&(m.AV_IDFA=m.AV_AID),m.cb=Math.floor(999999999*Math.random()),m.AV_WIDTH=o,m.AV_HEIGHT=l,m.bidWidth=o,m.bidHeight=l,m.bidId=i.bidId,m.pbjs=1,m.tgt=10,m.s2s="1",m.irc=p,p++,m.wpm=1,r&&r.gdprConsent&&r.gdprConsent.gdprApplies&&(m.AV_GDPR=1,m.AV_CONSENT=r.gdprConsent.consentString),r&&r.uspConsent&&(m.AV_CCPA=r.uspConsent);var c="https://"+(i.params&&i.params.serverDomain?i.params.serverDomain:"gov.aniview.com")+"/api/adserver/vast3/";t.push({method:"GET",url:c,data:m,bidRequest:i})}}return t},interpretResponse:function(e,r){var t=[];if(e&&e.body){if(e.error)return t;try{var i={};if(r&&r.data&&r.data.bidId&&""!==r.data.bidId){var s=a.d;r.bidRequest&&r.bidRequest.mediaTypes&&!r.bidRequest.mediaTypes[a.d]&&(s=a.b);var p=e.body,l=(new window.DOMParser).parseFromString(p,"text/xml");if(l&&0==l.getElementsByTagName("parsererror").length){var m=function(e){var r={cpm:0,currency:"USD"};if(e){var t=e.getElementsByTagName("Extensions");if(t&&t.length>0&&(t=t[0].getElementsByTagName("Extension"))&&t.length>0)for(var a=0;a<t.length;a++)if("ANIVIEW"==t[a].getAttribute("type")){var i=t[a].getElementsByTagName("Cpm");i&&1==i.length&&(r.cpm=i[0].textContent);break}}return r}(l);if(m&&m.cpm>0){if(i.requestId=r.data.bidId,i.ad="",i.cpm=m.cpm,i.width=r.data.AV_WIDTH,i.height=r.data.AV_HEIGHT,i.ttl=600,i.creativeId=l.getElementsByTagName("Ad")&&l.getElementsByTagName("Ad")[0]&&l.getElementsByTagName("Ad")[0].getAttribute("id")?l.getElementsByTagName("Ad")[0].getAttribute("id"):"creativeId",i.currency=m.currency,i.netRevenue=!0,i.mediaType=s,s===a.d){try{var u=new Blob([p],{type:"application/xml"});i.vastUrl=window.URL.createObjectURL(u)}catch(e){Object(d.logError)("Aniview Debug create vastXml error:\n\n"+e)}i.vastXml=p,r.bidRequest&&r.bidRequest.mediaTypes&&r.bidRequest.mediaTypes.video&&"outstream"===r.bidRequest.mediaTypes.video.context&&(i.renderer=function(e){var r="player.aniview.com",t={};if(e&&e.bidRequest&&e.bidRequest.params){var a=e.bidRequest.params;a.playerDomain&&(r=a.playerDomain),a.AV_PUBLISHERID&&(t.AV_PUBLISHERID=a.AV_PUBLISHERID),a.AV_CHANNELID&&(t.AV_CHANNELID=a.AV_CHANNELID)}var i=n.a.install({url:"https://"+r+"/script/6.1/prebidRenderer.js",config:t,loaded:!1});try{i.setRender(o)}catch(e){}return i}(r))}else i.ad=function(e,r,t){var a=JSON.stringify({id:r.adUnitCode,debug:window.location.href.indexOf("pbjsDebug")>=0,placement:r.bidRequest.adUnitCode,width:t.width,height:t.height,vastXml:e,bid:t,config:r.bidRequest.params.rendererConfig}),i='<script src="https://'+(r.bidRequest.params.playerDomain||"player.aniview.com")+'/script/6.1/prebidRenderer.js"><\/script>';return i+"<script> window.aniviewRenderer.renderAd("+a+") <\/script>"}(p,r,i);i.meta={advertiserDomains:[]},t.push(i)}}}}catch(e){}}return t},getUserSyncs:function(e,r){if(r&&r[0]&&r[0].body){if(r.error)return[];try{var t=r[0].body,a=(new window.DOMParser).parseFromString(t,"text/xml");if(a&&0==a.getElementsByTagName("parsererror").length)return function(e,r){var t=[];if(e){var a=e.getElementsByTagName("Extensions");if(a&&a.length>0&&(a=a[0].getElementsByTagName("Extension"))&&a.length>0)for(var i=0;i<a.length;i++)if("ANIVIEW"==a[i].getAttribute("type")){var n=a[i].getElementsByTagName("AdServingSync");if(n&&1==n.length)try{var d=JSON.parse(n[0].textContent);if(d&&d.trackers&&d.trackers.length){d=d.trackers;for(var o=0;o<d.length;o++)"object"!==s(d[o])||"string"!=typeof d[o].url||"inventory"!==d[o].e&&"sync"!==d[o].e||(1==d[o].t&&r.pixelEnabled?t.push({url:d[o].url,type:"image"}):3==d[o].t&&r.iframeEnabled&&t.push({url:d[o].url,type:"iframe"}))}}catch(e){}break}}return t}(a,e)}catch(e){}}}};Object(i.registerBidder)(l),window.pbjs.installedModules.push("aniviewBidAdapter")}},[157]);