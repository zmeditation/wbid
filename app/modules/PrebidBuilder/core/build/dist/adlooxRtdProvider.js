pbjsChunk([7],{27:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"COMMAND",(function(){return E})),e.command=function(t,e,n){var a=Object(d.getUniqueIdentifierStr)();y[a]={cmd:t,data:e,callback:function(){delete y[a],n&&n.apply(null,arguments)}},h.context&&A(a)};var a=n(9),r=n(6),o=n(21),i=n(16),c=n(19),s=n(5),u=n.n(s),l=n(11),p=n.n(l),d=n(0);function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var b="adlooxAnalyticsAdapter",g=2,m=6,v={client:function(t,e){return e.client},clientid:function(t,e){return e.clientid},tagid:function(t,e){return e.tagid},platformid:function(t,e){return e.platformid},targetelt:function(t,e){return e.toselector(t)},creatype:function(t,e){return"video"==t.mediaType?m:g},pbadslot:function(t,e){var n=p()(i.a.getAdUnits(),(function(e){return t.adUnitCode===e.code}));return Object(d.deepAccess)(n,"ortb2Imp.ext.data.pbadslot")||Object(d.getGptSlotInfoForAdUnitCode)(t.adUnitCode).gptSlot||t.adUnitCode}};v.pbAdSlot=v.pbadslot;var O={id1:function(t){return t.adUnitCode},id2:"%%pbadslot%%",id3:function(t){return t.bidder},id4:function(t){return t.adId},id5:function(t){return t.dealId},id6:function(t){return t.creativeId},id7:function(t){return t.size},id11:"$ADLOOX_WEBSITE"},j=function(){},h=f(Object(r.a)({analyticsType:"endpoint"}),{track:function(t){var e=t.eventType,n=t.args;h["handle_".concat(e)]&&(Object(d.logInfo)(b,"track",e,n),h["handle_".concat(e)](n))}});h.context=null,h.originEnableAnalytics=h.enableAnalytics,h.enableAnalytics=function(t){h.context=null,Object(d.logInfo)(b,"config",t),Object(d.isPlainObject)(t.options)?void 0===t.options.js||Object(d.isStr)(t.options.js)?void 0===t.options.toselector||Object(d.isFn)(t.options.toselector)?Object(d.isStr)(t.options.client)?Object(d.isNumber)(t.options.clientid)?Object(d.isNumber)(t.options.tagid)?Object(d.isNumber)(t.options.platformid)?void 0===t.options.params||Object(d.isPlainObject)(t.options.params)?(h.context={js:t.options.js||"https://j.adlooxtracking.com/ads/js/tfav_adl_%%clientid%%.js",toselector:t.options.toselector||function(t){var e=Object(d.getGptSlotInfoForAdUnitCode)(t.adUnitCode).divId||t.adUnitCode;return e=e.replace(/^\d/,"\\3$& "),"#".concat(e)},client:t.options.client,clientid:t.options.clientid,tagid:t.options.tagid,platformid:t.options.platformid,params:[]},t.options.params=Object(d.mergeDeep)({},O,t.options.params||{}),Object.keys(t.options.params).forEach((function(e){Array.isArray(t.options.params[e])||(t.options.params[e]=[t.options.params[e]]),t.options.params[e].forEach((function(t){return h.context.params.push([e,t])}))})),Object.keys(y).forEach(A),h.originEnableAnalytics(t)):Object(d.logError)(b,"invalid params options value"):Object(d.logError)(b,"invalid platformid options value"):Object(d.logError)(b,"invalid tagid options value"):Object(d.logError)(b,"invalid clientid options value"):Object(d.logError)(b,"invalid client options value"):Object(d.logError)(b,"invalid toselector options value"):Object(d.logError)(b,"invalid js options value"):Object(d.logError)(b,"missing options")},h.originDisableAnalytics=h.disableAnalytics,h.disableAnalytics=function(){h.context=null,h.originDisableAnalytics()},h.url=function(t,e,n){var a=function(t){return t.replace(/%%([a-z]+)%%/gi,(function(t,e){return v[e]?v[e](n,h.context):t}))};t=a(t);for(var r=(e=e||[]).length;r-- >0;){if(Object(d.isFn)(e[r][1]))try{e[r][1]=e[r][1](n)}catch(t){Object(d.logError)(b,"macro",e[r][0],t.message),e[r][1]="ERROR: ".concat(t.message)}Object(d.isStr)(e[r][1])&&(e[r][1]=a(e[r][1]))}return t+function(t){function e(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)}))}for(var n=[],a=t.length;a-- >0;)void 0!==t[a][1]&&null!==t[a][1]&&!1!==t[a][1]&&n.unshift(e(t[a][0])+(!0!==t[a][1]?"="+e(t[a][1]):""));return n.join("&")}(e)},h["handle_".concat(u.a.EVENTS.AUCTION_END)]=function(t){if(t.auctionStatus==c.a&&t.bidsReceived.length>0){h["handle_".concat(u.a.EVENTS.AUCTION_END)]=j,Object(d.logMessage)(b,"preloading verification JS");var e=Object(d.parseUrl)(h.url("".concat(h.context.js,"#"))),n=document.createElement("link");n.setAttribute("href","".concat(e.protocol,"://").concat(e.host).concat(e.pathname)),n.setAttribute("rel","preload"),n.setAttribute("as","script"),Object(d.insertElement)(n)}},h["handle_".concat(u.a.EVENTS.BID_WON)]=function(t){if(Object(d.deepAccess)(t,"ext.adloox.video.adserver"))Object(d.logMessage)(b,"measuring '".concat(t.mediaType,"' ad unit code '").concat(t.adUnitCode,"' via Ad Server module"));else{var e,n=h.context.toselector(t);try{e=document.querySelector(n)}catch(t){}if(e){Object(d.logMessage)(b,"measuring '".concat(t.mediaType,"' unit at '").concat(t.adUnitCode,"'"));var a=h.context.params.concat([["tagid","%%tagid%%"],["platform","%%platformid%%"],["fwtype",4],["targetelt","%%targetelt%%"],["creatype","%%creatype%%"]]);Object(o.a)(h.url("".concat(h.context.js,"#"),a,t),"adloox")}else Object(d.logWarn)(b,"unable to find ad unit code '".concat(t.adUnitCode,"' slot using selector '").concat(n,"' (use options.toselector to change), ignoring"))}},a.default.registerAnalyticsAdapter({adapter:h,code:"adloox",gvlid:93}),e.default=h;var y={},E={CONFIG:"config",TOSELECTOR:"toselector",URL:"url",TRACK:"track"};function A(t){var e=y[t],n=e.cmd,a=e.data,r=e.callback;switch(Object(d.logInfo)(b,"command",n,a),n){case E.CONFIG:r({client:h.context.client,clientid:h.context.clientid,tagid:h.context.tagid,platformid:h.context.platformid});break;case E.TOSELECTOR:r(h.context.toselector(a.bid));break;case E.URL:a.ids&&(a.args=a.args.concat(h.context.params.filter((function(t){return/^id([1-9]|10)$/.test(t[0])})))),r(h.url(a.url,a.args,a.bid));break;case E.TRACK:h.track(a),r();break;default:Object(d.logWarn)(b,"command unknown",n)}}window.pbjs.installedModules.push("adlooxAnalyticsAdapter")},6:function(t,e,n){"use strict";e.a=function(t){var e,n=t.url,a=t.analyticsType,r=t.global,l=t.handler,x=[],C=0,N=!0;(function(){if(N){for(var t=0;t<x.length;t++)x[t]();x.push=function(t){t()},N=!1}Object(i.logMessage)("event count sent to ".concat(r,": ").concat(C))})();return{track:function(t){var e=t.eventType,n=t.args;this.getAdapterType()===S&&window[r](l,e,n);this.getAdapterType()===I&&D.apply(void 0,arguments)},enqueue:M,enableAnalytics:U,disableAnalytics:function(){Object(i._each)(e,(function(t,e){u.off(e,t)})),this.enableAnalytics=this._oldEnable?this._oldEnable:U},getAdapterType:function(){return a},getGlobal:function(){return r},getHandler:function(){return l},getUrl:function(){return n}};function D(t){var e=t.eventType,a=t.args,r=t.callback;Object(o.a)(n,r,JSON.stringify({eventType:e,args:a}))}function M(t){var e=t.eventType,n=t.args,a=this;r&&window[r]&&e&&n?this.track({eventType:e,args:n}):x.push((function(){C++,a.track({eventType:e,args:n})}))}function U(t){var n,a=this,o=this;"object"!==s(t)||"object"!==s(t.options)||(void 0===t.options.sampling||Math.random()<parseFloat(t.options.sampling))?(u.getEvents().forEach((function(t){if(t){var e=t.eventType,n=t.args;e!==g&&M.call(o,{eventType:e,args:n})}})),c(n={},f,(function(t){return a.enqueue({eventType:f,args:t})})),c(n,b,(function(t){return a.enqueue({eventType:b,args:t})})),c(n,m,(function(t){return a.enqueue({eventType:m,args:t})})),c(n,v,(function(t){return a.enqueue({eventType:v,args:t})})),c(n,g,(function(t){return a.enqueue({eventType:g,args:t})})),c(n,O,(function(t){return a.enqueue({eventType:O,args:t})})),c(n,j,(function(t){return a.enqueue({eventType:j,args:t})})),c(n,h,(function(t){return a.enqueue({eventType:h,args:t})})),c(n,y,(function(t){return a.enqueue({eventType:y,args:t})})),c(n,d,(function(t){return a.enqueue({eventType:d,args:t})})),c(n,E,(function(t){return a.enqueue({eventType:E,args:t})})),c(n,A,(function(t){return a.enqueue({eventType:A,args:t})})),c(n,_,(function(t){return a.enqueue({eventType:_,args:t})})),c(n,T,(function(t){return a.enqueue({eventType:T,args:t})})),c(n,p,(function(e){e.config="object"===s(t)&&t.options||{},a.enqueue({eventType:p,args:e})})),e=n,Object(i._each)(e,(function(t,e){u.on(e,t)}))):Object(i.logMessage)('Analytics adapter for "'.concat(r,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Object(i.logMessage)('Analytics adapter for "'.concat(r,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var a=n(5),r=n.n(a),o=n(4),i=n(0);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=n(10),l=r.a.EVENTS,p=l.AUCTION_INIT,d=l.AUCTION_END,f=l.REQUEST_BIDS,b=l.BID_REQUESTED,g=l.BID_TIMEOUT,m=l.BID_RESPONSE,v=l.NO_BID,O=l.BID_WON,j=l.BID_ADJUSTMENT,h=l.BIDDER_DONE,y=l.SET_TARGETING,E=l.AD_RENDER_FAILED,A=l.AD_RENDER_SUCCEEDED,_=l.AUCTION_DEBUG,T=l.ADD_AD_UNITS,I="endpoint",S="bundle"},79:function(t,e,n){t.exports=n(80)},80:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"subModuleObj",(function(){return h}));var a=n(27),r=n(3),o=n(8),i=n(4),c=n(14),s=n(0),u=n(12),l=n.n(u);function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var d="adloox",f="".concat(d,"RtdProvider"),b={a:"aud",d:"dis",v:"vid"},g=Object.keys(b).map((function(t){return b[t]})),m="adl_",v=window!=top&&void 0,O=[];function j(t,e){Object(a.command)(a.COMMAND.TOSELECTOR,{bid:{adUnitCode:t.code}},(function(n){var a=document.querySelector(n);if(!a)return e(null);if("none"==window.getComputedStyle(a).display)return e(NaN);try{if(v)throw!1;var r=function(e){var n=Object(s.getAdUnitSizes)(t);if(0==n.length)return!1;if(1==n.length&&n[0][0]*n[0][1]<=1)return!0;if(e.top<=-window.pageYOffset&&e.left<=-window.pageXOffset&&e.top==e.bottom)return!0;for(var a=1/0,r=1/0,o=0;o<n.length;o++){var i=n[o][0]*n[o][1];i<400||i<a*r&&(a=n[o][0],r=n[o][1])}var c=Math.min(1,(e.right-e.left)/a);return{left:e.left,right:e.left+Math.max(20,c*a),top:e.top,bottom:e.top+Math.max(20,c*r)}}(a.getBoundingClientRect());if(!1===r)return e(NaN);if(!0===r)return e(1);var o,i=r.right-r.left,c=r.bottom-r.top;if(i*c<400)return e(NaN);for(var u=window;;){var l=Math.max(u.document.documentElement.clientWidth||0,u.innerWidth||0),p=Math.max(u.document.documentElement.clientHeight||0,u.innerHeight||0);if(r.left=Math.min(Math.max(r.left,0),l),r.right=Math.min(Math.max(r.right,0),l),r.top=Math.min(Math.max(r.top,0),p),r.bottom=Math.min(Math.max(r.bottom,0),p),u==top)return e((r.right-r.left)*(r.bottom-r.top)/(i*c));if(!(o=u.frameElement))throw!1;u=u.parent;var d=o.getBoundingClientRect();r.left+=d.left,r.right=Math.min(r.right+d.left,d.right),r.top+=d.top,r.bottom=Math.min(r.bottom+d.top,d.bottom)}}catch(t){if(void 0===v)try{v=new IntersectionObserver((function(t){t.forEach((function(t){var e=t.intersectionRect.width*t.intersectionRect.height<400?NaN:t.intersectionRatio,n=O.findIndex((function(e){return e.element==t.target}));O[n].cb.forEach((function(t){return t(e)})),O.splice(n,1),v.unobserve(t.target)}))}))}catch(t){v=!1}if(!v)return e(null);var f=O.findIndex((function(t){return t.element==a}));-1==f?(O.push({element:a,cb:[e]}),v.observe(a)):O[f].cb.push(e)}}))}var h={name:d,init:function(t,e){if(Object(s.logInfo)(f,"init",t,e),!Object(s.isPlainObject)(t))return Object(s.logError)(f,"missing config"),!1;if(void 0===t.params&&(t.params={}),!Object(s.isPlainObject)(t.params))return Object(s.logError)(f,"invalid params"),!1;if(void 0!==t.params.api_origin&&!Object(s.isStr)(t.params.api_origin))return Object(s.logError)(f,"invalid api_origin params value"),!1;if(!(void 0===t.params.imps||Object(s.isInteger)(t.params.imps)&&t.params.imps>0))return Object(s.logError)(f,"invalid imps params value"),!1;if(!(void 0===t.params.freqcap_ip||Object(s.isInteger)(t.params.freqcap_ip)&&t.params.freqcap_ip>=0))return Object(s.logError)(f,"invalid freqcap_ip params value"),!1;if(!(void 0===t.params.freqcap_ipua||Object(s.isInteger)(t.params.freqcap_ipua)&&t.params.freqcap_ipua>=0))return Object(s.logError)(f,"invalid freqcap_ipua params value"),!1;if(!(void 0===t.params.thresholds||Object(s.isArray)(t.params.thresholds)&&t.params.thresholds.every((function(t){return Object(s.isInteger)(t)&&t>0&&t<=100}))))return Object(s.logError)(f,"invalid thresholds params value"),!1;if(void 0!==t.params.slotinpath&&!Object(s.isBoolean)(t.params.slotinpath))return Object(s.logError)(f,"invalid slotinpath params value"),!1;if(!(void 0===t.params.params||Object(s.isPlainObject)(t.params.params)&&Object(s.isInteger)(t.params.params.clientid)&&Object(s.isInteger)(t.params.params.tagid)&&Object(s.isInteger)(t.params.params.platformid)))return Object(s.logError)(f,"invalid subsection params block"),!1;function n(e){t=Object(s.mergeDeep)(t.params,e)}return t.params.thresholds=t.params.thresholds||[50,60,70,80,90],t.params.params?(Object(s.logWarn)(f,"legacy/deprecated configuration (please migrate to ".concat(d,"AnalyticsAdapter)")),n(t.params.params)):Object(a.command)(a.COMMAND.CONFIG,null,n),!0},getBidRequestData:function(t,e,n,o){var u=(t.adUnits||Object(c.a)().adUnits).map((function(t){var e=Object(s.deepAccess)(t,"ortb2Imp.ext.data.pbadslot");return e||(e=Object(s.getGptSlotInfoForAdUnitCode)(t.code).gptSlot),{path:e,unit:t}})).filter((function(t){return!!t.path})),l={};function p(t){function e(t){return Object(s.isPlainObject)(t)?{}:Object(s.isArray)(t)?[]:void 0}for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];if(!a.length)return t;var o=a.shift();return Object(s.isPlainObject)(t)&&Object(s.isPlainObject)(o)?Object.keys(o).forEach((function(n){n in t||(t[n]=e(o[n])),t[n]=void 0!==t[n]?p(t[n],o[n]):o[n]})):Object(s.isArray)(t)&&Object(s.isArray)(o)?o.forEach((function(n,a){a in t||(t[a]=e(n)),t[a]=void 0!==t[a]?p(t[a],n):n})):t=o,p.apply(void 0,[t].concat(a))}var g=1;function m(t){0!=g&&0==(g+=t)&&(!function(){function t(t,e){return(b[e]||"atf"==e)&&t>=0?n.params.thresholds.filter((function(e){return e<=t})):t}var e=r.b.getConfig("ortb2")||{},a=r.b.getConfig("ortb2.site.ext.data")||{},o=r.b.getConfig("ortb2.user.ext.data")||{};Object(s._each)(l,(function(e,n){if("_"!=n){var r=b[n]||n,i=t(e,n);Object(s.deepSetValue)(r==n?o:a,"".concat(d,"_rtd.").concat(r),i)}})),Object(s.deepSetValue)(a,"".concat(d,"_rtd.ok"),!0),Object(s.deepSetValue)(e,"site.ext.data",a),Object(s.deepSetValue)(e,"user.ext.data",o),r.b.setConfig({ortb2:e}),u.forEach((function(e,n){Object(s._each)(l._[n],(function(n,a){var r=b[a]||a,o=t(n,a);Object(s.deepSetValue)(e.unit,"ortb2Imp.ext.data.".concat(d,"_rtd.").concat(r),o)}))}))}(),e())}var v=[["v","pbjs-".concat(Object(c.a)().version)],["c",n.params.clientid],["p",n.params.platformid],["t",n.params.tagid],["imp",n.params.imps],["fc_ip",n.params.freqcap_ip],["fc_ipua",n.params.freqcap_ipua],["pn",document.location.pathname]];u.length||Object(s.logWarn)(f,"no suitable adUnits (missing pbadslot?)");var O=[];function h(){O.forEach((function(t){return t()}))}u.map((function(t,e){var a=[t.path];n.params.slotinpath||a.push(t.unit.code),v.push(["s",a.join("\t")]),m(1),O.push((function(){j(t.unit,(function(n){var a=void 0===document.visibilityState||"visible"==document.visibilityState;try{a=a&&top.document.hasFocus()}catch(t){}Object(s.logInfo)(f,"atf code=".concat(t.unit.code," has area=").concat(n,", viewable=").concat(a));var r=[];r[e]={atf:parseInt(100*n)},l=p(l,{_:r}),m(-1)}))}))})),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",h,!1):h(),Object(a.command)(a.COMMAND.URL,{url:(n.params.api_origin||"https://p.adlooxtracking.com")+"/q?",args:v},(function(t){Object(i.a)(t,{success:function(t,e){try{if("application/json"!=e.getResponseHeader("content-type"))throw!1;l=p(l,JSON.parse(t))}catch(t){Object(s.logError)(f,"unexpected response")}m(-1)},error:function(t,e){Object(s.logError)(f,"request failed"),m(-1)}})}))},getTargetingData:function(t,e,n){function a(t){if((!Object(s.isArray)(t)||0!=t.length)&&(Object(s.isBoolean)(t)&&(t=~~t),t))return t}var o=r.b.getConfig("ortb2.site.ext.data.".concat(d,"_rtd"))||{};if(!o.ok)return{};var i=r.b.getConfig("ortb2.user.ext.data.".concat(d,"_rtd"))||{};return Object(c.a)().adUnits.filter((function(e){return l()(t,e.code)})).reduce((function(t,e){t[e.code]={},Object(s._each)(o,(function(n,r){if(!l()(g,r)){var o=a(n);o&&(t[e.code][m+r]=o)}}));var n=Object(s.deepAccess)(e,"ortb2Imp.ext.data.".concat(d,"_rtd"),{});return Object(s._each)(p({},i,n),(function(n,r){var o=a(n);o&&(t[e.code][m+r]=o)})),t}),{})},atf:j};Object(o.e)("realTimeData",h),window.pbjs.installedModules.push("adlooxRtdProvider")}},[79]);