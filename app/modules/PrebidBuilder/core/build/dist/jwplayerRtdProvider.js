pbjsChunk([234],{451:function(t,e,n){t.exports=n(452)},452:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"jwplayerSubmodule",(function(){return p})),e.fetchTargetingInformation=y,e.fetchTargetingForMediaId=j,e.enrichAdUnits=w,e.extractPublisherParams=D,e.getVatFromCache=I,e.getVatFromPlayer=O,e.formatTargetingResponse=T,e.getContentId=P,e.getContentData=E,e.addOrtbSiteContent=C,e.addTargetingToBid=x;var r=n(8),a=n(3),i=n(4),o=n(0),u=n(11),c=n.n(u),f=n(14);function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var d,l="jwplayer",g={},m={},v=0,p={name:l,getBidRequestData:function(t,e){v=0,w(t.adUnits||Object(f["a"])().adUnits),v<=0?e():d=e},init:function(t,e){return!0}};function y(t){var e=t.mediaIDs;e&&e.forEach((function(t){j(t)}))}function j(t){var e=Object(i.b)();m[t]=null,e("https://cdn.jwplayer.com/v2/media/".concat(t),{success:function(e){var n=function(t){var e;try{var n=JSON.parse(t);if(!n)throw"Empty response";var r=n.playlist;if(!r||!r.length)throw"Empty playlist";e=r[0].jwpseg}catch(t){Object(o.logError)(t)}return e}(e);h(n,t),b(t,!!n)},error:function(){Object(o.logError)("failed to retrieve targeting information"),b(t,!1)}})}function h(t,e){t&&e&&(g[e]=t)}function b(t,e){var n=m[t];n&&(n(e?I(t):{mediaID:t}),v--),delete m[t],v>0||d&&(d(),d=null)}function w(t){var e=a.b.getConfig("ortb2.site.ext.data.jwTargeting");t.forEach((function(t){var n=D(t,e);if(n&&Object.keys(n).length){!function(t,e){var n=t.playerID,r=t.mediaID;if(void 0!==m[r])return void function(t,e,n){var r=O(t,e);r?n(r):(v++,m[e]=n)}(n,r,e);var a=I(r)||O(n,r)||{mediaID:r};e(a)}(n,(function(e){if(e){var n=P(e.mediaID),r=E(e.segments),a=T(e);!function(t,e,n,r){if(!t)return;t.forEach((function(t){x(t,e),C(t,n,r)}))}(t.bids,a,n,r)}}))}}))}function D(t,e){var n,r,a;try{n=t.ortb2Imp.ext.data.jwTargeting}catch(t){}if(n||(r=t.mediaTypes,(a=r&&r.video)&&"instream"===a.context))return s({},e,n)}function I(t){var e=g[t];return e?{segments:e,mediaID:t}:null}function O(t,e){var n=function(t){var e=window.jwplayer;if(!e)return void Object(o.logError)("jwplayer.js was not found on page");var n=e(t);if(!n||!n.getPlaylist)return void Object(o.logError)("player ID did not match any players");return n}(t);if(!n)return null;var r=e?c()(n.getPlaylist(),(function(t){return t.mediaid===e})):n.getPlaylistItem();if(!r)return null;e=e||r.mediaid;var a=r.jwpseg;return h(a,e),{segments:a,mediaID:e}}function T(t){var e=t.segments,n=t.mediaID,r={};return e&&e.length&&(r.segments=e),n&&(r.content={id:P(n)}),r}function P(t){if(t)return"jw_"+t}function E(t){if(t&&t.length)return{name:"jwplayer",ext:{segtax:502},segment:t.reduce((function(t,e){return t.push({id:e,value:e}),t}),[])}}function C(t,e,n){if(e||n){var r=t.ortb2||{},a=r.site=r.site||{},i=a.content=a.content||{};if(e&&(i.id=e),n)(i.data=i.data||[]).push(n);t.ortb2=r}}function x(t,e){if(e){var n=t.rtd||{},r={};r.jwplayer=s({},n.jwplayer,{targeting:e}),t.rtd=s({},n,r)}}a.b.getConfig("realTimeData",(function(t){var e=t.realTimeData.dataProviders,n=e&&c()(e,(function(t){return t.name&&t.name.toLowerCase()===l})),r=n&&n.params;r&&y(r)})),Object(r.e)("realTimeData",p),window.pbjs.installedModules.push("jwplayerRtdProvider")}},[451]);