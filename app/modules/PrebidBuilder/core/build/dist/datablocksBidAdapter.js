pbjsChunk([306],{288:function(e,t,n){e.exports=n(289)},289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"storage",(function(){return y})),n.d(t,"spec",(function(){return g})),n.d(t,"BotClientTests",(function(){return v}));var r=n(0),i=n(1),o=n(3),a=n(2),s=n(7),d=n(4);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=Object(s.b)(),_={},h={title:{id:1,name:"title"},icon:{id:2,type:1,name:"img"},image:{id:3,type:3,name:"img"},body:{id:4,name:"data",type:2},sponsoredBy:{id:5,name:"data",type:1},cta:{id:6,type:12,name:"data"},body2:{id:7,name:"data",type:10},rating:{id:8,name:"data",type:3},likes:{id:9,name:"data",type:4},downloads:{id:10,name:"data",type:5},displayUrl:{id:11,name:"data",type:11},price:{id:12,name:"data",type:6},salePrice:{id:13,name:"data",type:7},address:{id:14,name:"data",type:9},phone:{id:15,name:"data",type:8}};Object.keys(h).forEach((function(e){_[h[e].id]=e}));var g={supportedMediaTypes:[a.b,a.c],code:"datablocks",db_obj:{metrics_host:"prebid.dblks.net",metrics:[],metrics_timer:null,metrics_queue_time:1e3,vis_optout:!1,source_id:0},store_dbid:function(e){var t=!1,n=new Date;return n.setTime(Date.now()+31536e6),y.cookiesAreEnabled&&(y.setCookie("_db_dbid",e,n.toUTCString(),"None",null),t=!0),y.localStorageIsEnabled&&(y.setDataInLocalStorage("_db_dbid",e),t=!0),t},get_dbid:function(){var e="";return y.cookiesAreEnabled&&(e=y.getCookie("_db_dbid")||""),!e&&y.localStorageIsEnabled&&(e=y.getDataFromLocalStorage("_db_dbid")||""),e},store_syncs:function(e){if(y.localStorageIsEnabled){var t={};e.forEach((function(e){t[e.id]=e.uid}));var n=this.get_syncs();return y.setDataInLocalStorage("_db_syncs",JSON.stringify(f(n,t))),!0}},get_syncs:function(){if(y.localStorageIsEnabled){var e=y.getDataFromLocalStorage("_db_syncs");return e?JSON.parse(e):{}}return{}},queue_metric:function(e){if("object"===b(e)){this.db_obj.metrics.push(e),this.db_obj.metrics_timer&&clearTimeout(this.db_obj.metrics_timer);var t=this;return this.db_obj.metrics_timer=setTimeout((function(){t.send_metrics()}),this.db_obj.metrics_queue_time),!0}return!1},send_metrics:function(){return Object(d.a)("https://".concat(this.db_obj.metrics_host,"/a/pb/"),null,JSON.stringify(this.db_obj.metrics),{method:"POST",withCredentials:!0}),this.db_obj.metrics=[],!0},get_client_info:function(){var e=new v,t=Object(r.getWindowTop)();return{wiw:t.innerWidth,wih:t.innerHeight,saw:screen?screen.availWidth:null,sah:screen?screen.availHeight:null,scd:screen?screen.colorDepth:null,sw:screen?screen.width:null,sh:screen?screen.height:null,whl:t.history.length,wxo:t.pageXOffset,wyo:t.pageYOffset,wpr:t.devicePixelRatio,is_bot:e.doTests(),is_hid:t.document.hidden,vs:t.document.visibilityState}},get_viewability:function(e){if(!this.db_obj.vis_optout&&!this.db_obj.vis_run){this.db_obj.vis_run=!0;var t=this;Object(r.isGptPubadsDefined)()&&"function"==typeof window.googletag.pubads().addEventListener&&(window.googletag.pubads().addEventListener("impressionViewable",(function(n){t.queue_metric({type:"slot_view",source_id:t.db_obj.source_id,auction_id:e.auctionId,div_id:n.slot.getSlotElementId(),slot_id:n.slot.getSlotId().getAdUnitPath()})})),window.googletag.pubads().addEventListener("slotRenderEnded",(function(n){t.queue_metric({type:"slot_render",source_id:t.db_obj.source_id,auction_id:e.auctionId,div_id:n.slot.getSlotElementId(),slot_id:n.slot.getSlotId().getAdUnitPath()})})))}},isBidRequestValid:function(e){return this.db_obj.source_id=e.params.source_id,e.params.vis_optout&&(this.db_obj.vis_optout=!0),!(!e.params.source_id||!e.mediaTypes||!e.mediaTypes.banner&&!e.mediaTypes.native)},buildRequests:function(e,t){if(!e.length)return[];var n=[];if(e.forEach((function(e){var t,i,o={id:e.bidId,tagid:e.params.tagid||e.adUnitCode,placement_id:e.params.placement_id||0,secure:"https:"==window.location.protocol,ortb2:Object(r.deepAccess)(e,"ortb2Imp")||{},floor:{}};if("function"==typeof e.getFloor&&(o.floor=e.getFloor({currency:"USD",mediaType:"*",size:"*"})),Object(r.deepAccess)(e,"mediaTypes.banner")){var a=Object(r.getAdUnitSizes)(e);a.length&&(o.banner={w:a[0][0],h:a[0][1],format:a.map((function(e){return{w:e[0],h:e[1]}}))},n.push(o))}else Object(r.deepAccess)(e,"mediaTypes.native")&&(o.native=(i=[],(t=e).nativeParams&&Object.keys(t.nativeParams).forEach((function(e){if(h[e]){var n,r=h[e],o=r.name,a=r.type,s=r.id,d=a?{type:a}:{},c=t.nativeParams[e],u=c.len,p=c.sizes,m=c.required,b=c.aspect_ratios;if(u&&(d.len=u),b&&b[0]){var f=(b=b[0]).min_width||0,y=b.ratio_height*f/b.ratio_width|0;d.wmin=f,d.hmin=y}p&&p.length&&(p=(n=[]).concat.apply(n,l(p)),d.w=p[0],d.h=p[1]);var _={required:m?1:0,id:s};_[o]=d,i.push(_)}})),{ver:"1.2",request:{assets:i,context:1,plcmttype:1,ver:"1.2"}}),n.push(o))})),!n.length)return[];var i={domain:window.location.host,page:t.refererInfo.referer,schain:e[0].schain||{},ext:{p_domain:o.b.getConfig("publisherDomain"),rt:t.refererInfo.reachedTop,frames:t.refererInfo.numIframes,stack:t.refererInfo.stack,timeout:o.b.getConfig("bidderTimeout")}};self===top&&document.referrer&&(i.ref=document.referrer);var a=document.getElementsByTagName("meta").keywords;a&&a.content&&(i.keywords=a.content);var s={ip:"peer",ua:window.navigator.userAgent,js:1,language:(navigator.language||navigator.userLanguage||"").split("-")[0]||"en",buyerid:this.get_dbid()||0,ext:{pb_eids:e[0].userIdAsEids||{},syncs:this.get_syncs()||{},coppa:o.b.getConfig("coppa")||0,gdpr:t.gdprConsent||{},usp:t.uspConsent||{},client_info:this.get_client_info(),ortb2:o.b.getConfig("ortb2")||{}}},d=e[0].params.source_id||0,c=e[0].params.host||"prebid.dblks.net";return{method:"POST",url:"https://".concat(c,"/openrtb/?sid=").concat(d),data:{id:t.auctionId,imp:n,site:i,device:s},options:{withCredentials:!0}}},getUserSyncs:function(e,t,n){var r=[],i=t[0].body,o=this;window.addEventListener("message",(function(e){e.data.sentinel&&"dblks_syncData"===e.data.sentinel&&e.data.syncs&&o.store_syncs(e.data.syncs)}));var a={gdpr:0,gdprConsent:""};"object"===b(n)&&("boolean"==typeof n.gdprApplies?(a.gdpr=Number(n.gdprApplies),a.gdprConsent=n.consentString):a.gdprConsent=n.consentString);var s=this.get_dbid()||"";return i.ext&&i.ext.buyerid&&(s=i.ext.buyerid,this.store_dbid(s)),i.ext&&i.ext.syncs&&i.ext.syncs.forEach((function(t){(function(t){if(!t.type||!t.url)return!1;switch(t.type){case"iframe":return e.iframeEnabled;case"image":return e.pixelEnabled;default:return!1}})(t)&&r.push(function(e){try{var t,n=new URL(e.url),r={},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n.searchParams.entries());try{for(o.s();!(t=o.n()).done;){var d=u(t.value,2),c=d[0],l=d[1];r[c]=l}}catch(e){o.e(e)}finally{o.f()}r.gdpr=a.gdpr,r.gdprConsent=a.gdprConsent,r.bidid=i.bidid,r.id=i.id,r.uid=s,e.url="".concat(n.origin).concat(n.pathname,"?").concat(Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&"))}catch(e){}return e}(t))})),r},onBidWon:function(e){this.queue_metric({type:"bid_won",source_id:e.params[0].source_id,req_id:e.requestId,slot_id:e.adUnitCode,auction_id:e.auctionId,size:e.size,cpm:e.cpm,pb:e.adserverTargeting.hb_pb,rt:e.timeToRespond,ttl:e.ttl})},onSetTargeting:function(e){this.get_viewability(e)},interpretResponse:function(e,t){var n=[];return(Object(r.deepAccess)(e,"body.seatbid")||[]).forEach((function(e){var t,i,o,s,d,c,u={requestId:e.id,cpm:e.price,creativeId:e.crid,currency:e.currency||"USD",netRevenue:!0,ttl:e.ttl||360,meta:{advertiserDomains:e.adomain}};switch(Object(r.deepAccess)(e,"ext.mtype")||""){case"banner":n.push(f({},u,{mediaType:a.b,width:e.w,height:e.h,ad:e.adm}));break;case"native":var l=JSON.parse(e.adm);n.push(f({},u,{mediaType:a.c,native:(t=l.native,i=t.assets,o=t.link,s=t.imptrackers,d=t.jstracker,c={clickUrl:o.url,clickTrackers:o.clicktrackers||[],impressionTrackers:s||[],javascriptTrackers:d?[d]:[]},(i||[]).forEach((function(e){var t=e.id,n=e.img,i=e.data,o=e.title,a=_[t];a&&(Object(r.isEmpty)(o)?Object(r.isEmpty)(n)?Object(r.isEmpty)(i)||(c[a]=i.value):c[a]={url:n.url,height:n.h,width:n.w}:c.title=o.text)})),c)}))}})),n}},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tests={headless_chrome:function(){return!(!self.navigator||!self.navigator.webdriver)},selenium:function(){var e=!1;window&&document&&["webdriver"in window,"_Selenium_IDE_Recorder"in window,"callSelenium"in window,"_selenium"in window,"__webdriver_script_fn"in document,"__driver_evaluate"in document,"__webdriver_evaluate"in document,"__selenium_evaluate"in document,"__fxdriver_evaluate"in document,"__driver_unwrapped"in document,"__webdriver_unwrapped"in document,"__selenium_unwrapped"in document,"__fxdriver_unwrapped"in document,"__webdriver_script_func"in document,null!==document.documentElement.getAttribute("selenium"),null!==document.documentElement.getAttribute("webdriver"),null!==document.documentElement.getAttribute("driver")].forEach((function(t){!0===t&&(e=!0)}));return e}}}var t,n,r;return t=e,(n=[{key:"doTests",value:function(){for(var e=!1,t=0,n=Object.keys(this.tests);t<n.length;t++){var r=n[t];!0===this.tests[r]()&&(e=!0)}return e}}])&&c(t.prototype,n),r&&c(t,r),e}();Object(i.registerBidder)(g),window.pbjs.installedModules.push("datablocksBidAdapter")}},[288]);