pbjsChunk([258],{390:function(t,e,a){t.exports=a(391)},391:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"HALOID_LOCAL_NAME",(function(){return d})),a.d(e,"RTD_LOCAL_NAME",(function(){return f})),a.d(e,"storage",(function(){return O})),e.addRealTimeData=g,e.getRealTimeData=m,e.getRealTimeDataAsync=h,a.d(e,"haloSubmodule",(function(){return v}));var r=a(4),n=a(3),i=a(14),o=a(7),c=a(8),s=a(0);function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t}).apply(this,arguments)}var l="halo",d="auHaloId",f="auHaloRtd",O=Object(o.b)(561,l);function p(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),r=1;r<e;r++)a[r-1]=arguments[r];if(!a.length)return t;var n=a.shift();if(Object(s.isPlainObject)(t)&&Object(s.isPlainObject)(n)){var i=function(e){Object(s.isPlainObject)(n[e])?(t[e]||u(t,b({},e,{})),p(t[e],n[e])):Object(s.isArray)(n[e])&&t[e]?Object(s.isArray)(t[e])&&n[e].forEach((function(a){for(var r=1,n=0;n<t[e].length;n++)if(Object(s.deepEqual)(t[e][n],a)){r=0;break}r&&t[e].push(a)})):u(t,b({},e,n[e]))};for(var o in n)i(o)}return p.apply(void 0,[t].concat(a))}function j(t,e){return Object(s.isPlainObject)(t)||(t={}),Object(s.isPlainObject)(e)||(e={}),p(t,e)}function g(t,e,a){if(a.params&&a.params.handleRtd)a.params.handleRtd(t,e,a,n.b);else{if(Object(s.isPlainObject)(e.ortb2)){var r=n.b.getConfig("ortb2")||{};n.b.setConfig({ortb2:j(r,e.ortb2)})}if(Object(s.isPlainObject)(e.ortb2b)){var i=n.b.getBidderConfig();Object.keys(e.ortb2b).forEach((function(t){var a=e.ortb2b[t]||{},r={};Object(s.isPlainObject)(i[t])&&(r=i[t]),n.b.setBidderConfig({bidders:[t],config:j(r,a)})}))}}}function m(t,e,a,r){if(a&&Object(s.isPlainObject)(a.params)&&a.params.segmentCache){var n=O.getDataFromLocalStorage(f);if(n){var o=JSON.parse(n);if(o.rtd)return g(t,o.rtd,a),void e()}}var c,b,u,l=Object(i.a)().getUserIds(),p=O.getDataFromLocalStorage(d);if(Object(s.isStr)(p))Object(i.a)().refreshUserIds({submoduleNames:"haloId"}),l.haloId=p,h(t,e,a,r,l);else{var j=document.createElement("script");j.type="text/javascript",window.pubHaloCb=function(n){l.haloId=n,h(t,e,a,r,l)};var m=a.params&&a.params.haloIdUrl;j.src=(c=m,b="https://id.halo.ad.gt/api/v1/haloid",u=l,Object(s.isFn)(c)?c(u):Object(s.isStr)(c)?c:b),document.getElementsByTagName("head")[0].appendChild(j)}}function h(t,e,a,i,o){var c,b,u,l,d,p,j={};Object(s.isPlainObject)(a)&&(c=a,b="params.requestParams.ortb2",u=n.b.getConfig("ortb2"),l=b.split("."),d=l.pop(),(p=l.reduce((function(t,e){return t[e]=t[e]||{}}),c))[d]=p[d]||u,j=a.params.requestParams),Object(s.isPlainObject)(window.pubHaloPm)&&(j.pubHaloPm=window.pubHaloPm);Object(r.a)("https://seg.halo.ad.gt/api/v1/rtd",{success:function(r,n){if(200===n.status)try{var i=JSON.parse(r);i&&i.rtd?(g(t,i.rtd,a),e(),O.setDataInLocalStorage(f,JSON.stringify(i))):e()}catch(t){Object(s.logError)("unable to parse audigent segment data"),e()}else 204===n.status&&e()},error:function(){e(),Object(s.logError)("unable to get audigent segment data")}},JSON.stringify({userIds:o,config:j}),{contentType:"application/json"})}var v={name:l,getBidRequestData:m,init:function(t,e){return!0}};Object(c.e)("realTimeData",v),window.pbjs.installedModules.push("haloRtdProvider")}},[390]);