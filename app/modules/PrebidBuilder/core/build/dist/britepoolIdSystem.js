pbjsChunk([333],{219:function(e,r,t){e.exports=t(220)},220:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"britepoolIdSubmodule",(function(){return u}));var o=t(0),n=t(4),i=t(8);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var u={name:"britepoolId",decode:function(e){return e&&"string"==typeof e.primaryBPID?{britepoolid:e.primaryBPID}:null},getId:function(e,r){var t=e&&e.params||{},i=u.createParams(t,r),a=i.params,p=i.headers,l=i.url,c=i.getter,s=i.errors,f=null;return"function"==typeof c&&"function"!=typeof(f=c(a))?{id:u.normalizeValue(f)}:(Object(o.isEmpty)(a)&&Object(o.triggerPixel)("https://px.britepool.com/new?partner_id=t"),{callback:function(e){if(s.length>0)return s.forEach((function(e){return Object(o.logError)(e)})),void e();if(f)try{f((function(r){e(u.normalizeValue(r))}))}catch(r){""!==r&&Object(o.logError)(r),e()}else Object(n.a)(l,{success:function(r){var t=u.normalizeValue(r);e(t?{primaryBPID:t.primaryBPID}:null)},error:function(r){""!==r&&Object(o.logError)(r),e()}},JSON.stringify(a),{customHeaders:p,contentType:"application/json",method:"POST",withCredentials:!0})}})},createParams:function(e,r){var t=r&&"boolean"==typeof r.gdprApplies&&r.gdprApplies?r.consentString:void 0,o=[],n={},i=p({},e,"undefined"!=typeof britepool_pubparams?britepool_pubparams:{});if(i.getter){if("function"!=typeof i.getter)return o.push("userIdTargeting - britepoolId submodule requires getter to be a function"),{errors:o}}else i.api_key&&(n["x-api-key"]=i.api_key);var a=i.url||"https://api.britepool.com/v1/britepool/id".concat(t?"?gdprString="+encodeURIComponent(t):""),u=i.getter;return delete i.api_key,delete i.url,delete i.getter,{params:i,headers:n,url:a,getter:u,errors:o}},normalizeValue:function(e){var r=null;if("object"===a(e))r=e;else if("string"==typeof e)try{r=JSON.parse(e)}catch(e){Object(o.logError)(e)}return r}};Object(i.e)("userId",u),window.pbjs.installedModules.push("britepoolIdSystem")}},[219]);