pbjsChunk([221],{489:function(e,t,o){e.exports=o(490)},490:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o.d(t,"storage",(function(){return u})),o.d(t,"lotamePanoramaIdSubmodule",(function(){return S}));var a,r=o(0),i=o(4),n=o(8),c=o(7),s=o(9),d="panoramaId",p="".concat(d,"_expiry"),l="_cc_id",v="lotamePanoramaId",m=864e5,u=Object(c.b)(95,v);function g(e){var t=null;if(u.cookiesAreEnabled()&&(t=u.getCookie(e,void 0)),u.hasLocalStorage()&&null===t){var o=u.getDataFromLocalStorage("".concat(e,"_exp"),void 0);(""===o||o&&new Date(o).getTime()-Date.now()>0)&&(t=u.getDataFromLocalStorage(e,void 0))}return t}function b(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(r.timestamp)()+7*m;if(e&&t){var i=new Date(o).toUTCString();u.cookiesAreEnabled()&&u.setCookie(e,t,i,"Lax",a,void 0),u.hasLocalStorage()&&(u.setDataInLocalStorage("".concat(e,"_exp"),String(o),void 0),u.setDataInLocalStorage(e,t,void 0))}}function f(e){if(e){if(u.cookiesAreEnabled()){var t=new Date(0).toUTCString();u.setCookie(e,"",t,"Lax",a,void 0)}u.hasLocalStorage()&&u.removeDataFromLocalStorage(e,void 0)}}var S={name:v,gvlid:95,decode:function(e,t){return Object(r.isStr)(e)?{lotamePanoramaId:e}:void 0},getId:function(e,t,o){a=S.findRootDomain();var n=(e&&e.params||{}).clientId,c=!Object(r.isEmpty)(n),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:g(d),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){var o=g("".concat(p,"_").concat(e));Object(r.isStr)(o)&&(t.clientExpiryTimestampMs=parseInt(o,10))}var a=g(p);Object(r.isStr)(a)&&(t.expiryTimestampMs=parseInt(a,10))}catch(e){Object(r.logError)(e)}return t}(n),m=Date.now()>v.expiryTimestampMs;if(c&&Date.now()<v.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!m)return{id:v.data};var _,O=u.cookiesAreEnabled()?u.getCookie(l,void 0):u.hasLocalStorage()?u.getDataFromLocalStorage(l,void 0):void 0,j=s.uspDataHandler.getConsentData();void 0===j||Object(r.isEmpty)(j)||Object(r.isEmptyStr)(j)||(_=j),_||(_=g("us_privacy"));return{callback:function(e){var o,s={};O&&(s.fp=O),t&&(Object(r.isBoolean)(t.gdprApplies)&&(s.gdpr_applies=t.gdprApplies),o=t.consentString),o||(o=g("eupubconsent-v2")),o||(o=g("euconsent-v2")),o&&(s.gdpr_consent=o),_&&(s.us_privacy=_),c&&(s.c=n);var v=Object(r.buildUrl)({protocol:"https",host:"id.crwdcntrl.net",pathname:"/id",search:Object(r.isEmpty)(s)?void 0:s});Object(i.a)(v,(function(t){var o;if(t)try{var i=JSON.parse(t),s=!(Object(r.isArray)(i.errors)&&-1!==i.errors.indexOf(111));if(c)if(s)f("".concat(p,"_").concat(n));else if(Object(r.isStr)(i.no_consent)&&"CLIENT"===i.no_consent)return b("".concat(p,"_").concat(n),i.expiry_ts,i.expiry_ts),void e();b(p,i.expiry_ts,i.expiry_ts),Object(r.isStr)(i.profile_id)?(s&&function(e){if(u.cookiesAreEnabled()){var t=new Date(Object(r.timestamp)()+23328e6).toUTCString();u.setCookie(l,e,t,"Lax",a,void 0)}u.hasLocalStorage()&&u.setDataInLocalStorage(l,e,void 0)}(i.profile_id),Object(r.isStr)(i.core_id)?(b(d,i.core_id,i.expiry_ts),o=i.core_id):f(d)):(s&&f(l),f(d))}catch(e){Object(r.logError)(e)}e(o)}),void 0,{method:"GET",withCredentials:!0})}}}};Object(n.e)("userId",S),window.pbjs.installedModules.push("lotamePanoramaIdSystem")}},[489]);