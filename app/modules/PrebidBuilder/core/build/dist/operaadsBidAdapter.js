pbjsChunk([187],{571:function(e,r,t){e.exports=t(572)},572:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"spec",(function(){return A}));var i=t(0),a=t(1),n=t(3),c=t(2),s=t(13),d=t(17);function o(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,c=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){s=!0,n=e},f:function(){try{c||null==t.return||t.return()}finally{if(s)throw n}}}}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,i=new Array(r);t<r;t++)i[t]=e[t];return i}var p="operaads",l="https://s.adx.opera.com/ortb/v2/",b="https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",m="USD",g={SIZE:[300,250]},f={PROTOCOLS:[2,3,5,6],MIMES:["video/mp4"],PLAYBACK_METHODS:[1,2,3,4],DELIVERY:[1],API:[1,2,5],SIZE:[640,480]},O={ICON:1,MAIN:3},y={TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},v={SPONSORED:1,DESC:2,CTA_TEXT:12},h={TITLE:90,BODY:140,SPONSORED:25,CTA:20},A={code:p,aliases:["opera"],supportedMediaTypes:[c.b,c.d,c.c],isBidRequestValid:function(e){return e?e.params?e.params.placementId?e.params.endpointId?!!e.params.publisherId||(Object(i.logWarn)(p,"bid.params.publisherId is required."),!1):(Object(i.logWarn)(p,"bid.params.endpointId is required."),!1):(Object(i.logWarn)(p,"bid.params.placementId is required."),!1):(Object(i.logWarn)(p,"bid.params is required."),!1):(Object(i.logWarn)(p,"Invalid bid,",e),!1)},buildRequests:function(e,r){return e.map((function(e){return function(e,r){var t=Object(i.deepAccess)(r,"refererInfo.referer"),a={id:r.auctionId,tmax:r.timeout||n.b.getConfig("bidderTimeout"),test:n.b.getConfig("debug")?1:0,imp:j(e),device:R(),site:{id:String(Object(i.deepAccess)(e,"params.publisherId")),domain:E(t),page:t,ref:window.self===window.top?document.referrer:""},at:1,bcat:w(e),cur:[m],regs:{coppa:n.b.getConfig("coppa")?1:0,ext:{}},user:{buyeruid:T(e)}},c=Object(i.deepAccess)(r,"gdprConsent");c&&c.gdprApplies&&(Object(i.deepSetValue)(a,"regs.ext.gdpr",1),Object(i.deepSetValue)(a,"user.ext.consent",c.consentString));var s=Object(i.deepAccess)(r,"uspConsent");s&&Object(i.deepSetValue)(a,"regs.ext.us_privacy",s);var d=Object(i.deepAccess)(e,"userIdAsEids",[]);d.length>0&&Object(i.deepSetValue)(a,"user.eids",d);return{method:"POST",url:l+String(Object(i.deepAccess)(e,"params.publisherId"))+"?ep="+String(Object(i.deepAccess)(e,"params.endpointId")),data:JSON.stringify(a),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":2.5}},originalBidRequest:e}}(e,r)}))},interpretResponse:function(e,r){var t,a=[];return(t=e.body)&&t.seatbid&&Object(i.isArray)(t.seatbid)&&t.seatbid.forEach((function(e){e.bid&&Object(i.isArray)(e.bid)&&(a=e.bid.map((function(e){return function(e,r,t){var a,n=c.b;if(/VAST\s+version/.test(e.adm))n=c.d;else{var o;try{o=JSON.parse(e.adm)}catch(e){o=null}o&&Object(i.isPlainObject)(o.native)&&(n=c.c,a=o.native)}var u=t.cur||m,l=(parseFloat(e.price)||0).toFixed(2),g=Object(i.deepAccess)(e,"cat",[]),O={requestId:e.impid,cpm:l,currency:u,mediaType:n,ttl:300,creativeId:e.crid||e.id,netRevenue:true,nurl:e.nurl,lurl:e.lurl,meta:{mediaType:n,primaryCatId:g[0],secondaryCatIds:g.slice(1)}};e.adomain&&Object(i.isArray)(e.adomain)&&e.adomain.length>0&&(O.meta.advertiserDomains=e.adomain,O.meta.clickUrl=e.adomain[0]);switch(n){case c.d:var v=I(Object(i.deepAccess)(r,"mediaTypes.video.playerSize",f.SIZE))[0];O.vastXml=e.adm,O.width=e.w||v[0],O.height=e.h||v[1],Object(i.deepAccess)(r,"mediaTypes.video.context")===d.b&&(O.adResponse={content:O.vastXml,width:O.width,height:O.height,player_width:v[0],player_height:v[1]},O.renderer=function(e){var r=Object(i.deepAccess)(e,"renderer"),t=Object(i.deepAccess)(e,"mediaTypes.video.renderer"),a=b,n={},c=function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse})}))};t?(a=t.url,n=t.options,c=t.render):r&&(a=r.url,n=r.options,c=r.render);var d=s.a.install({id:e.bidId,url:a,loaded:!1,config:n,adUnitCode:e.adUnitCode});try{d.setRender(c)}catch(e){Object(i.logError)(p,"Error calling setRender on renderer",e)}return d}(r));break;case c.c:O.native=function(e,r,t){var a={},n=Object(i.deepAccess)(e,"link.url");n&&Object(i.isStr)(n)&&(a.clickUrl=decodeURIComponent(n));var c,s=Object(i.deepAccess)(e,"link.clicktrackers");s&&Object(i.isArray)(s)&&(a.clickTrackers=s.filter(Boolean).map((function(e){return decodeURIComponent(e).replace(/\$\{AUCTION_PRICE\}/g,t).replace(/\$\{AUCTION_CURRENCY\}/g,r)})));e.imptrackers&&Object(i.isArray)(e.imptrackers)&&(a.impressionTrackers=e.imptrackers.filter(Boolean).map((function(e){return decodeURIComponent(e).replace(/\$\{AUCTION_PRICE\}/g,t).replace(/\$\{AUCTION_CURRENCY\}/g,r)})));e.jstracker&&Object(i.isStr)(e.jstracker)&&(a.javascriptTrackers=[e.jstracker]);(c=e.assets)&&Object(i.isArray)(c)&&c.forEach((function(e){switch(e.id){case y.TITLE:var r=Object(i.deepAccess)(e,"title.text");r&&(a.title=r);break;case y.IMAGE:e.img&&(a.image={url:decodeURIComponent(e.img.url),width:e.img.w,height:e.img.h});break;case y.ICON:e.img&&(a.icon={url:decodeURIComponent(e.img.url),width:e.img.w,height:e.img.h});break;case y.BODY:var t=Object(i.deepAccess)(e,"data.value");t&&(a.body=t);break;case y.SPONSORED:var n=Object(i.deepAccess)(e,"data.value");n&&(a.sponsoredBy=n);break;case y.CTA:var c=Object(i.deepAccess)(e,"data.value");c&&(a.cta=c)}}));return a}(a,u,l);break;default:O.ad=e.adm,O.width=e.w,O.height=e.h}return O}(e,r.originalBidRequest,t)})))})),a},getUserSyncs:function(e,r,t,a){if("iframeEnabled"in e&&e.iframeEnabled)return[{type:"iframe",url:"https://s.adx.opera.com/usersync/page"}];if("pixelEnabled"in e&&e.pixelEnabled){var n=Object(i.deepAccess)(r,"0.body.pixels");if(Array.isArray(n)){var c,s=[],d=o(n);try{for(d.s();!(c=d.n()).done;){var u=c.value;s.push({type:"image",url:u})}}catch(e){d.e(e)}finally{d.f()}return s}}return[]},onTimeout:function(e){},onBidWon:function(e){var r,t;e&&Object(i.isStr)(e.nurl)&&(Object.prototype.hasOwnProperty.call(e,"originalCpm")?(r=e.originalCpm,t=e.originalCurrency):(r=e.cpm,t=e.currency),Object(i.triggerPixel)(e.nurl.replace(/\$\{AUCTION_PRICE\}/g,r).replace(/\$\{AUCTION_CURRENCY\}/g,t)))},onSetTargeting:function(e){}};function j(e){var r,t,a,n,s,o=[],u={id:e.bidId,tagid:String(Object(i.deepAccess)(e,"params.placementId"))};if(a=Object(i.deepAccess)(e,"mediaTypes.banner"))t=I(a.sizes||g.SIZE)[0],u.banner={w:t[0],h:t[1],pos:0},r=c.b;else if(n=Object(i.deepAccess)(e,"mediaTypes.video"))t=I(n.playerSize||f.SIZE)[0],u.video={w:t[0],h:t[1],pos:0,mimes:n.mimes||f.MIMES,protocols:n.protocols||f.PROTOCOLS,startdelay:"number"==typeof n.startdelay?n.startdelay:0,skip:"number"==typeof n.skip?n.skip:0,playbackmethod:n.playbackmethod||f.PLAYBACK_METHODS,delivery:n.delivery||f.DELIVERY,api:n.api||f.API,placement:n.context===d.b?3:1},r=c.d;else if(s=Object(i.deepAccess)(e,"mediaTypes.native")){var p={native:{ver:"1.1",assets:C(e.nativeParams||s)}};u.native={ver:"1.1",request:JSON.stringify(p)},r=c.c}var l=function(e,r){var t=r.mediaType,a=void 0===t?"*":t,n=r.size,c=void 0===n?"*":n;if(Object(i.isFn)(e.getFloor)){var s=e.getFloor({currency:m,mediaType:a,size:c});if(Object(i.isPlainObject)(s)&&!isNaN(s.floor))return{currency:s.currency||m,floor:s.floor}}return{currency:m,floor:0}}(e,{mediaType:r||"*",size:t||"*"});return u.bidfloor=l.floor,u.bidfloorcur=l.currency,r&&o.push(u),o}function I(e){return 2!==e.length||Object(i.isArray)(e[0])?e:[e]}function C(e){var r=[];return e.title&&r.push({id:y.TITLE,required:e.title.required?1:0,title:{len:e.title.len||h.TITLE}}),e.image&&r.push({id:y.IMAGE,required:e.image.required?1:0,img:S(e.image,O.MAIN)}),e.icon&&r.push({id:y.ICON,required:e.icon.required?1:0,img:S(e.icon,O.ICON)}),e.sponsoredBy&&r.push({id:y.SPONSORED,required:e.sponsoredBy.required?1:0,data:{type:v.SPONSORED,len:e.sponsoredBy.len|h.SPONSORED}}),e.body&&r.push({id:y.BODY,required:e.body.required?1:0,data:{type:v.DESC,len:e.body.len||h.BODY}}),e.cta&&r.push({id:y.CTA,required:e.cta.required?1:0,data:{type:v.CTA_TEXT,len:e.cta.len||h.CTA}}),r}function S(e,r){var t={type:r};if(e.aspect_ratios){var i=e.aspect_ratios[0],a=i.min_width||100;t.wmin=a,t.hmin=a/i.ratio_width*i.ratio_height}if(e.sizes){var n=I(e.sizes)[0];t.w=n[0],t.h=n[1]}return t}function T(e){var r=Object(i.deepAccess)(e,"userId.sharedid.id");if(r)return r;for(var t=0,a=["pubcid","tdid"];t<a.length;t++){var n=a[t],c=Object(i.deepAccess)(e,"userId.".concat(n));if(c)return c}return Object(i.generateUUID)()}function E(e){var r;(r=n.b.getConfig("publisherDomain"))||(r=Object(i.parseUrl)(e).hostname);return r.replace(/^https?:\/\/([\w\-\.]+)(?::\d+)?/,"$1")}function w(e){var r=[],t=Object(i.deepAccess)(e,"params.bcat");return t&&(r=r.concat(t)),r}function R(){var e,r=n.b.getConfig("device")||{};return r.w=r.w||window.screen.width,r.h=r.h||window.screen.height,r.ua=r.ua||navigator.userAgent,r.language=r.language||((e=navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)?e.split("-")[0]:"en"),r.dnt="number"==typeof r.dnt?r.dnt:Object(i.getDNT)()?1:0,r}Object(a.registerBidder)(A),window.pbjs.installedModules.push("operaadsBidAdapter")}},[571]);