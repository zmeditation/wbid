pbjsChunk([231],{459:function(e,r,t){e.exports=t(460)},460:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t.d(r,"isBidRequestValid",(function(){return u})),t.d(r,"buildRequests",(function(){return s})),t.d(r,"interpretResponse",(function(){return p})),t.d(r,"onBidWon",(function(){return f})),t.d(r,"onTimeout",(function(){return l})),t.d(r,"spec",(function(){return R}));var n=t(0),i=t(3),o=t(1),a=t(2),c=t(18),d="USD",u=function(e){return!!(e&&e.bidId&&e.params&&e.params.placementId)},s=function(e,r){return{method:"POST",url:"https://bid.essrtb.com/bid/prebid_rtb_call",data:b(e,r),options:{contentType:"application/json"}}},p=function(e){var r=i.b.getConfig("currency.adServerCurrency")||d,t=e.body,n=[];return t&&t.seatbid.forEach((function(e){e.bid.forEach((function(e){var i=e.adm.replace(/\${AUCTION_PRICE_CURRENCY}/g,r);n.push({requestId:e.impid,cpm:e.price,currency:t.cur,width:e.w,height:e.h,creativeId:e.crid,dealId:e.dealid,netRevenue:!0,ttl:600,ad:i,nurl:e.nurl,meta:{advertiserDomains:e.adomain}})}))})),n},f=function(e){var r=e.cpm||0,t=e.currency||d,o=Object(n.deepAccess)(e,"adserverTargeting.hb_pb",0),a=i.b.getConfig("currency.adServerCurrency")||d;if(Object(n.isStr)(e.nurl)&&""!==e.nurl){var c=Object(n.replaceAuctionPrice)(e.nurl,r).replace(/\${AUCTION_PRICE_CURRENCY}/g,t).replace(/\${AD_SERVER_PRICE}/g,o).replace(/\${AD_SERVER_PRICE_CURRENCY}/g,a);Object(n.triggerPixel)(c)}},l=function(e){if(Object(n.isArray)(e)){var r=Object(c.a)(),t=r&&r.referer?r.referer:window.location.href;e.forEach((function(e){var r=Object(n.parseQueryStringParameters)({ad_unit_code:e.adUnitCode,auction_id:e.auctionId,bid_id:e.bidId,timeout:e.timeout,placement_id:Object(n.deepAccess)(e,"params.0.placementId"),page_url:t}),i="".concat("https://bid.essrtb.com/notify/prebid_timeout","?").concat(r);Object(n.triggerPixel)(i)}))}};function b(e,r){var t,n=e.map(m),o=r.timeout||i.b.getConfig("bidderTimeout")||1e3,a=r.refererInfo&&r.refererInfo.referer?r.refererInfo.referer:window.location.href,c={id:r.auctionId,at:1,tmax:o,cur:[d],imp:n,device:{devicetype:g(),geo:v(e[0])},site:{page:a},test:(t=e[0],t.params.test?1:0)};return JSON.stringify(c)}function m(e){var r=function(e){var r=Object(n.deepAccess)(e,"mediaTypes.banner.sizes",e.sizes);if(Object(n.isArray)(r)&&r.length>0)return r;return[[0,0]]}(e),t=r[0],i=function(e,r){if("function"==typeof e.getFloor){var t=0===r[0]&&0===r[1]?"*":r;return e.getFloor({currency:d,mediaType:a.b,size:t})}return{currency:d,floor:I(e)}}(e,t);return{id:e.bidId,banner:{format:y(r),w:t[0],h:t[1],ext:{kobler:{pos:h(e)}}},tagid:e.params.placementId,bidfloor:i.floor,bidfloorcur:i.currency,pmp:C(e)}}function g(){var e=Object(n.getWindowSelf)().navigator.userAgent;return/(tablet|ipad|playbook|silk|android 3.0|xoom|sch-i800|kindle)|(android(?!.*mobi))/i.test(e.toLowerCase())?5:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series([46])0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e.toLowerCase())?4:2}function v(e){return e.params.zip?{zip:e.params.zip}:{}}function y(e){return e.map((function(e){return{w:e[0],h:e[1]}}))}function h(e){return parseInt(e.params.position)||0}function I(e){return parseFloat(e.params.floorPrice)||0}function C(e){return e.params.dealIds?{deals:e.params.dealIds.map((function(e){return{id:e}}))}:{}}var R={code:"kobler",supportedMediaTypes:[a.b],isBidRequestValid:u,buildRequests:s,interpretResponse:p,onBidWon:f,onTimeout:l};Object(o.registerBidder)(R),window.pbjs.installedModules.push("koblerBidAdapter")}},[459]);