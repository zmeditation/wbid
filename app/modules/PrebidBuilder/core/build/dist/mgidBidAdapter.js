pbjsChunk([207],{525:function(e,t,r){e.exports=r(526)},526:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"storage",(function(){return l})),r.d(t,"spec",(function(){return v}));var i=r(0),a=r(1),s=r(2),n=r(3),c=r(7),d="USD",o="mgid",l=Object(c.b)(358,o),u={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},DESC:{ID:5,KEY:"data",TYPE:2},PRICE:{ID:6,KEY:"price",TYPE:6},SALEPRICE:{ID:7,KEY:"saleprice",TYPE:7},DISPLAYURL:{ID:8,KEY:"displayurl",TYPE:11},CTA:{ID:9,KEY:"cta",TYPE:12},BODY:{ID:10,KEY:"body",TYPE:2},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1}},g=1,b=3,p=!1,m=[{id:u.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:u.TITLE.ID,required:!0},{id:u.IMAGE.ID,required:!0}],h={},f={};Object(i._each)(u,(function(e){h[e.ID]=e.KEY})),Object(i._each)(u,(function(e){f[e.KEY]=e}));var v={VERSION:"1.5",code:o,supportedMediaTypes:[s.b,s.c],reId:/^[1-9][0-9]*$/,NATIVE_ASSET_ID_TO_KEY_MAP:h,NATIVE_ASSET_KEY_TO_ASSET_MAP:f,isBidRequestValid:function(e){var t=Object(i.deepAccess)(e,"mediaTypes.banner"),r=Object(i.deepAccess)(e,"mediaTypes.native"),a=Object(i.isPlainObject)(r);if(a){var s=Object(i.deepAccess)(e,"nativeParams"),n=0;if(Object(i.isPlainObject)(s))for(var c in s){var d=s[c],o=v.NATIVE_ASSET_KEY_TO_ASSET_MAP.hasOwnProperty(c);if(o&&n++,!Object(i.isPlainObject)(d)||!o&&Object(i.deepAccess)(d,"required")){a=!1;break}}a=a&&n>0}var l=Object(i.isPlainObject)(t);if(l){var u=Object(i.deepAccess)(t,"sizes");l=Object(i.isArray)(u)&&u.length>0;for(var g=0;l&&g<u.length;g++)l=2===u[g].length}var b=Number(e.params.accountId),p=Number(e.params.placementId);return(l||a)&&Object(i.isPlainObject)(e.params)&&!!e.adUnitCode&&Object(i.isStr)(e.adUnitCode)&&(!(p>0)||0===e.params.placementId.toString().search(v.reId))&&!!b&&b>0&&0===e.params.accountId.toString().search(v.reId)},buildRequests:function(e,t){if(Object(i.logInfo)("[MGID info]: buildRequests"),0!==e.length){var r=function(){var e,t,r,i,a,s,n;for(e=window,t=e.document,r=t.location.href,i=t.referrer,a=0,n=new Date;e!==e.parent;)try{r=(s=e.parent).location.href,i=s.document.referrer,e=s}catch(t){a=top!==e.parent?2:1;break}return{location:r,referrer:i||"",masked:a,wWidth:e.innerWidth,wHeight:e.innerHeight,date:n.toUTCString(),timeOffset:n.getTimezoneOffset()}}(),a=r.location||Object(i.deepAccess)(t,"refererInfo.referer")||Object(i.deepAccess)(t,"refererInfo.canonicalUrl"),c=Object(i.parseUrl)(a).hostname,o=function(e){if("localhost"==e)return"localhost";var t=null;try{var r=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=r&&r.length>0){t=r[0];for(var i=1;i<r.length;i++)r[i].length>t.length&&(t=r[i])}}catch(e){t=null}return t}(c)||c,u=O(e,"params.accountId"),g=function(e){try{return l.getDataFromLocalStorage(e)}catch(e){return null}}("mgMuidn"),b=(O(e,"params.bidUrl")||"https://prebid.mgid.com/prebid/")+u;Object(i.isStr)(g)&&g.length>0&&(b+="?muid="+g);var m=O(e,"params.currency")||O(e,"params.cur")||n.b.getConfig("currency.adServerCurrency")||d,h="https:"===window.location.protocol?1:0,f=[];if(e.forEach((function(e){var t=Object(i.deepAccess)(e,"params.placementId")||0;t=t?t+"/"+e.adUnitCode:e.adUnitCode;var r={id:e.bidId,tagid:t,secure:h},a=function(e,t){var r=Object(i.getBidIdParameter)("bidfloor",e.params)||Object(i.getBidIdParameter)("bidFloor",e.params)||0,a=t;if(!r&&Object(i.isFn)(e.getFloor)){var s=e.getFloor({currency:"*",mediaType:"*",size:"*"});Object(i.isPlainObject)(s)&&Object(i.isNumber)(s.floor)&&(s.currency||a===d||(s.currency=d),s.currency&&a!==s.currency&&(t=s.currency),r=s.floor)}a===t&&(t="");return{floor:r,cur:t}}(e,m);for(var n in a.floor&&(r.bidfloor=a.floor),a.cur&&(r.bidfloorcur=a.cur),e.mediaTypes)switch(n){case s.b:r.banner=E(e),f.push(r);break;case s.c:var c=T(e.nativeParams);p||(r.native={request:c},f.push(r))}})),0!==f.length){var j={id:Object(i.deepAccess)(t,"bidderRequestId"),site:{domain:o,page:a},cur:[m],geo:{utcoffset:r.timeOffset},device:{ua:navigator.userAgent,js:1,dnt:"yes"===navigator.doNotTrack||"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:I()},ext:{mgid_ver:v.VERSION,prebid_ver:"6.10.0-pre"},imp:f};return t&&t.gdprConsent&&(j.user={ext:{consent:t.gdprConsent.consentString}},j.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0}}),r.referrer&&(j.site.ref=r.referrer),Object(i.logInfo)("[MGID info]: buildRequest:",j),{method:"POST",url:b,data:JSON.stringify(j)}}}},interpretResponse:function(e,t){if(Object(i.logInfo)("[MGID info]: interpretResponse",e),null!=e&&null!=e.body&&""!==e.body&&Object(i.isArray)(e.body.seatbid)&&e.body.seatbid.length){var r=[],a=Object(i.deepAccess)(e.body,"ext.muidn");return Object(i.isStr)(a)&&a.length>0&&function(e,t){try{l.setDataInLocalStorage(e,t)}catch(e){return null}}("mgMuidn",a),e.body.seatbid.forEach((function(t){t.bid.forEach((function(t){var a=function(e,t){Object(i.isStr)(t)&&""!==t||(t=d);var r={requestId:e.impid,ad:e.adm,cpm:e.price,creativeId:e.adid,currency:t,dealId:e.dealid||"",width:e.w,height:e.h,mediaType:"banner",netRevenue:!0,ttl:e.ttl||300,nurl:e.nurl||"",burl:e.burl||"",isBurl:Object(i.isStr)(e.burl)&&e.burl.length>0,meta:{advertiserDomains:Object(i.isArray)(e.adomain)&&e.adomain.length>0?e.adomain:[]}};switch(function(e,t){"native"===Object(i.deepAccess)(e,"ext.crtype")?t.mediaType=s.c:t.mediaType=s.b}(e,r),r.mediaType){case s.b:break;case s.c:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm)}catch(e){return void Object(i.logWarn)("[MGID warn]: Error: Cannot parse native response for ad response: "+t.adm)}if(r&&r.native&&r.native.assets&&r.native.assets.length>0){t.mediaType=s.c;for(var a=0,n=r.native.assets.length;a<n;a++)switch(r.native.assets[a].id){case u.TITLE.ID:t.native.title=r.native.assets[a].title&&r.native.assets[a].title.text;break;case u.IMAGE.ID:t.native.image={url:r.native.assets[a].img&&r.native.assets[a].img.url,height:r.native.assets[a].img&&r.native.assets[a].img.h,width:r.native.assets[a].img&&r.native.assets[a].img.w};break;case u.ICON.ID:t.native.icon={url:r.native.assets[a].img&&r.native.assets[a].img.url,height:r.native.assets[a].img&&r.native.assets[a].img.h,width:r.native.assets[a].img&&r.native.assets[a].img.w};break;case u.SPONSOREDBY.ID:case u.SPONSORED.ID:case u.PRICE:case u.SALEPRICE.ID:case u.DESC.ID:case u.BODY.ID:case u.DISPLAYURL.ID:case u.CTA.ID:t.native[v.NATIVE_ASSET_ID_TO_KEY_MAP[r.native.assets[a].id]]=r.native.assets[a].data&&r.native.assets[a].data.value}t.native.clickUrl=r.native.link&&r.native.link.url,t.native.clickTrackers=r.native.link&&r.native.link.clicktrackers||[],t.native.impressionTrackers=r.native.imptrackers||[],t.native.jstracker=r.native.jstracker||[],t.width=0,t.height=0}}}(e,r)}return r}(t,e.body.cur);a.mediaType===s.c&&Object(i.isEmpty)(a.native)||r.push(a)}))})),Object(i.logInfo)("[MGID info]: interpretedResponse",r),r}},onBidWon:function(e){var t=Object(i.deepAccess)(e,"adserverTargeting.hb_pb")||"";Object(i.isStr)(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,t),Object(i.triggerPixel)(e.nurl)),e.isBurl&&(e.mediaType===s.b?e.ad=e.ad.replace(/\${AUCTION_PRICE}/,t):(e.burl=e.burl.replace(/\${AUCTION_PRICE}/,t),Object(i.triggerPixel)(e.burl))),Object(i.logInfo)("[MGID info]: onBidWon")},getUserSyncs:function(e,t){Object(i.logInfo)("[MGID info]: getUserSyncs")}};function O(e,t){for(var r,a=0;a<e.length;a++)if(r=Object(i.deepAccess)(e[a],t))return r}function I(){var e=navigator.language?"language":"userLanguage",t=navigator[e].split("-")[0];return 2===t.length||3===t.length?t:""}function E(e){var t=Object(i.deepAccess)(e,"mediaTypes.banner.sizes"),r=[];if(t.length>1)for(var a=0;a<t.length;a++)2===t[a].length&&r.push({w:t[a][0],h:t[a][1]});var s={w:t&&t[0][0],h:t&&t[0][1]};r.length&&(s.format=r);var n=Object(i.deepAccess)(e,"mediaTypes.banner.pos")||0;return n&&(s.pos=n),s}function T(e){var t={plcmtcnt:1,assets:[]};for(var r in e){var a={};if(e.hasOwnProperty(r)&&!(t.assets&&t.assets.length>0&&t.assets.hasOwnProperty(r)))switch(r){case u.TITLE.KEY:a={id:u.TITLE.ID,required:e[r].required?1:0,title:{len:e[r].len||e[r].length||80}};break;case u.IMAGE.KEY:var s=e[r].wmin||e[r].minimumWidth||(Object(i.isArray)(e[r].minsizes)&&e[r].minsizes.length>0?e[r].minsizes[0]:0),n=e[r].hmin||e[r].minimumHeight||(Object(i.isArray)(e[r].minsizes)&&e[r].minsizes.length>1?e[r].minsizes[1]:0);a={id:u.IMAGE.ID,required:e[r].required?1:0,img:{type:b,w:e[r].w||e[r].width||(Object(i.isArray)(e[r].sizes)&&e[r].sizes.length>0?e[r].sizes[0]:0),h:e[r].h||e[r].height||(Object(i.isArray)(e[r].sizes)&&e[r].sizes.length>1?e[r].sizes[1]:0),mimes:e[r].mimes,ext:e[r].ext}},s>0&&(a.img.wmin=s),n>0&&(a.img.hmin=n),a.img.w||(a.img.w=492),a.img.h||(a.img.h=328);break;case u.ICON.KEY:(a={id:u.ICON.ID,required:e[r].required?1:0,img:{type:g,w:e[r].w||e[r].width||(Object(i.isArray)(e[r].sizes)&&e[r].sizes.length>0?e[r].sizes[0]:0),h:e[r].h||e[r].height||(Object(i.isArray)(e[r].sizes)&&e[r].sizes.length>0?e[r].sizes[1]:0)}}).img.w||(a.img.w=50),a.img.h||(a.img.h=50);break;case u.SPONSORED.KEY:case u.SPONSOREDBY.KEY:case u.PRICE.KEY:case u.SALEPRICE.KEY:case u.DESC.KEY:case u.BODY.KEY:case u.DISPLAYURL.KEY:case u.CTA.KEY:a=j(v.NATIVE_ASSET_KEY_TO_ASSET_MAP[r],e);break;default:if(e[r].required)return void(p=!0)}a.id&&(t.assets[t.assets.length]=a)}var c=m.length,d=0;return m.forEach((function(e){for(var r=t.assets.length,a=0;a<r;a++){if(e.id===t.assets[a].id){d++;break}if(4===e.id&&11===t.assets[a].id&&Object(i.deepAccess)(t.assets[a],"data.type")===e.data.type){d++;break}}})),p=c!==d,t}function j(e,t){var r=e.KEY;return{id:e.ID,required:t[r].required?1:0,data:{type:e.TYPE,len:t[r].len,ext:t[r].ext}}}Object(a.registerBidder)(v),window.pbjs.installedModules.push("mgidBidAdapter")}},[525]);