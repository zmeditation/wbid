pbjsChunk([168],{624:function(e,r,i){e.exports=i(625)},625:function(e,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),i.d(r,"spec",(function(){return T})),i.d(r,"_checkMediaType",(function(){return O})),i.d(r,"_parseAdSlot",(function(){return v}));var s=i(0),t=i(3),a=i(1),n=i(2);function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c="0.1.0",p=void 0,u="USD",l="https://prebid.org/dev-docs/show-native-ads.html",m={gender:"",yob:"",lat:"",lon:""},h={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},g=1,f=2,b=3,E=[{id:h.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:h.TITLE.ID,required:!0},{id:h.IMAGE.ID,required:!0}],I=!1,y={},D={};Object(s._each)(h,(function(e){y[e.ID]=e.KEY})),Object(s._each)(h,(function(e){D[e.KEY]=e}));var T={code:"pwbid",gvlid:842,supportedMediaTypes:[n.b,n.c],isBidRequestValid:function(e){return!(!e.params||!e.params.siteId)&&(!!Object(s.isStr)(e.params.siteId)||(C("siteId is required for bid",e),!1))},buildRequests:function(e,r){var i;r&&r.refererInfo&&(i=r.refererInfo);var a,h=function(e){return{pageURL:e&&e.referer?e.referer:window.location.href,refURL:window.document.referrer}}(i),g=function(e){return{id:""+(new Date).getTime(),at:1,cur:[u],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{version:c}}}(h),f="",b=[];if(e.forEach((function(e){(a=Object(s.deepClone)(e)).params.adSlot=a.params.adSlot||"",v(a),(h=function(e,r){var i,t,a;for(i in m)m.hasOwnProperty(i)&&(t=e[i])&&("object"===d(a=m[i])&&(t=a.f(t,r)),Object(s.isStr)(t)?r[i]=t:C("Ignoring param : "+i+" with value : "+m[i]+", expects string-value, found "+d(t)));return r}(a.params,h)).transactionId=a.transactionId,f=a.params.currency||p,a.params.currency=f,a.params.hasOwnProperty("bcat")&&Object(s.isArray)(a.params.bcat)&&(b=b.concat(a.params.bcat));var r=function(e,r){var i,s={},a={},o="";if(s={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Y("bidFloor",e.params.bidFloor),secure:1,bidfloorcur:e.params.currency?Y("currency",e.params.currency):u},e.hasOwnProperty("mediaTypes"))for(o in e.mediaTypes)switch(o){case n.b:(i=P(e))!==p&&(s.banner=i);break;case n.c:a.request=JSON.stringify(S(e.nativeParams)),I?C("Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to "+l+" for more details."):s.native=a}else C("MediaTypes are Required for all Adunit Configs",e);return function(e,r){var i=-1;"function"!=typeof r.getFloor||t.b.getConfig("pubwise.disableFloors")||[n.b,n.c].forEach((function(s){if(e.hasOwnProperty(s)){var t=r.getFloor({currency:e.bidFloorCur,mediaType:s,size:"*"});if("object"===d(t)&&t.currency===e.bidFloorCur&&!isNaN(parseInt(t.floor))){var a=parseFloat(t.floor);i=-1==i?a:Math.min(a,i)}}}));e.bidfloor&&(i=Math.max(i,e.bidfloor));e.bidfloor=!isNaN(i)&&i>0?i:p}(s,e),s.hasOwnProperty(n.b)||s.hasOwnProperty(n.c)?s:p}(a);r&&g.imp.push(r)})),0!=g.imp.length){var E,y;-1!==window.location.href.indexOf("pubwiseTestBid=true")&&(g.test=1),a.params.isTest&&(g.test=Number(a.params.isTest)),g.site.publisher.id=a.params.siteId.trim(),g.user.gender=h.gender?h.gender.trim():p,g.user.geo={},g.user.geo.lat=Y("lat",h.lat),g.user.geo.lon=Y("lon",h.lon),g.user.yob=Y("yob",h.yob),g.device.geo=g.user.geo,g.site.page=g.site.page.trim(),g.site.domain=(E=g.site.page,(y=document.createElement("a")).href=E,y.hostname),"object"===d(t.b.getConfig("content"))&&(g.site.content=t.b.getConfig("content")),"object"===d(t.b.getConfig("device"))&&(g.device=o(g.device,t.b.getConfig("device"))),Object(s.deepSetValue)(g,"source.tid",h.transactionId),e[0].schain&&Object(s.deepSetValue)(g,"source.ext.schain",e[0].schain),r&&r.gdprConsent&&(Object(s.deepSetValue)(g,"user.ext.consent",r.gdprConsent.consentString),Object(s.deepSetValue)(g,"regs.ext.gdpr",r.gdprConsent.gdprApplies?1:0)),r&&r.uspConsent&&Object(s.deepSetValue)(g,"regs.ext.us_privacy",r.uspConsent),!0===t.b.getConfig("coppa")&&Object(s.deepSetValue)(g,"regs.coppa",1);return K("buildRequests payload",g),K("buildRequests bidderRequest",r),{method:"POST",url:"https://bid.pubwise.io/prebid",data:g,options:{contentType:"text/plain"},bidderRequest:r}}},interpretResponse:function(e,r){var i=[],t=u;K("interpretResponse request",r);var a=r.data;return e.body&&e.body.seatbid&&Object(s.isArray)(e.body.seatbid)&&(t=e.body.cur||t,e.body.seatbid.forEach((function(e){e.bid&&Object(s.isArray)(e.bid)&&e.bid.forEach((function(r){var s={requestId:r.impid,cpm:(parseFloat(r.price)||0).toFixed(2),width:r.w,height:r.h,creativeId:r.crid||r.id,currency:t,netRevenue:true,ttl:300,ad:r.adm,pw_seat:e.seat||null,pw_dspid:r.ext&&r.ext.dspid?r.ext.dspid:null,partnerImpId:r.id||""};a.imp&&a.imp.length>0&&a.imp.forEach((function(e){if(r.impid===e.id)switch(O(r.adm,s),s.mediaType){case n.b:break;case n.c:!function(e,r){if(r.native={},e.hasOwnProperty("adm")){var i="";try{i=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void C("Error: Cannot parse native reponse for ad response: "+r.adm)}if(i&&i.assets&&i.assets.length>0){r.mediaType=n.c;for(var s=0,t=i.assets.length;s<t;s++)switch(i.assets[s].id){case h.TITLE.ID:r.native.title=i.assets[s].title&&i.assets[s].title.text;break;case h.IMAGE.ID:r.native.image={url:i.assets[s].img&&i.assets[s].img.url,height:i.assets[s].img&&i.assets[s].img.h,width:i.assets[s].img&&i.assets[s].img.w};break;case h.ICON.ID:r.native.icon={url:i.assets[s].img&&i.assets[s].img.url,height:i.assets[s].img&&i.assets[s].img.h,width:i.assets[s].img&&i.assets[s].img.w};break;case h.SPONSOREDBY.ID:case h.BODY.ID:case h.LIKES.ID:case h.DOWNLOADS.ID:case h.PRICE:case h.SALEPRICE.ID:case h.PHONE.ID:case h.ADDRESS.ID:case h.DESC2.ID:case h.CTA.ID:case h.RATING.ID:case h.DISPLAYURL.ID:r.native[y[i.assets[s].id]]=i.assets[s].data&&i.assets[s].data.value}r.clickUrl=i.link&&i.link.url,r.clickTrackers=i.link&&i.link.clicktrackers||[],r.impressionTrackers=i.imptrackers||[],r.jstracker=i.jstracker||[],r.width||(r.width=0),r.height||(r.height=0)}}}(r,s)}})),s.meta={},r.ext&&r.ext.dspid&&(s.meta.networkId=r.ext.dspid),r.ext&&r.ext.advid&&(s.meta.buyerId=r.ext.advid),r.adomain&&r.adomain.length>0&&(s.meta.advertiserDomains=r.adomain,s.meta.clickUrl=r.adomain[0]),i.push(s)}))}))),i}};function O(e,r){var i="";if(e.indexOf('"ver":')>=0)try{(i=JSON.parse(e.replace(/\\/g,"")))&&i.assets&&(r.mediaType=n.c)}catch(r){C("Error: Cannot parse native reponse for ad response: "+e)}else r.mediaType=n.b}function Y(e,r){if(!Object(s.isStr)(r))return r&&C("Ignoring param key: "+e+", expects string-value, found "+d(r)),p;switch(e){case"bidFloor":case"lat":case"lon":return parseFloat(r)||p;case"yob":return parseInt(r)||p;default:return r}}function v(e){if(K("parseAdSlot bid",e),e.params.adUnit="",e.params.width=0,e.params.height=0,e.params.adSlot=function(e){if(Object(s.isStr)(e))return e.replace(/^\s+/g,"").replace(/\s+$/g,"");return""}(e.params.adSlot),e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(n.b)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var r=0,i=[];r<e.mediaTypes.banner.sizes.length;r++)2===e.mediaTypes.banner.sizes[r].length&&i.push(e.mediaTypes.banner.sizes[r]);e.mediaTypes.banner.sizes=i,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}else C("MediaTypes are Required for all Adunit Configs",e)}function w(e,r){var i=e.KEY;return{id:e.ID,required:r[i].required?1:0,data:{type:e.TYPE,len:r[i].len,ext:r[i].ext}}}function S(e){var r={assets:[]};for(var i in e){if(e.hasOwnProperty(i)){var s={};if(!(r.assets&&r.assets.length>0&&r.assets.hasOwnProperty(i)))switch(i){case h.TITLE.KEY:e[i].len||e[i].length?s={id:h.TITLE.ID,required:e[i].required?1:0,title:{len:e[i].len||e[i].length,ext:e[i].ext}}:C("Error: Title Length is required for native ad: "+JSON.stringify(e));break;case h.IMAGE.KEY:e[i].sizes&&e[i].sizes.length>0?s={id:h.IMAGE.ID,required:e[i].required?1:0,img:{type:b,w:e[i].w||e[i].width||(e[i].sizes?e[i].sizes[0]:p),h:e[i].h||e[i].height||(e[i].sizes?e[i].sizes[1]:p),wmin:e[i].wmin||e[i].minimumWidth||(e[i].minsizes?e[i].minsizes[0]:p),hmin:e[i].hmin||e[i].minimumHeight||(e[i].minsizes?e[i].minsizes[1]:p),mimes:e[i].mimes,ext:e[i].ext}}:C("Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case h.ICON.KEY:e[i].sizes&&e[i].sizes.length>0?s={id:h.ICON.ID,required:e[i].required?1:0,img:{type:g,w:e[i].w||e[i].width||(e[i].sizes?e[i].sizes[0]:p),h:e[i].h||e[i].height||(e[i].sizes?e[i].sizes[1]:p)}}:C("Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case h.VIDEO.KEY:s={id:h.VIDEO.ID,required:e[i].required?1:0,video:{minduration:e[i].minduration,maxduration:e[i].maxduration,protocols:e[i].protocols,mimes:e[i].mimes,ext:e[i].ext}};break;case h.EXT.KEY:s={id:h.EXT.ID,required:e[i].required?1:0};break;case h.LOGO.KEY:s={id:h.LOGO.ID,required:e[i].required?1:0,img:{type:f,w:e[i].w||e[i].width||(e[i].sizes?e[i].sizes[0]:p),h:e[i].h||e[i].height||(e[i].sizes?e[i].sizes[1]:p)}};break;case h.SPONSOREDBY.KEY:case h.BODY.KEY:case h.RATING.KEY:case h.LIKES.KEY:case h.DOWNLOADS.KEY:case h.PRICE.KEY:case h.SALEPRICE.KEY:case h.PHONE.KEY:case h.ADDRESS.KEY:case h.DESC2.KEY:case h.DISPLAYURL.KEY:case h.CTA.KEY:s=w(D[i],e)}}s&&s.id&&(r.assets[r.assets.length]=s)}var t=E.length,a=0;return E.forEach((function(e){for(var i=r.assets.length,s=0;s<i;s++)if(e.id==r.assets[s].id){a++;break}})),I=t!=a,r}function P(e){var r,i=e.mediaTypes.banner.sizes,t=[];if(i!==p&&Object(s.isArray)(i)){if(r={},e.params.width||e.params.height)r.w=e.params.width,r.h=e.params.height;else{if(0===i.length)return r=p,C("Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r;r.w=parseInt(i[0][0],10),r.h=parseInt(i[0][1],10),i=i.splice(1,i.length-1)}i.length>0&&(t=[],i.forEach((function(e){e.length>1&&t.push({w:e[0],h:e[1]})})),t.length>0&&(r.format=t)),r.pos=0,r.topframe=Object(s.inIframe)()?0:1}else C("Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),r=p;return r}function K(e,r){Object(s.logInfo)("PubWise: "+e,r)}function C(e,r){Object(s.logWarn)("PubWise: "+e,r)}Object(a.registerBidder)(T),window.pbjs.installedModules.push("pubwiseBidAdapter")}},[624]);