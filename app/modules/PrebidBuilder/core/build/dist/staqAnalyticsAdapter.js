pbjsChunk([18],{6:function(e,t,n){"use strict";t.a=function(e){var t,n=e.url,r=e.analyticsType,o=e.global,l=e.handler,N=[],D=0,j=!0;(function(){if(j){for(var e=0;e<N.length;e++)N[e]();N.push=function(e){e()},j=!1}Object(i.logMessage)("event count sent to ".concat(o,": ").concat(D))})();return{track:function(e){var t=e.eventType,n=e.args;this.getAdapterType()===S&&window[o](l,t,n);this.getAdapterType()===_&&q.apply(void 0,arguments)},enqueue:U,enableAnalytics:x,disableAnalytics:function(){Object(i._each)(t,(function(e,t){s.off(t,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:x},getAdapterType:function(){return r},getGlobal:function(){return o},getHandler:function(){return l},getUrl:function(){return n}};function q(e){var t=e.eventType,r=e.args,o=e.callback;Object(a.a)(n,o,JSON.stringify({eventType:t,args:r}))}function U(e){var t=e.eventType,n=e.args,r=this;o&&window[o]&&t&&n?this.track({eventType:t,args:n}):N.push((function(){D++,r.track({eventType:t,args:n})}))}function x(e){var n,r=this,a=this;"object"!==c(e)||"object"!==c(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))?(s.getEvents().forEach((function(e){if(e){var t=e.eventType,n=e.args;t!==v&&U.call(a,{eventType:t,args:n})}})),u(n={},p,(function(e){return r.enqueue({eventType:p,args:e})})),u(n,g,(function(e){return r.enqueue({eventType:g,args:e})})),u(n,y,(function(e){return r.enqueue({eventType:y,args:e})})),u(n,h,(function(e){return r.enqueue({eventType:h,args:e})})),u(n,v,(function(e){return r.enqueue({eventType:v,args:e})})),u(n,b,(function(e){return r.enqueue({eventType:b,args:e})})),u(n,m,(function(e){return r.enqueue({eventType:m,args:e})})),u(n,T,(function(e){return r.enqueue({eventType:T,args:e})})),u(n,E,(function(e){return r.enqueue({eventType:E,args:e})})),u(n,f,(function(e){return r.enqueue({eventType:f,args:e})})),u(n,I,(function(e){return r.enqueue({eventType:I,args:e})})),u(n,A,(function(e){return r.enqueue({eventType:A,args:e})})),u(n,w,(function(e){return r.enqueue({eventType:w,args:e})})),u(n,O,(function(e){return r.enqueue({eventType:O,args:e})})),u(n,d,(function(t){t.config="object"===c(e)&&e.options||{},r.enqueue({eventType:d,args:t})})),t=n,Object(i._each)(t,(function(e,t){s.on(t,e)}))):Object(i.logMessage)('Analytics adapter for "'.concat(o,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Object(i.logMessage)('Analytics adapter for "'.concat(o,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var r=n(5),o=n.n(r),a=n(4),i=n(0);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=n(10),l=o.a.EVENTS,d=l.AUCTION_INIT,f=l.AUCTION_END,p=l.REQUEST_BIDS,g=l.BID_REQUESTED,v=l.BID_TIMEOUT,y=l.BID_RESPONSE,h=l.NO_BID,b=l.BID_WON,m=l.BID_ADJUSTMENT,T=l.BIDDER_DONE,E=l.SET_TARGETING,I=l.AD_RENDER_FAILED,A=l.AD_RENDER_SUCCEEDED,w=l.AUCTION_DEBUG,O=l.ADD_AD_UNITS,_="endpoint",S="bundle"},736:function(e,t,n){e.exports=n(737)},737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"storage",(function(){return R})),t.getUmtSource=B,t.ExpiringQueue=W;var r=n(0),o=n(6),a=n(5),i=n.n(a),u=n(9),c=n(18),s=n(4),l=n(7);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g,v=Object(l.b)(),y="auctionInit",h="bidRequested",b="bidResponse",m="bidWon",T="auctionEnd",E="adapterTimedOut";var I=p(Object(o.a)({analyticsType:"endpoint"}),{track:function(e){var t=e.eventType,n=e.args;if(I.context){var r=null;switch(t){case i.a.EVENTS.AUCTION_INIT:I.context.queue&&I.context.queue.init(),r=w;break;case i.a.EVENTS.BID_REQUESTED:r=O;break;case i.a.EVENTS.BID_RESPONSE:r=_;break;case i.a.EVENTS.BID_WON:r=S;break;case i.a.EVENTS.BID_TIMEOUT:r=D;break;case i.a.EVENTS.AUCTION_END:r=N}if(r){var o=r(n);I.context.queue&&(I.context.queue.push(o),t===i.a.EVENTS.BID_WON&&I.context.queue.updateWithWins(o)),t===i.a.EVENTS.AUCTION_END&&A()}}}});function A(){var e=I.context.queue.popAll();if(0!==e.length){var t=I.context.requestTemplate;t.auctionId=I.context.auctionId,t.events=e,I.ajaxCall(JSON.stringify(t))}}function w(e){return I.context.auctionTimeStart=Date.now(),I.context.auctionId=e.auctionId,[j(e.auctionId,void 0,y)]}function O(e){return e.bids.map((function(t){return j(e.auctionId,e.bidderCode,h,t.adUnitCode)}))}function _(e){return[j(e.auctionId,e.bidderCode,b,e.adUnitCode,e.cpm,e.timeToRespond/1e3,!1,e)]}function S(e){return[j(e.auctionId,e.bidderCode,m,e.adUnitCode,e.cpm,void 0,!0,e)]}function N(e){return[j(e.auctionId,void 0,T,void 0,void 0,(Date.now()-I.context.auctionTimeStart)/1e3)]}function D(e){return e.map((function(e){return j(e.auctionId,e.bidderCode,E)}))}function j(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,c={event:n};return t&&(c.adapter=t,c.bidderName=t),r&&(c.adUnitCode=r),o&&(c.cpm=o),a&&(c.timeToRespond=a),void 0!==i?c.bidWon=i:"bidResponse"===n&&(c.bidWon=!1),c.auctionId=e,u&&(b!=n&&m!=n||(c.width=u.width,c.height=u.height,c.adId=u.adId)),c}I.context={},I.originEnableAnalytics=I.enableAnalytics,I.enableAnalytics=function(e){var t,n,o,a;(Object(r.logInfo)("Enabling STAQ Adapter"),g=Object(c.a)(window),e.options.connId)?e.options.url?(I.context={host:e.options.host||"tag.staq.com",url:e.options.url,connectionId:e.options.connId,requestTemplate:(t=e.options.connId,n=g.referer,o=g.referer,a=g.referer,{ver:"1.0.0",domain:a.hostname,path:a.pathname,userAgent:navigator.userAgent,connId:t,env:{screen:{w:window.screen.width,h:window.screen.height},lang:navigator.language},src:B(n,o)}),queue:new W(A,e.options.queueTimeout||4e3)},I.originEnableAnalytics(e)):Object(r.logError)("URL is not defined. STAQ Analytics won't work"):Object(r.logError)("ConnId is not defined. STAQ Analytics won't work")},u.default.registerAnalyticsAdapter({adapter:I,code:"staq"}),t.default=I,I.ajaxCall=function(e){Object(r.logInfo)("SENDING DATA: "+e),Object(s.a)("https://".concat(I.context.url,"/prebid/").concat(I.context.connectionId),(function(){}),e,{contentType:"text/plain"})};var q=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_c1","utm_c2","utm_c3","utm_c4","utm_c5"],U="staq_analytics",x="(direct)",C="(referral)",k="(organic)",R={getItem:function(e){return v.getDataFromLocalStorage(e)},setItem:function(e,t){v.setDataInLocalStorage(e,t)}};function B(e,t){var n,o,a=function(){var e=R.getItem(U);if(!e)return l();return JSON.parse(e)}(),i=function(e,t){var n=function(e){var t=Object(r.parseUrl)(e).search;if(!t.utm_campaign||!t.utm_source)return;var n=[];return Object(r._each)(q,(function(e){var r=t[e]||"";n.push(r)})),f.apply(this,n)}(e);if(n)return n;if(t){var o=function(e){var t={google:/^https?\:\/\/(?:www\.)?(?:google\.(?:com?\.)?(?:com|cat|[a-z]{2})|g.cn)\//i,yandex:/^https?\:\/\/(?:www\.)?ya(?:ndex\.(?:com|net)?\.?(?:asia|mobi|org|[a-z]{2})?|\.ru)\//i,bing:/^https?\:\/\/(?:www\.)?bing\.com\//i,duckduckgo:/^https?\:\/\/(?:www\.)?duckduckgo\.com\//i,ask:/^https?\:\/\/(?:www\.)?ask\.com\//i,yahoo:/^https?\:\/\/(?:[-a-z]+\.)?(?:search\.)?yahoo\.com\//i};for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(e))return n}(t);if(o)return f(o,k,k);var a=Object(r.parseUrl)(e),i=d(function(e){var t=Object(r.parseUrl)(e);return[t.hostname,t.pathname]}(t),2),u=i[0],c=i[1];if(u&&u!==a.hostname)return f(u,C,C,"",c)}return l()}(e,t),u=d(function(e,t){if(p(e)<p(t))return[!0,t];if(p(e)>p(t))return[!1,e];if(e.campaign===C&&e.content!==t.content)return[!0,t];if(e.campaign===k&&e.source!==t.source)return[!0,t];if(!(n=e,-1!==[x,C,k].indexOf(n.campaign)||e.campaign===t.campaign&&e.source===t.source))return[!0,t];var n;return[!1,e]}(a,i),2),c=u[0],s=u[1];return c&&(n=s,o=JSON.stringify(n),R.setItem(U,o)),s;function l(){return f(x,x,x)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",l={source:e,medium:t,campaign:n};return r&&(l.term=r),o&&(l.content=o),a&&(l.c1=a),i&&(l.c2=i),u&&(l.c3=u),c&&(l.c4=c),s&&(l.c5=s),l}function p(e){switch(e.campaign){case x:return 0;case k:return 1;case C:return 2;default:return 3}}}function W(e,t){var n,r=[];function o(){n&&clearTimeout(n),n=setTimeout((function(){r.length&&e()}),t)}this.push=function(e){e instanceof Array?r.push.apply(r,e):r.push(e),o()},this.updateWithWins=function(e){e.forEach((function(e){r.forEach((function(t){"bidResponse"===t.event&&t.auctionId==e.auctionId&&t.adUnitCode==e.adUnitCode&&t.adId==e.adId&&t.adapter==e.adapter&&(t.bidWon=!0)}))}))},this.popAll=function(){var e=r;return r=[],o(),e},this.peekAll=function(){return r},this.init=o}window.pbjs.installedModules.push("staqAnalyticsAdapter")}},[736]);