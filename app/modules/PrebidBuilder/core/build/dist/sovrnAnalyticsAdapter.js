pbjsChunk([20],{6:function(e,t,n){"use strict";t.a=function(e){var t,n=e.url,i=e.analyticsType,r=e.global,d=e.handler,D=[],j=0,w=!0;(function(){if(w){for(var e=0;e<D.length;e++)D[e]();D.push=function(e){e()},w=!1}Object(a.logMessage)("event count sent to ".concat(r,": ").concat(j))})();return{track:function(e){var t=e.eventType,n=e.args;this.getAdapterType()===_&&window[r](d,t,n);this.getAdapterType()===A&&q.apply(void 0,arguments)},enqueue:B,enableAnalytics:k,disableAnalytics:function(){Object(a._each)(t,(function(e,t){c.off(t,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:k},getAdapterType:function(){return i},getGlobal:function(){return r},getHandler:function(){return d},getUrl:function(){return n}};function q(e){var t=e.eventType,i=e.args,r=e.callback;Object(o.a)(n,r,JSON.stringify({eventType:t,args:i}))}function B(e){var t=e.eventType,n=e.args,i=this;r&&window[r]&&t&&n?this.track({eventType:t,args:n}):D.push((function(){j++,i.track({eventType:t,args:n})}))}function k(e){var n,i=this,o=this;"object"!==u(e)||"object"!==u(e.options)||(void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling))?(c.getEvents().forEach((function(e){if(e){var t=e.eventType,n=e.args;t!==h&&B.call(o,{eventType:t,args:n})}})),s(n={},p,(function(e){return i.enqueue({eventType:p,args:e})})),s(n,y,(function(e){return i.enqueue({eventType:y,args:e})})),s(n,b,(function(e){return i.enqueue({eventType:b,args:e})})),s(n,v,(function(e){return i.enqueue({eventType:v,args:e})})),s(n,h,(function(e){return i.enqueue({eventType:h,args:e})})),s(n,g,(function(e){return i.enqueue({eventType:g,args:e})})),s(n,T,(function(e){return i.enqueue({eventType:T,args:e})})),s(n,I,(function(e){return i.enqueue({eventType:I,args:e})})),s(n,E,(function(e){return i.enqueue({eventType:E,args:e})})),s(n,f,(function(e){return i.enqueue({eventType:f,args:e})})),s(n,O,(function(e){return i.enqueue({eventType:O,args:e})})),s(n,m,(function(e){return i.enqueue({eventType:m,args:e})})),s(n,S,(function(e){return i.enqueue({eventType:S,args:e})})),s(n,N,(function(e){return i.enqueue({eventType:N,args:e})})),s(n,l,(function(t){t.config="object"===u(e)&&e.options||{},i.enqueue({eventType:l,args:t})})),t=n,Object(a._each)(t,(function(e,t){c.on(t,e)}))):Object(a.logMessage)('Analytics adapter for "'.concat(r,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return Object(a.logMessage)('Analytics adapter for "'.concat(r,'" already enabled, unnecessary call to `enableAnalytics`.'))}}};var i=n(5),r=n.n(i),o=n(4),a=n(0);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=n(10),d=r.a.EVENTS,l=d.AUCTION_INIT,f=d.AUCTION_END,p=d.REQUEST_BIDS,y=d.BID_REQUESTED,h=d.BID_TIMEOUT,b=d.BID_RESPONSE,v=d.NO_BID,g=d.BID_WON,T=d.BID_ADJUSTMENT,I=d.BIDDER_DONE,E=d.SET_TARGETING,O=d.AD_RENDER_FAILED,m=d.AD_RENDER_SUCCEEDED,S=d.AUCTION_DEBUG,N=d.ADD_AD_UNITS,A="endpoint",_="bundle"},728:function(e,t,n){e.exports=n(729)},729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(6),o=n(9),a=n(5),s=n.n(a),u=n(4),c=n(3),d=n(11),l=n.n(d),f=n(12),p=n.n(f);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var g=Object(u.b)(0),T=s.a.EVENTS,I=T.AUCTION_END,E=T.BID_REQUESTED,O=T.BID_ADJUSTMENT,m=T.BID_RESPONSE,S=T.BID_WON,N="https://pba.aws.lijit.com/analytics",A={},_=function(e){var t=e.err,n=e.topFrame,i="";if(t)try{try{i=window.top.location.href}catch(e){var r=window.location.ancestorOrigins;i=r[r.length-1]}}catch(e){i=n.document.referrer}else i=n.location.href;return i}(function(){var e=window;try{for(;e.parent.document!==e.document;){if(!e.parent.document)throw new Error;e=e.parent}}catch(e){}return{topFrame:e,err:!1}}()),D=v(Object(r.a)({url:N,analyticsType:"endpoint"}),{track:function(e){var t=e.eventType,n=e.args;try{if(t===S)return void new j(this.sovrnId,n).send();if(n&&n.auctionId&&A[n.auctionId]&&"complete"===A[n.auctionId].status)throw new Error("Event Received after Auction Close Auction Id "+n.auctionId);switch(n&&n.auctionId&&void 0===A[n.auctionId]&&(A[n.auctionId]=new w(this.sovrnId,n.auctionId)),t){case E:A[n.auctionId].bidRequested(n);break;case O:A[n.auctionId].originalBid(n);break;case m:A[n.auctionId].adjustedBid(n);break;case I:A[n.auctionId].send()}}catch(e){new q(e,this.sovrnId,{eventType:t,args:n}).send()}}});D.getAuctions=function(){return A},D.originEnableAnalytics=D.enableAnalytics,D.enableAnalytics=function(e){var t="";e&&e.options&&(e.options.sovrnId||e.options.affiliateId)?(t=e.options.sovrnId||e.options.affiliateId,D.sovrnId=t,e.options.pbaUrl&&(N=e.options.pbaUrl),D.originEnableAnalytics(e)):Object(i.logError)("Need Sovrn Id to log auction results. Please contact a Sovrn representative if you do not know your Sovrn Id.")},o.default.registerAnalyticsAdapter({adapter:D,code:"sovrn"});var j=function(){function e(t,n){y(this,e),this.body={},this.body.prebidVersion="prebid_prebid_6.10.0-pre",this.body.sovrnId=t,this.body.winningBid=JSON.parse(JSON.stringify(n)),this.body.url=_,this.body.payload="winner",delete this.body.winningBid.ad}return b(e,[{key:"send",value:function(){this.body.ts=Object(i.timestamp)(),g(N,null,JSON.stringify(this.body),{contentType:"application/json",method:"POST"})}}]),e}(),w=function(){function e(t,n){y(this,e),this.auction={},this.auction.prebidVersion="prebid_prebid_6.10.0-pre",this.auction.sovrnId=t,this.auction.auctionId=n,this.auction.payload="auction",this.auction.timeouts={buffer:c.b.getConfig("timeoutBuffer"),bidder:c.b.getConfig("bidderTimeout")},this.auction.priceGranularity=c.b.getConfig("priceGranularity"),this.auction.url=_,this.auction.requests=[],this.auction.unsynced=[],this.dropBidFields=["auctionId","ad","requestId","bidderCode"],setTimeout((function(e){delete A[e]}),3e5,this.auction.auctionId)}return b(e,[{key:"bidRequested",value:function(e){var t=JSON.parse(JSON.stringify(e));delete t.doneCbCallCount,delete t.auctionId,this.auction.requests.push(t)}},{key:"findBid",value:function(e){var t=l()(this.auction.requests,(function(t){return t.bidderCode===e.bidderCode}));t||this.auction.unsynced.push(JSON.parse(JSON.stringify(e)));var n=l()(t.bids,(function(t){return t.bidId===e.requestId}));return n||(e.unmatched=!0,t.bids.push(JSON.parse(JSON.stringify(e)))),n}},{key:"originalBid",value:function(e){var t=this.findBid(e);t&&(v(t,JSON.parse(JSON.stringify(e))),this.dropBidFields.forEach((function(e){return delete t[e]})))}},{key:"adjustedBid",value:function(e){var t=this,n=this.findBid(e);n&&(n.originalValues=Object.keys(e).reduce((function(i,r){return JSON.stringify(n[r])===JSON.stringify(e[r])||p()(t.dropBidFields,r)||(i[r]=n[r],n[r]=e[r]),i}),{}))}},{key:"send",value:function(){var e=this,t={};this.auction.requests.forEach((function(e){e.bids.forEach((function(e){t[e.adUnitCode]=t[e.adUnitCode]||{cpm:0},e.cpm>t[e.adUnitCode].cpm&&(t[e.adUnitCode]=e)}))})),Object.keys(t).forEach((function(e){t[e].isAuctionWinner=!0})),this.auction.ts=Object(i.timestamp)(),g(N,(function(){A[e.auction.auctionId]={status:"complete",auctionId:e.auction.auctionId}}),JSON.stringify(this.auction),{contentType:"application/json",method:"POST"})}}]),e}(),q=function(){function e(t,n,i){y(this,e),this.error={},this.error.payload="error",this.error.message=t.message,this.error.stack=t.stack,this.error.data=i,this.error.prebidVersion="prebid_prebid_6.10.0-pre",this.error.sovrnId=n,this.error.url=_,this.error.userAgent=navigator.userAgent}return b(e,[{key:"send",value:function(){this.error.data&&this.error.data.requests&&this.error.data.requests.forEach((function(e){e.bids&&e.bids.forEach((function(e){e.ad&&delete e.ad}))})),ErrorEvent.data&&this.error.data.ad&&delete this.error.data.ad,this.error.ts=Object(i.timestamp)(),g(N,null,JSON.stringify(this.error),{contentType:"application/json",method:"POST"})}}]),e}();t.default=D,window.pbjs.installedModules.push("sovrnAnalyticsAdapter")}},[728]);